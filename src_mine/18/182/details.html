<html><h3>8ec91d8ebde1ccef48fb58c6a446aec10a00f7ca,scripts/machine_translation/train_gnmt.py,,,#,56
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
data_train, data_val, data_test, val_tgt_sentences, test_tgt_sentences, src_vocab, tgt_vocab\
    = dataprocessor.load_translation_data(dataset=args.dataset, bleu=&quottweaked&quot, args=args)

<a id="change">with io.open(os.path.join(args.save_dir, &quotval_gt.txt&quot), &quotw&quot, encoding=&quotutf-8&quot) as of:
    for ele in val_tgt_sentences:
        of.write(&quot &quot.join(ele) + &quot\n&quot)

</a>with io.open(os.path.join(args.save_dir, &quottest_gt.txt&quot), &quotw&quot, encoding=&quotutf-8&quot) as of:
    for ele in test_tgt_sentences:
        of.write(&quot &quot.join(ele) + &quot\n&quot)
</code></pre><h3>After Change</h3><pre><code class='java'>
data_train, data_val, data_test, val_tgt_sentences, test_tgt_sentences, src_vocab, tgt_vocab\
    = dataprocessor.load_translation_data(dataset=args.dataset, bleu=&quottweaked&quot, args=args)

<a id="change">dataprocessor.write_sentences(val_tgt_sentences, os.path.join(args.save_dir, &quotval_gt.txt&quot))</a>
dataprocessor.write_sentences(test_tgt_sentences, os.path.join(args.save_dir, &quottest_gt.txt&quot))

data_train = data_train.transform(lambda src, tgt: (src, tgt, len(src), len(tgt)), lazy=False)
data_val = gluon.data.SimpleDataset([(ele[0], ele[1], len(ele[0]), len(ele[1]), i)</code></pre><img src="558968.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 7</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/dmlc/gluon-nlp/commit/8ec91d8ebde1ccef48fb58c6a446aec10a00f7ca#diff-b82ac1a927e016dad3a3baaab5061bd3dab436aea169f99c5b678603d2521b0cL110' target='_blank'>Link</a></div><div id='project'> Project Name: dmlc/gluon-nlp</div><div id='commit'> Commit Name: 8ec91d8ebde1ccef48fb58c6a446aec10a00f7ca</div><div id='time'> Time: 2018-11-24</div><div id='author'> Author: szhengac@users.noreply.github.com</div><div id='file'> File Name: scripts/machine_translation/train_gnmt.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: </div><BR><BR><div id='link'><a href='https://github.com/dmlc/gluon-nlp/commit/8ec91d8ebde1ccef48fb58c6a446aec10a00f7ca#diff-749960466686f82c51e7b0806bb1625371e9007e9def37d9dac36fc4611f76bcL142' target='_blank'>Link</a></div><div id='project'> Project Name: dmlc/gluon-nlp</div><div id='commit'> Commit Name: 8ec91d8ebde1ccef48fb58c6a446aec10a00f7ca</div><div id='time'> Time: 2018-11-24</div><div id='author'> Author: szhengac@users.noreply.github.com</div><div id='file'> File Name: scripts/machine_translation/train_transformer.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: </div><BR>