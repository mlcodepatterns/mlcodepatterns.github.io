<html><h3>6a4355999fd3af41fbb2215a9f207195caafc546,chainercv/links/model/ssd/multibox_loss.py,,_hard_negative,#Any#Any#Any#,18
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

def _hard_negative(x, positive, k):
    xp = chainer.cuda.get_array_module(x, positive)
    x = <a id="change">chainer.cuda.to_cpu(x)</a>
    <a id="change">positive = chainer.cuda.to_cpu(positive)</a>
    rank = (x * (positive - 1)).argsort(axis=1).argsort(axis=1)
    hard_negative = rank &lt; (positive.sum(axis=1) * k)[:, np.newaxis]
    <a id="change">return xp.array(hard_negative)</a>


def multibox_loss(mb_locs, mb_confs, gt_mb_locs, gt_mb_labels, k):
    Computes multibox losses.</code></pre><h3>After Change</h3><pre><code class='java'>
def _hard_negative(x, positive, k):
    rank = (x * (positive - 1)).argsort(axis=1).argsort(axis=1)
    hard_negative = rank &lt; (positive.sum(axis=1) * k)[:, np.newaxis]
    <a id="change">return hard_negative</a>


def multibox_loss(mb_locs, mb_confs, gt_mb_locs, gt_mb_labels, k):
    Computes multibox losses.</code></pre><img src="110759659.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/chainer/chainercv/commit/6a4355999fd3af41fbb2215a9f207195caafc546#diff-09fc91e91c365761455686990119a8e02ff2887804234c79d3e8059031c10b6aL19' target='_blank'>Link</a></div><div id='project'> Project Name: chainer/chainercv</div><div id='commit'> Commit Name: 6a4355999fd3af41fbb2215a9f207195caafc546</div><div id='time'> Time: 2017-10-06</div><div id='author'> Author: Hakuyume@users.noreply.github.com</div><div id='file'> File Name: chainercv/links/model/ssd/multibox_loss.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: _hard_negative</div><BR><BR><div id='link'><a href='https://github.com/chainer/chainerrl/commit/c23fa1d1def2202c2508247eef2b8b83aedbe54b#diff-2e64e885a35ae8cf60369e92e73a096c9a278e0992200c1d889407992d2e633fL129' target='_blank'>Link</a></div><div id='project'> Project Name: chainer/chainerrl</div><div id='commit'> Commit Name: c23fa1d1def2202c2508247eef2b8b83aedbe54b</div><div id='time'> Time: 2016-08-25</div><div id='author'> Author: muupan@gmail.com</div><div id='file'> File Name: agents/dqn.py</div><div id='class'> Class Name: DQN</div><div id='method'> Method Name: _batch_states</div><BR><BR><div id='link'><a href='https://github.com/eriklindernoren/PyTorch-YOLOv3/commit/9b0a0dd6fe7b4ac021d91acc6b4f96b403dd6b67#diff-dcfeaa5ac3dffd54264034760914588d92fc7395c81eaa9274715840dc28100bL250' target='_blank'>Link</a></div><div id='project'> Project Name: eriklindernoren/PyTorch-YOLOv3</div><div id='commit'> Commit Name: 9b0a0dd6fe7b4ac021d91acc6b4f96b403dd6b67</div><div id='time'> Time: 2019-04-26</div><div id='author'> Author: eriklindernoren@live.se</div><div id='file'> File Name: models.py</div><div id='class'> Class Name: Darknet</div><div id='method'> Method Name: forward</div><BR>