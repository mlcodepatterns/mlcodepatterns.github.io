<html><h3>3857327e011ccf7095613d5d01843cc36e67ac37,tests/integ/test_mxnet_train.py,,test_deploy_model_with_update_endpoint,#Any#Any#Any#,155
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        assert old_config_name != new_config_name
        assert new_production_variants["InstanceType"] == "ml.m4.xlarge"
        assert new_production_variants["InitialInstanceCount"] == 1
        <a id="change">assert new_production_variants["AcceleratorType"] is None</a>


@pytest.mark.skip(
    reason="This test has always failed, but the failure was masked by a bug. "</code></pre><h3>After Change</h3><pre><code class='java'>

        &#47&#47 Wait for endpoint to finish updating
        max_retry_count = 40  &#47&#47 Endpoint update takes ~7min. 40 retries * 30s sleeps = 20min timeout
        <a id="change">current_retry_count = 0</a>
        <a id="change">while current_retry_count &lt;= max_retry_count:
            if current_retry_count &gt;= max_retry_count:
                raise Exception("Endpoint status not &quotInService&quot within expected timeout.")
            time.sleep(30)
            new_endpoint = sagemaker_session.sagemaker_client.describe_endpoint(
                EndpointName=endpoint_name
            )
            current_retry_count += 1
            if new_endpoint["EndpointStatus"] == "InService":
                break

       </a> new_config_name = new_endpoint["EndpointConfigName"]
        new_config = sagemaker_session.sagemaker_client.describe_endpoint_config(
            EndpointConfigName=new_config_name
        )</code></pre><img src="5367541.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 6</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/aws/sagemaker-python-sdk/commit/3857327e011ccf7095613d5d01843cc36e67ac37#diff-7f5cc0e0deef34e207a0324c645d474d295f576b4e4642a9793b5693bb6a3736L152' target='_blank'>Link</a></div><div id='project'> Project Name: aws/sagemaker-python-sdk</div><div id='commit'> Commit Name: 3857327e011ccf7095613d5d01843cc36e67ac37</div><div id='time'> Time: 2019-08-13</div><div id='author'> Author: knakad@amazon.com</div><div id='file'> File Name: tests/integ/test_mxnet_train.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: test_deploy_model_with_update_endpoint</div><BR><BR><div id='link'><a href='https://github.com/tensorflow/cleverhans/commit/9899a6ef39d93c43d47a844e57419d90b5b84456#diff-2023a275fad0f29e4a40b45e4a033c2c795d257423b1e09011f32994b011ea88L121' target='_blank'>Link</a></div><div id='project'> Project Name: tensorflow/cleverhans</div><div id='commit'> Commit Name: 9899a6ef39d93c43d47a844e57419d90b5b84456</div><div id='time'> Time: 2018-10-11</div><div id='author'> Author: goodfellow@google.com</div><div id='file'> File Name: cleverhans/serial.py</div><div id='class'> Class Name: NoRefModel</div><div id='method'> Method Name: get_vars</div><BR><BR><div id='link'><a href='https://github.com/mathics/Mathics/commit/e9ef3645ba35903b0df49c7301cde6945b052cbd#diff-0bd9896452e0005c7597eba33550bf320f0ce91c8e28045e0b24293190223b71L22' target='_blank'>Link</a></div><div id='project'> Project Name: mathics/Mathics</div><div id='commit'> Commit Name: e9ef3645ba35903b0df49c7301cde6945b052cbd</div><div id='time'> Time: 2018-10-08</div><div id='author'> Author: w.vollprecht@gmail.com</div><div id='file'> File Name: test/test_console.py</div><div id='class'> Class Name: ConsoleTest</div><div id='method'> Method Name: testLaunch</div><BR><BR><div id='link'><a href='https://github.com/markovmodel/PyEMMA/commit/0c42c23438b217aa7583eaf626b4288072b55ac5#diff-e62403db651f737fd9c911f136986eceaf30c0bc99a8ee9ed57ef534cc247d28L38' target='_blank'>Link</a></div><div id='project'> Project Name: markovmodel/PyEMMA</div><div id='commit'> Commit Name: 0c42c23438b217aa7583eaf626b4288072b55ac5</div><div id='time'> Time: 2017-09-19</div><div id='author'> Author: m.scherer@fu-berlin.de</div><div id='file'> File Name: pyemma/_base/serialization/jsonpickler_handlers.py</div><div id='class'> Class Name: H5BackendLinkageHandler</div><div id='method'> Method Name: next_array_id</div><BR><BR><div id='link'><a href='https://github.com/openml/openml-python/commit/67f8e19ec14eed5f58893be6bee44e50519ea2c4#diff-1b2a297a05b8d73db54d4842135030c43abbc7cf7b2364d17c34ddbecc32fa89L278' target='_blank'>Link</a></div><div id='project'> Project Name: openml/openml-python</div><div id='commit'> Commit Name: 67f8e19ec14eed5f58893be6bee44e50519ea2c4</div><div id='time'> Time: 2017-05-23</div><div id='author'> Author: feurerm@informatik.uni-freiburg.de</div><div id='file'> File Name: tests/test_flows/test_flow.py</div><div id='class'> Class Name: TestFlow</div><div id='method'> Method Name: test_sklearn_to_upload_to_flow</div><BR><BR><div id='link'><a href='https://github.com/ray-project/ray/commit/f2408b719c991b98ba5dc77db81dc184805b33df#diff-6f5e71bb51d43fa4a0c45b2ca3af4780866135354aeaf938b5339af9a7634d66L141' target='_blank'>Link</a></div><div id='project'> Project Name: ray-project/ray</div><div id='commit'> Commit Name: f2408b719c991b98ba5dc77db81dc184805b33df</div><div id='time'> Time: 2020-09-17</div><div id='author'> Author: weepingwillowben@gmail.com</div><div id='file'> File Name: rllib/env/pettingzoo_env.py</div><div id='class'> Class Name: PettingZooEnv</div><div id='method'> Method Name: step</div><BR>