<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    
    &#47&#47 For each order of ngram, calculate the no. of ngram matches and
    &#47&#47 keep track of no. of ngram in references.
    <a id="change">ref_ngrams = Counter(everygrams(reference, min_len, max_len))</a>
    hyp_ngrams = Counter(everygrams(hypothesis, min_len, max_len))
    overlap_ngrams = ref_ngrams & hyp_ngrams
    <a id="change">tp = sum(overlap_ngrams.values())</a> &#47&#47 True positives.
    tpfp = sum(hyp_ngrams.values()) &#47&#47 True positives + False positives.
    tpfn = sum(ref_ngrams.values()) &#47&#47 True positives + False negatives.
</code></pre><h3>After Change</h3><pre><code class='java'>
    

    &#47&#47 compatibility with previous single-reference API:
    if not references or isinstance(<a id="change">references[0]</a>, string_types):
        references = [references]

    return corpus_gleu(</code></pre>