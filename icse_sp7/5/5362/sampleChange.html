<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            &quotmatplotlib version &quot + __version__ + &quot, http://matplotlib.org/&quot)
        metadata = OrderedDict({&quotSoftware&quot: version_str})
        user_metadata = kwargs.pop("metadata", None)
        <a id="change">if user_metadata is not None:
            metadata.update(user_metadata)

       </a> with cbook._setattr_cm(renderer, dpi=self.figure.dpi), \
                cbook.open_file_cm(filename_or_obj, "wb") as fh:
            _png.write_png(renderer._renderer, fh,
                           self.figure.dpi, metadata=metadata)</code></pre><h3>After Change</h3><pre><code class='java'>
                for k, v in metadata.items():
                    pnginfo.add_text(k, v)
                pil_kwargs["pnginfo"] = pnginfo
            <a id="change">pil_kwargs.setdefault("dpi", (self.figure.dpi, self.figure.dpi))</a>
            (Image.frombuffer("RGBA", size, buf, "raw", "RGBA", 0, 1)
             .save(filename_or_obj, format="png", **pil_kwargs))

        else:</code></pre>