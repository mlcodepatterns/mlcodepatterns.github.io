<html><h3>4270c3dae0b80b384c4a0026e2043345904b4fe5,deepchem/featurizers/atomic_coordinates.py,NeighborListAtomicCoordinates,_featurize,#NeighborListAtomicCoordinates#Any#,161
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    ----------
    
    N = mol.GetNumAtoms()
    <a id="change">coords = np.zeros((N,3))</a>

    <a id="change">coords_raw = [mol.GetConformer(0).GetAtomPosition(i) for i in range(N)]</a>
    for atom in range(N):
      coords[atom,0] = coords_raw[atom].x
      coords[atom,1] = coords_raw[atom].y
      <a id="change">coords[atom,2]</a> = coords_raw[atom].z

    x_bins, y_bins, z_bins = get_cells(coords, self.neighbor_cutoff)
</code></pre><h3>After Change</h3><pre><code class='java'>
      &#47&#47 result in neighboring cells being seen multiple times. Use a set() to
      &#47&#47 make sure duplicate neighbors are ignored. Convert back to list before
      &#47&#47 returning. 
      neighbor_list[atom] = <a id="change">set()</a>
      &#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47 DEBUG
      all_nbrs = set()
      print("self.neighbor_cutoff")
      print(self.neighbor_cutoff)
      &#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47 DEBUG
      for neighbor_cell in neighbor_cells:
        atoms_in_cell = cell_to_atoms[neighbor_cell]
        for neighbor_atom in atoms_in_cell:
          if neighbor_atom == atom:
            continue
          &#47&#47 TODO(rbharath): How does distance need to be modified here to
          &#47&#47 account for periodic boundary conditions?
          if np.linalg.norm(coords[atom] - coords[neighbor_atom]) &lt; self.neighbor_cutoff:
            neighbor_list[atom].add(neighbor_atom)
          &#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47 DEBUG
          all_nbrs.add(neighbor_atom)
          &#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47 DEBUG
          
      &#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47 DEBUG
      print("All neighbor-cell atoms for %d = %s" % (atom, str(all_nbrs)))
      <a id="change">neighbor_list[atom] = list(neighbor_list[atom])</a>
        
    return neighbor_list
</code></pre><img src="94003450.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/deepchem/deepchem/commit/4270c3dae0b80b384c4a0026e2043345904b4fe5#diff-67c8056830808ed20e8b77de37e0f81e792bed68396739acaeee72a00328b5a8L168' target='_blank'>Link</a></div><div id='project'> Project Name: deepchem/deepchem</div><div id='commit'> Commit Name: 4270c3dae0b80b384c4a0026e2043345904b4fe5</div><div id='time'> Time: 2016-08-31</div><div id='author'> Author: bharath.ramsundar@gmail.com</div><div id='file'> File Name: deepchem/featurizers/atomic_coordinates.py</div><div id='class'> Class Name: NeighborListAtomicCoordinates</div><div id='method'> Method Name: _featurize</div><BR><BR><div id='link'><a href='https://github.com/biotite-dev/biotite/commit/7667b2408f7f109e7ca179593c5998c132651fed#diff-c3cbcc256fe5ebb12d7da5a0ebe874a617ac51518cb46b072a4e4f5842205940L64' target='_blank'>Link</a></div><div id='project'> Project Name: biotite-dev/biotite</div><div id='commit'> Commit Name: 7667b2408f7f109e7ca179593c5998c132651fed</div><div id='time'> Time: 2018-09-25</div><div id='author'> Author: patrick.kunzm@gmail.com</div><div id='file'> File Name: doc/examples/scripts/sequence/lexa_conservation.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: </div><BR><BR><div id='link'><a href='https://github.com/lmcinnes/pynndescent/commit/900f52578dfa46a1f3b4de33bc50e8fd6ad3693e#diff-db9824f558d2d2dff121f6cf56c63a5d019a6bb2e7388f2f0089e1b2d77d50e9L96' target='_blank'>Link</a></div><div id='project'> Project Name: lmcinnes/pynndescent</div><div id='commit'> Commit Name: 900f52578dfa46a1f3b4de33bc50e8fd6ad3693e</div><div id='time'> Time: 2019-09-17</div><div id='author'> Author: leland.mcinnes@gmail.com</div><div id='file'> File Name: pynndescent/pynndescent_.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: initialized_nnd_search</div><BR>