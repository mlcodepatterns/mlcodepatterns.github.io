<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                 for veh_id in self.sorted_ids]

        &#47&#47 divide the values by the maximum attainable speed
        normalized_vel = <a id="change">np.array(vel) / max_speed</a>

        normalized_pos = []
        for i in range(len(pos)):
            if edge[i] == 0:
                &#47&#47 positions of vehicles in the ring are divided by the length
                &#47&#47 of the ring
                normalized_pos.append(pos[i])
            elif edge[i] == 1:
                &#47&#47 positions of vehicles in the merge are divided by the length
                &#47&#47 of the merge
                normalized_pos.append(pos[i])

        state = np.array([normalized_vel, normalized_pos, edge, is_rl]).T
        <a id="change">return state</a>

    def sort_by_position(self):
        
        See parent class</code></pre><h3>After Change</h3><pre><code class='java'>
        positions on the edge, for each vehicle.
        
        vel = self.vehicles.get_speed(self.sorted_ids)
        pos = [<a id="change">self.get_x_by_id(veh_id)</a> for veh_id in self.sorted_ids]
        &#47&#47 is_rl = [int(veh_id in self.rl_ids) for veh_id in self.sorted_ids]

        &#47&#47 &#47&#47 normalize the speed</code></pre>