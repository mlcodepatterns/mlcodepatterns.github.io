<html><h3>9b7b23fd9bbc8baad2d2f88c1a66a2547683cd40,examples/dataflow-data-generator/data-generator-pipeline/data_generator/AvroUtil.py,,fix_record_for_avro,#Any#Any#,21
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
def fix_record_for_avro(record, avro_schema):
    for field in avro_schema.fields:
        field_name = field.name
        datatype = <a id="change">field.type.to_json()</a>
        if isinstance(datatype, dict):
            &#47&#47 This is a record type definition so we need to recurse a level deeper.
            record[field_name] = fix_record_for_avro(
                record[field_name], avro.schema.Parse(json.dumps(datatype)))[0]</code></pre><h3>After Change</h3><pre><code class='java'>


def fix_record_for_avro(record, avro_schema):
    for field in <a id="change">avro_schema[&quotfields&quot]</a>:
        field_name = field[&quotname&quot]
        datatype = field[&quottype&quot]
        if isinstance(datatype, dict):</code></pre><img src="117044557.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 2</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/GoogleCloudPlatform/professional-services/commit/9b7b23fd9bbc8baad2d2f88c1a66a2547683cd40#diff-886ff3ab101d09bb77e546fb517c5827f70aa52698e888d875232a066b558006L22' target='_blank'>Link</a></div><div id='project'> Project Name: GoogleCloudPlatform/professional-services</div><div id='commit'> Commit Name: 9b7b23fd9bbc8baad2d2f88c1a66a2547683cd40</div><div id='time'> Time: 2020-02-24</div><div id='author'> Author: jferriero@google.com</div><div id='file'> File Name: examples/dataflow-data-generator/data-generator-pipeline/data_generator/AvroUtil.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: fix_record_for_avro</div><BR><BR><div id='link'><a href='https://github.com/nilmtk/nilmtk/commit/df7ccde5e74141181d6576c0247bf7ea14561873#diff-0ed7727a453ba16ecd9c027f43d0e0e888895db18dfb0eee49b98b83cd666356L105' target='_blank'>Link</a></div><div id='project'> Project Name: nilmtk/nilmtk</div><div id='commit'> Commit Name: df7ccde5e74141181d6576c0247bf7ea14561873</div><div id='time'> Time: 2013-12-14</div><div id='author'> Author: nipunreddevil@gmail.com</div><div id='file'> File Name: nilmtk/dataset/dataset.py</div><div id='class'> Class Name: DataSet</div><div id='method'> Method Name: to_json</div><BR><BR><div id='link'><a href='https://github.com/chartbeat-labs/textacy/commit/800dcf66028cc6d35a9d3984d9bff1992a13f16e#diff-45b370bab958f6129bab1b47192520a9aa8918d54b6c2dc05a041be90c63646dL112' target='_blank'>Link</a></div><div id='project'> Project Name: chartbeat-labs/textacy</div><div id='commit'> Commit Name: 800dcf66028cc6d35a9d3984d9bff1992a13f16e</div><div id='time'> Time: 2016-02-11</div><div id='author'> Author: burton@chartbeat.com</div><div id='file'> File Name: textacy/data.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: load_depechemood</div><BR>