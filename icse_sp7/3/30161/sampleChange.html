<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    &#47&#47 setting filenames, tarfilenames, backup_urls
    &#47&#47 tarfilenames and backup_urls will be used for downloading data base
    <a id="change">files = dict(
        counts=settings.datasetdir / f&quot{sample_id}_filtered_feature_bc_matrix.h5&quot,
        tissue_positions_file=settings.datasetdir / &quotspatial/tissue_positions_list.csv&quot,
        scalefactors_json_file=settings.datasetdir / &quotspatial/scalefactors_json.json&quot,
        hires_image=settings.datasetdir / &quotspatial/tissue_hires_image.png&quot,
        lowres_image=settings.datasetdir / &quotspatial/tissue_lowres_image.png&quot,
    )</a>

    tarfiles = dict(
        tissue_positions_file=settings.datasetdir / f&quot{sample_id}_spatial.tar&quot,
        scalefactors_json_file=settings.datasetdir / f&quot{sample_id}_spatial.tar&quot,
        hires_image=settings.datasetdir / f&quot{sample_id}_spatial.tar&quot,
        lowres_image=settings.datasetdir / f&quot{sample_id}_spatial.tar&quot,
    )

    url_prefix = (
        f&quothttp://cf.10xgenomics.com/samples/spatial-exp/1.0.0/{sample_id}/{sample_id}&quot
    )
    backup_urls = dict(
        counts=f&quot{url_prefix}_filtered_feature_bc_matrix.h5&quot,
        tissue_positions_file=f&quot{url_prefix}_spatial.tar.gz&quot,
        scalefactors_json_file=f&quot{url_prefix}_spatial.tar.gz&quot,
        hires_image=f&quot{url_prefix}_spatial.tar.gz&quot,
        lowres_image=f&quot{url_prefix}_spatial.tar.gz&quot,
    )

    &#47&#47 download and untar files if necessary
    for f in <a id="change">tqdm(files, desc=&quotFiles&quot)</a>:
        if f in tarfiles:
            _utils.check_presence_download_untar(
                filename=files[f], tarfilename=tarfiles[f], backup_url=backup_urls[f]</code></pre><h3>After Change</h3><pre><code class='java'>
    Annotated data matrix.
    
    _download_visium_dataset(sample_id)
    <a id="change">return read_visium(settings.datasetdir / sample_id)</a>
</code></pre>