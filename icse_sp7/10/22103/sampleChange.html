<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        Send a message to a user.
        target_devices = kwargs.get(ATTR_TARGET)
        devices = []
        <a id="change">for gw_devs in self.platform_devices:
            for device in gw_devs.values():
                if target_devices is None or device.name in target_devices:
                    devices.append(device)

       </a> for device in devices:
            device.send_msg(message)
</code></pre><h3>After Change</h3><pre><code class='java'>
    def send_message(self, message="", **kwargs):
        Send a message to a user.
        target_devices = kwargs.get(ATTR_TARGET)
        <a id="change">devices = [device for device in self.devices.values()
                   if target_devices is None or device.name in target_devices]</a>

        for device in devices:
            device.send_msg(message)
</code></pre>