<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                              _id="heatmap-%s" % question["id"],
                              )
                content.append(heatmap)
                <a id="change">scale = DIV(DIV(_class="scale wide",
                                ),
                            DIV(1,
                                _class="fleft",
                                ),
                            DIV(12,
                                _class="fright",
                                ),
                            _class="scale-container",
                            )</a>
                content.append(scale)

            card = DIV(DIV(SPAN(question["name"],
                                _class="card-title",</code></pre><h3>After Change</h3><pre><code class='java'>
                &#47&#47content.append(scale)

                options = question["options"]
                <a id="change">values = []</a>
                vappend = values.append
                for option in options:
                    total = 0
                    for answer in responses:
                        if option in answer.get("selectedRegions", []):
                            total += 1
                    &#47&#47 @ToDo: Get report.js to use these
                    &#47&#47if len_responses:
                    &#47&#47    percentage = total / len_responses
                    &#47&#47else:
                    &#47&#47    percentage = 0
                    vappend({"label": option,
                             "value": total,
                             &#47&#47"p": percentage,
                             })

                data = [{"values": values,
                         }]
                hidden_input = INPUT(_type="hidden",
                                     _class="multichoice-graph",
                                     _value=json.dumps(data, separators=SEPARATORS),
                                     )
                <a id="change">graph = DIV(hidden_input,
                            _class="graph-container",
                            _id="heatmap-graph-%s" % question["id"],
                            )</a>
                content.append(graph)

            card = DIV(DIV(SPAN(question["name"],
                                _class="card-title",</code></pre>