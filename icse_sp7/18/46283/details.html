<html><h3>0c9b9ac2bba3a52e5175a24c217b1f3ab8581e08,geomstats/learning/frechet_mean.py,,_default_gradient_descent,#Any#Any#Any#Any#Any#Any#Any#,81
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        einsum_str = &quotn,nj-&gt;j&quot
    if point_type == &quotmatrix&quot:
        einsum_str = &quotn,nij-&gt;ij&quot
        <a id="change">points = gs.to_ndarray(points, to_ndim=3)</a>
    n_points = gs.shape(points)[0]

    if weights is None:
        weights = gs.ones((n_points,))

    mean = points[0]

    if n_points == 1:
        return mean

    sum_weights = gs.sum(weights)
    sq_dists_between_iterates = []
    iteration = 0
    sq_dist = 0.
    var = 0.

    while iteration &lt; max_iter:
        condition = <a id="change">~gs.logical_or(
            gs.isclose(var, 0.),
            gs.less_equal(sq_dist, epsilon * var))</a>
        if not (condition or iteration == 0):
            break
        logs = metric.log(point=points, base_point=mean)
</code></pre><h3>After Change</h3><pre><code class='java'>
        points = gs.to_ndarray(points, to_ndim=2)
        einsum_str = &quotn,nj-&gt;j&quot
    if point_type == &quotmatrix&quot:
        <a id="change">points = gs.to_ndarray(points, to_ndim=3)</a>
        einsum_str = &quotn,nij-&gt;ij&quot
    n_points = gs.shape(points)[0]

    if weights is None:
        weights = gs.ones((n_points,))

    mean = points[0]

    if n_points == 1:
        return mean

    sum_weights = gs.sum(weights)
    sq_dists_between_iterates = []
    iteration = 0
    sq_dist = 0.
    var = 0.

    while iteration &lt; max_iter:
        <a id="change">print(var)</a>
        <a id="change">print(sq_dist)</a>
        <a id="change">var_is_0 = gs.isclose(var, 0.)</a>
        sq_dist_is_small = <a id="change">gs.less_equal(sq_dist, epsilon * var)</a>
        <a id="change">condition = ~gs.logical_or(var_is_0, sq_dist_is_small)</a>
        if not (condition or iteration == 0):
            break
        logs = metric.log(point=points, base_point=mean)
</code></pre><img src="216687390.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 14</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/geomstats/geomstats/commit/0c9b9ac2bba3a52e5175a24c217b1f3ab8581e08#diff-5df749dabe77d629fec94642d8df951dd7b86fc238f1fcd5928b7e0743f58552L88' target='_blank'>Link</a></div><div id='project'> Project Name: geomstats/geomstats</div><div id='commit'> Commit Name: 0c9b9ac2bba3a52e5175a24c217b1f3ab8581e08</div><div id='time'> Time: 2020-04-17</div><div id='author'> Author: ninamio78@gmail.com</div><div id='file'> File Name: geomstats/learning/frechet_mean.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: _default_gradient_descent</div><BR><BR><div id='link'><a href='https://github.com/geomstats/geomstats/commit/cfcc08085ddd20f6b6c9244960f004509eab4d4c#diff-5df749dabe77d629fec94642d8df951dd7b86fc238f1fcd5928b7e0743f58552L88' target='_blank'>Link</a></div><div id='project'> Project Name: geomstats/geomstats</div><div id='commit'> Commit Name: cfcc08085ddd20f6b6c9244960f004509eab4d4c</div><div id='time'> Time: 2020-04-16</div><div id='author'> Author: ninamio78@gmail.com</div><div id='file'> File Name: geomstats/learning/frechet_mean.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: _default_gradient_descent</div><BR><BR><div id='link'><a href='https://github.com/geomstats/geomstats/commit/fa0845c7e95bb8fcbe00821b51ba95d40ab21a5b#diff-5df749dabe77d629fec94642d8df951dd7b86fc238f1fcd5928b7e0743f58552L92' target='_blank'>Link</a></div><div id='project'> Project Name: geomstats/geomstats</div><div id='commit'> Commit Name: fa0845c7e95bb8fcbe00821b51ba95d40ab21a5b</div><div id='time'> Time: 2020-04-17</div><div id='author'> Author: ninamio78@gmail.com</div><div id='file'> File Name: geomstats/learning/frechet_mean.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: _default_gradient_descent</div><BR>