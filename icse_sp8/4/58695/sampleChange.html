<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    &#47&#47 Pad left and top of Integral image with zeros
    I = np.vstack((np.zeros((1, I.shape[1]), I.dtype), I))
    <a id="change">I = np.hstack((np.zeros((I.shape[0], 1), I.dtype), I))</a>

    kern = np.zeros((w + 1, w + 1))
    kern[0, 0], kern[-1, -1] = 1, 1
    kern[[0, -1], [-1, 0]] = -1</code></pre><h3>After Change</h3><pre><code class='java'>
    g = image.astype(np.float)
    sum_g2 = ndi.convolve(g ** 2., np.ones((w, w)), mode=&quotconstant&quot)
    sum_m2 = w2 * m ** 2.
    s = <a id="change">np.sqrt((sum_g2 - sum_m2) / w2)</a>
    return m, s


def threshold_niblack(image, window_size=15, k=0.2):</code></pre>