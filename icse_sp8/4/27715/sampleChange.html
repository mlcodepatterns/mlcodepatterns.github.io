<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    score = gf*query
    score = score.sum(1)
    &#47&#47 predict index
    <a id="change">s</a>, index = score.sort(dim=0, descending=True)
    index = index[0:2000]
    &#47&#47print(index[0:5])
    &#47&#47 good index</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47index = index[0:2000]
    &#47&#47 good index
    query_index = np.argwhere(gl==ql)
    camera_index = <a id="change">np.argwhere(gc==qc)

   </a> good_index = np.setdiff1d(query_index, camera_index, assume_unique=True)
    junk_index1 = np.argwhere(gl==-2)
    junk_index2 = np.intersect1d(query_index, camera_index)
    <a id="change">junk_index = np.append(junk_index2, junk_index1)</a> &#47&#47.flatten())
    
    CMC_tmp = compute_mAP(index, good_index, junk_index)
    return CMC_tmp</code></pre>