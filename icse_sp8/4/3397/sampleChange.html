<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            &#47&#47 recreated. The processor job that recreated that job has
            &#47&#47 abort=True
            logger.info("Downloader Jobs finished, waiting for processor Jobs to complete.")
            processor_jobs = <a id="change">ProcessorJob.objects.all().exclude(abort=True)</a> &#47&#47 exclude aborted jobs
            for processor_job in processor_jobs:
                processor_job = wait_for_job(processor_job, ProcessorJob, start_time)
                self.assertTrue(processor_job.success)</code></pre><h3>After Change</h3><pre><code class='java'>
                )

                start_time = timezone.now()
                <a id="change">with self.assertRaises(ProcessorJob.DoesNotExist):
                    wait_for_job(doomed_processor_job, ProcessorJob, start_time)

            &#47&#47 The processor job that had a missing file will have
            &#47&#47 recreated its DownloaderJob, which means there should
            &#47&#47 now be SAMPLES_IN_EXPERIMENT + 1 downloader jobs.
           </a> downloader_jobs = DownloaderJob.objects.all().order_by(&quot-id&quot)
            self.assertEqual(downloader_jobs.count(), SAMPLES_IN_EXPERIMENT + 1)

            &#47&#47 However DownloaderJobs don&quott get queued immediately, so</code></pre>