<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    source_texts, target_texts = create_dataset(config.train_path, None)
    source_seq, source_word2id = tokenize(source_texts, config.maxlen)
    target_seq, target_word2id = tokenize(target_texts, config.maxlen)
    dataset = tf.data.Dataset.from_tensor_slices(<a id="change">(source_seq, target_seq)</a>).shuffle(len(source_seq))
    dataset = dataset.batch(config.batch_size, drop_remainder=True)
    example_source_batch, example_target_batch = next(iter(dataset))
    model = Seq2SeqModel(example_source_batch, source_word2id, target_word2id, embedding_dim=config.embedding_dim,</code></pre><h3>After Change</h3><pre><code class='java'>
        &quot会能够大幅减少互相抱怨的情况。&quot
    ]
    source_word2id = load_word_dict(config.save_src_vocab_path)
    <a id="change">target_word2id = load_word_dict(config.save_trg_vocab_path)</a>
    model = Seq2SeqModel(source_word2id, target_word2id, embedding_dim=config.embedding_dim,
                         hidden_dim=config.hidden_dim,
                         batch_size=config.batch_size, maxlen=config.maxlen, checkpoint_path=config.model_dir,
                         gpu_id=config.gpu_id)</code></pre>