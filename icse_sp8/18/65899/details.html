<html><h3>9223931ed397589ce58178461634313012e16e60,nilearn/mass_univariate/tests/test_permuted_least_squares.py,,test_permuted_ols_intercept_statsmodels_withcovar_multivariate,#Any#,333
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            target_vars[:, i], np.hstack((tested_var, confounding_vars)))
        fvals[i] = ols.fit().f_test(test_matrix).fvalue[0][0]
    &#47&#47 permuted OLS (sparsity_threshold=1. to get all values)
    _, all_scores, _, _ = <a id="change">permuted_ols(
        tested_var, target_vars.T, confounding_vars, n_perm=0,
        sparsity_threshold=1., n_jobs=1)</a>
    &#47&#47 same thing but with model_intercept=True to check it has no effect
    _, all_scores_addintercept, _, _ = <a id="change">permuted_ols(
        tested_var, target_vars.T, confounding_vars, model_intercept=True,
        n_perm=0, sparsity_threshold=1., n_jobs=1)</a>
    assert_almost_equal(fvals, all_scores[&quotscore&quot], decimal=6)
    assert_array_almost_equal(all_scores[&quotscore&quot],
                              all_scores_addintercept[&quotscore&quot], decimal=6)
</code></pre><h3>After Change</h3><pre><code class='java'>
    n_targets = 10
    n_covars = 2
    &#47&#47 create design
    <a id="change">target_vars</a> = rng.randn(n_samples, n_targets)
    tested_var = np.ones((n_samples, 1))
    confounding_vars = rng.randn(n_samples, n_covars)
    &#47&#47 statsmodels OLS
    fvals = np.empty(n_targets)
    test_matrix = np.array([[1.] + [0.] * n_covars])
    for i in range(n_targets):
        ols = OLS(
            target_vars[:, i], np.hstack((tested_var, confounding_vars)))
        fvals[i] = ols.fit().f_test(test_matrix).fvalue[0][0]
    &#47&#47 permuted OLS (sparsity_threshold=1. to get all values)
    _, all_scores, _, _ = <a id="change">permuted_ols(
        tested_var, target_vars, confounding_vars, n_perm=0,
        sparsity_threshold=1.)</a>
    &#47&#47 same thing but with model_intercept=True to check it has no effect
    _, all_scores_addintercept, _, _ = <a id="change">permuted_ols(
        tested_var, target_vars, confounding_vars, model_intercept=True,
        n_perm=0, sparsity_threshold=1.)</a>
    assert_almost_equal(fvals, all_scores[&quotscore&quot], decimal=6)
    assert_array_almost_equal(all_scores[&quotscore&quot],
                              all_scores_addintercept[&quotscore&quot], decimal=6)
</code></pre><img src="304529079.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/nilearn/nilearn/commit/9223931ed397589ce58178461634313012e16e60#diff-22bb802d7505722191f73e8875324dad50b22a5a2797d2bcc296135849013f36L353' target='_blank'>Link</a></div><div id='project'> Project Name: nilearn/nilearn</div><div id='commit'> Commit Name: 9223931ed397589ce58178461634313012e16e60</div><div id='time'> Time: 2014-02-17</div><div id='author'> Author: virgile.fritsch@gmail.com</div><div id='file'> File Name: nilearn/mass_univariate/tests/test_permuted_least_squares.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: test_permuted_ols_intercept_statsmodels_withcovar_multivariate</div><BR><BR><div id='link'><a href='https://github.com/nilearn/nilearn/commit/9223931ed397589ce58178461634313012e16e60#diff-22bb802d7505722191f73e8875324dad50b22a5a2797d2bcc296135849013f36L255' target='_blank'>Link</a></div><div id='project'> Project Name: nilearn/nilearn</div><div id='commit'> Commit Name: 9223931ed397589ce58178461634313012e16e60</div><div id='time'> Time: 2014-02-17</div><div id='author'> Author: virgile.fritsch@gmail.com</div><div id='file'> File Name: nilearn/mass_univariate/tests/test_permuted_least_squares.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: test_permuted_ols_intercept_sklearn_nocovar</div><BR><BR><div id='link'><a href='https://github.com/nilearn/nilearn/commit/9223931ed397589ce58178461634313012e16e60#diff-22bb802d7505722191f73e8875324dad50b22a5a2797d2bcc296135849013f36L353' target='_blank'>Link</a></div><div id='project'> Project Name: nilearn/nilearn</div><div id='commit'> Commit Name: 9223931ed397589ce58178461634313012e16e60</div><div id='time'> Time: 2014-02-17</div><div id='author'> Author: virgile.fritsch@gmail.com</div><div id='file'> File Name: nilearn/mass_univariate/tests/test_permuted_least_squares.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: test_permuted_ols_intercept_statsmodels_withcovar_multivariate</div><BR><BR><div id='link'><a href='https://github.com/nilearn/nilearn/commit/9223931ed397589ce58178461634313012e16e60#diff-22bb802d7505722191f73e8875324dad50b22a5a2797d2bcc296135849013f36L289' target='_blank'>Link</a></div><div id='project'> Project Name: nilearn/nilearn</div><div id='commit'> Commit Name: 9223931ed397589ce58178461634313012e16e60</div><div id='time'> Time: 2014-02-17</div><div id='author'> Author: virgile.fritsch@gmail.com</div><div id='file'> File Name: nilearn/mass_univariate/tests/test_permuted_least_squares.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: test_permuted_ols_intercept_statsmodels_withcovar</div><BR><BR><div id='link'><a href='https://github.com/nilearn/nilearn/commit/9223931ed397589ce58178461634313012e16e60#diff-22bb802d7505722191f73e8875324dad50b22a5a2797d2bcc296135849013f36L314' target='_blank'>Link</a></div><div id='project'> Project Name: nilearn/nilearn</div><div id='commit'> Commit Name: 9223931ed397589ce58178461634313012e16e60</div><div id='time'> Time: 2014-02-17</div><div id='author'> Author: virgile.fritsch@gmail.com</div><div id='file'> File Name: nilearn/mass_univariate/tests/test_permuted_least_squares.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: test_permuted_ols_intercept_sklearn_nocovar_multivariate</div><BR>