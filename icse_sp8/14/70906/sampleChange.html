<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        GATEWAYS[device] = setup_gateway(
            device, persistence_file, baud_rate, tcp_port)

    <a id="change">for (component, discovery_service) in DISCOVERY_COMPONENTS:
        &#47&#47 Ensure component is loaded
        if not bootstrap.setup_component(hass, component, config):
            return False
        &#47&#47 Fire discovery event
        hass.bus.fire(EVENT_PLATFORM_DISCOVERED, {
            ATTR_SERVICE: discovery_service,
            ATTR_DISCOVERED: {}})

   </a> return True


def pf_callback_factory(map_sv_types, devices, add_devices, entity_class):</code></pre><h3>After Change</h3><pre><code class='java'>
        GATEWAYS[device] = setup_gateway(
            device, persistence_file, baud_rate, tcp_port)

    <a id="change">for component in &quotsensor&quot, &quotswitch&quot, &quotlight&quot, &quotbinary_sensor&quot:
        discovery.load_platform(hass, component, DOMAIN, None, config)

   </a> return True


def pf_callback_factory(map_sv_types, devices, add_devices, entity_class):</code></pre>