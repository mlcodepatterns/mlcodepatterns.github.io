<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        &#47&#47 Eliminate the diagonal
        n_vertices = self._search_graph.shape[0]
        self._search_graph[<a id="change">np.arange(n_vertices)</a>, <a id="change">np.arange(n_vertices)</a>] = 0.0

        self._search_graph.eliminate_zeros()
</code></pre><h3>After Change</h3><pre><code class='java'>
        diversified_data[diversified_data == 0.0] = FLOAT32_EPS

        self._search_graph.row = np.repeat(np.arange(diversified_rows.shape[0], dtype=np.int32), diversified_rows.shape[1])
        self._search_graph.col = <a id="change">diversified_rows.ravel()</a>
        self._search_graph.data = diversified_data.ravel()

        &#47&#47 Get rid of any -1 index entries
        self._search_graph = self._search_graph.tocsr()</code></pre>