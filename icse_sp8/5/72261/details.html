<html><h3>d04ddb6ababa39aa5b3171ec1675b1eee3bf4a40,polyaxon/checks/postgres.py,PostgresCheck,pg_health,#,9
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        with connection.cursor() as cursor:
            cursor.execute(&quotSELECT 1; -- Healthcheck&quot)
            health = cursor.fetchone()[0] == 1
            <a id="change">size = None</a>
            if health:
                cursor.execute("select pg_database_size(&quotpostgres&quot) as size")
                size = cursor.fetchone()
        <a id="change">return health, size</a>

    @classmethod
    def run(cls):
        health, size = cls.pg_health()</code></pre><h3>After Change</h3><pre><code class='java'>
                    cursor.execute("select pg_database_size(&quotpostgres&quot) as size")
                    size = cursor.fetchone()
                    return Result(message=&quotService is healthy, db size {}&quot.format(size))
            <a id="change">return Result(message=&quotService is not working.&quot, severity=Result.WARNING)</a>
        except Exception as e:
            return Result(message=&quotService unable to connect, encountered "{}" error.&quot.format(e),
                          severity=Result.ERROR)
</code></pre><img src="331419680.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/polyaxon/polyaxon/commit/d04ddb6ababa39aa5b3171ec1675b1eee3bf4a40#diff-ad0caba462447079566b5ff7c5a914b7903fba04b9e91de8d8fffeb876ae73aeL10' target='_blank'>Link</a></div><div id='project'> Project Name: polyaxon/polyaxon</div><div id='commit'> Commit Name: d04ddb6ababa39aa5b3171ec1675b1eee3bf4a40</div><div id='time'> Time: 2018-10-05</div><div id='author'> Author: mouradmourafiq@gmail.com</div><div id='file'> File Name: polyaxon/checks/postgres.py</div><div id='class'> Class Name: PostgresCheck</div><div id='method'> Method Name: pg_health</div><BR><BR><div id='link'><a href='https://github.com/Netflix/vmaf/commit/306ed96034372cea725ceaa60e5ee177a7a6ce37#diff-315039274f9444f46992086f17ebcda80c74cad9172d85e0f8cbf5b168848233L200' target='_blank'>Link</a></div><div id='project'> Project Name: Netflix/vmaf</div><div id='commit'> Commit Name: 306ed96034372cea725ceaa60e5ee177a7a6ce37</div><div id='time'> Time: 2016-02-24</div><div id='author'> Author: zli@netflix.com</div><div id='file'> File Name: python/quality_runner.py</div><div id='class'> Class Name: VmaftQualityRunner</div><div id='method'> Method Name: _run_on_asset</div><BR><BR><div id='link'><a href='https://github.com/Netflix/vmaf/commit/306ed96034372cea725ceaa60e5ee177a7a6ce37#diff-315039274f9444f46992086f17ebcda80c74cad9172d85e0f8cbf5b168848233L81' target='_blank'>Link</a></div><div id='project'> Project Name: Netflix/vmaf</div><div id='commit'> Commit Name: 306ed96034372cea725ceaa60e5ee177a7a6ce37</div><div id='time'> Time: 2016-02-24</div><div id='author'> Author: zli@netflix.com</div><div id='file'> File Name: python/quality_runner.py</div><div id='class'> Class Name: VmafQualityRunner</div><div id='method'> Method Name: _run_on_asset</div><BR>