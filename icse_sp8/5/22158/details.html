<html><h3>19058353d1b503bf186552ce971c10be047c8bd1,nilearn/tests/test_cache_mixin.py,,test_cache_shelving,#,184
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>


def test_cache_shelving():
    <a id="change">try:
        temp_dir = tempfile.mkdtemp()
        job_glob = os.path.join(temp_dir, &quotjoblib&quot, &quotnilearn&quot, &quottests&quot,
                                &quottest_cache_mixin&quot, &quotf&quot, &quot*&quot)
        mem = Memory(cachedir=temp_dir, verbose=0)
        res = cache_mixin.cache(f, mem, shelve=True)(2)
        assert_equal(res.get(), 2)
        assert_equal(len(glob.glob(job_glob)), 1)
        res = cache_mixin.cache(f, mem, shelve=True)(2)
        assert_equal(res.get(), 2)
        assert_equal(len(glob.glob(job_glob)), 1)
    finally:
        del mem
        shutil.rmtree(temp_dir, ignore_errors=True)</a>
</code></pre><h3>After Change</h3><pre><code class='java'>


def test_cache_shelving():
    <a id="change">with tempfile.TemporaryDirectory() as temp_dir:
        joblib_dir = Path(
            temp_dir, &quotjoblib&quot, &quotnilearn&quot, &quottests&quot, &quottest_cache_mixin&quot, &quotf&quot)
        mem = Memory(cachedir=temp_dir, verbose=0)
        res = cache_mixin.cache(f, mem, shelve=True)(2)
        assert_equal(res.get(), 2)
        assert_equal(len(_get_subdirs(joblib_dir)), 1)
        res = cache_mixin.cache(f, mem, shelve=True)(2)
        assert_equal(res.get(), 2)
        assert_equal(len(_get_subdirs(joblib_dir)), 1)</a>
</code></pre><img src="118315917.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/nilearn/nilearn/commit/19058353d1b503bf186552ce971c10be047c8bd1#diff-504c0fbf612dfd0b452082cad9a66a1b42a1c5475305e8e215cf09cda9648c81L173' target='_blank'>Link</a></div><div id='project'> Project Name: nilearn/nilearn</div><div id='commit'> Commit Name: 19058353d1b503bf186552ce971c10be047c8bd1</div><div id='time'> Time: 2019-10-14</div><div id='author'> Author: jerome@dockes.org</div><div id='file'> File Name: nilearn/tests/test_cache_mixin.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: test_cache_shelving</div><BR><BR><div id='link'><a href='https://github.com/nilearn/nilearn/commit/19058353d1b503bf186552ce971c10be047c8bd1#diff-504c0fbf612dfd0b452082cad9a66a1b42a1c5475305e8e215cf09cda9648c81L29' target='_blank'>Link</a></div><div id='project'> Project Name: nilearn/nilearn</div><div id='commit'> Commit Name: 19058353d1b503bf186552ce971c10be047c8bd1</div><div id='time'> Time: 2019-10-14</div><div id='author'> Author: jerome@dockes.org</div><div id='file'> File Name: nilearn/tests/test_cache_mixin.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: test_check_memory</div><BR><BR><div id='link'><a href='https://github.com/nilearn/nilearn/commit/19058353d1b503bf186552ce971c10be047c8bd1#diff-504c0fbf612dfd0b452082cad9a66a1b42a1c5475305e8e215cf09cda9648c81L51' target='_blank'>Link</a></div><div id='project'> Project Name: nilearn/nilearn</div><div id='commit'> Commit Name: 19058353d1b503bf186552ce971c10be047c8bd1</div><div id='time'> Time: 2019-10-14</div><div id='author'> Author: jerome@dockes.org</div><div id='file'> File Name: nilearn/tests/test_cache_mixin.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: test__safe_cache_dir_creation</div><BR><BR><div id='link'><a href='https://github.com/nilearn/nilearn/commit/19058353d1b503bf186552ce971c10be047c8bd1#diff-504c0fbf612dfd0b452082cad9a66a1b42a1c5475305e8e215cf09cda9648c81L71' target='_blank'>Link</a></div><div id='project'> Project Name: nilearn/nilearn</div><div id='commit'> Commit Name: 19058353d1b503bf186552ce971c10be047c8bd1</div><div id='time'> Time: 2019-10-14</div><div id='author'> Author: jerome@dockes.org</div><div id='file'> File Name: nilearn/tests/test_cache_mixin.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: test__safe_cache_flush</div><BR>