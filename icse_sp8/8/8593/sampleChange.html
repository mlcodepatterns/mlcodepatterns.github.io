<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        model.save(fname)
        model2 = tfidfmodel.TfidfModel.load(fname, mmap=None)
        self.assertTrue(model.idfs == model2.idfs)
        <a id="change">tstvec = []</a>
        self.assertTrue(np.allclose(model[tstvec], model2[tstvec]))  &#47&#47 try projecting an empty vector
&#47&#47 endclass TestTfidfModel

</code></pre><h3>After Change</h3><pre><code class='java'>
        self.assertTrue(np.allclose(model[[]], model2[[]]))  &#47&#47 try projecting an empty vector

        &#47&#47 Test persistence with using `smartirs`
        <a id="change">fname = get_tmpfile(&quotgensim_models_smartirs.tst.gz&quot)</a>
        <a id="change">model = tfidfmodel.TfidfModel(self.corpus, smartirs="ntc")</a>
        <a id="change">model.save(fname)</a>
        <a id="change">model2 = tfidfmodel.TfidfModel.load(fname, mmap=None)</a>
        self.assertTrue(model.idfs == model2.idfs)
        tstvec = [corpus[1], corpus[2]]
        self.assertTrue(np.allclose(model[tstvec[0]], model2[tstvec[0]]))
        self.assertTrue(np.allclose(model[tstvec[1]], model2[tstvec[1]]))</code></pre>