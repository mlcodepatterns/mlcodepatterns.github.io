<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    def encode(self, input, src_len):
        embed_in_seq = self.embed(input)
        &#47&#47if self.training:
        <a id="change">packed = torch.nn.utils.rnn.pack_padded_sequence(embed_in_seq, src_len.data.tolist())</a>
        output_tbh, hidden = self.encoder_rnn(packed)
        output_tbh, _ = torch.nn.utils.rnn.pad_packed_sequence(output_tbh)
        &#47&#47else:
        &#47&#47    output_tbh, hidden = self.encoder_rnn(embed_in_seq)</code></pre><h3>After Change</h3><pre><code class='java'>
            tensor = tensor[perm_idx]
            example[key] = tensor

            if self.<a id="change">gpu:
            </a>    example[key] = example[key].cuda()

        if &quottgt&quot in batch_dict:
            tgt = torch.from_numpy(batch_dict[&quottgt&quot])</code></pre>