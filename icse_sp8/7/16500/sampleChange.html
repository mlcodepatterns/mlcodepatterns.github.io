<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        ret_diffs = PredictWorker.start(self.transaction.model_data, model_name=model_name)

        model_stats = self.session.mongo.mindsdb.model_train_stats
        <a id="change">model_stat = model_stats.find_one({&quotmodel_name&quot: model_name})</a>
        &#47&#47 confusion_matrixes = model_stat[&quotreduced_confusion_matrices&quot]
        confusion_matrixes = <a id="change">model_stat[&quotconfusion_matrices&quot]</a>

        self.transaction.output_data_array = self.transaction.input_data_array
        for diff in ret_diffs:
            for col in diff[&quotret_dict&quot]:</code></pre><h3>After Change</h3><pre><code class='java'>
                    actual_row = self.transaction.model_data.predict_set_map[group_pointer][j+offset]
                    if not self.transaction.output_data.data_array[actual_row][col_index] or self.transaction.output_data.data_array[actual_row][col_index] == &quot&quot:

                        if <a id="change">self.transaction.persistent_model_metadata.column_stats[col][KEYS.DATA_TYPE]</a> == DATA_TYPES.NUMERIC:
                            target_val = np.format_float_positional(cell, precision=2)
                        else:
                            target_val = cell</code></pre>