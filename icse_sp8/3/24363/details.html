<html><h3>fc2489503f54d6ca607286510540a3ba3acbb98d,tests/storages_tests/rdb_tests/test_storage.py,,test_fail_stale_trials,#,329
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        storage.record_heartbeat(trial._trial_id)
        time.sleep(grace_period + 1)

        t = <a id="change">study.trials[0]</a>
        assert t.state is TrialState.RUNNING

        &#47&#47 Exceptions raised in spawned threads are caught by `_TestableThread`.
        with patch("optuna._optimize.Thread", _TestableThread):</code></pre><h3>After Change</h3><pre><code class='java'>
        storage.heartbeat_interval = heartbeat_interval
        storage.grace_period = grace_period
        study1 = create_study(storage=storage)
        <a id="change">study2 = create_study(storage=storage)</a>

        trial = study1.ask()
        storage.record_heartbeat(trial._trial_id)
        time.sleep(grace_period + 1)</code></pre><img src="127080290.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/pfnet/optuna/commit/fc2489503f54d6ca607286510540a3ba3acbb98d#diff-42166922cf20058a0456b29a4eccb65307689d7aefed170b335539b5e3ed11ebL332' target='_blank'>Link</a></div><div id='project'> Project Name: pfnet/optuna</div><div id='commit'> Commit Name: fc2489503f54d6ca607286510540a3ba3acbb98d</div><div id='time'> Time: 2021-02-08</div><div id='author'> Author: gohome.x105.gn@gmail.com</div><div id='file'> File Name: tests/storages_tests/rdb_tests/test_storage.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: test_fail_stale_trials</div><BR><BR><div id='link'><a href='https://github.com/pfnet/optuna/commit/d3196bee4759550bc2e944a945881013157669ef#diff-1bc9aca8894a345a4581427599ce818271d361f814927e26dfd425b474246bd9L35' target='_blank'>Link</a></div><div id='project'> Project Name: pfnet/optuna</div><div id='commit'> Commit Name: d3196bee4759550bc2e944a945881013157669ef</div><div id='time'> Time: 2020-06-25</div><div id='author'> Author: skripniuk.v@yandex.ru</div><div id='file'> File Name: examples/tensorboard_simple.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: </div><BR><BR><div id='link'><a href='https://github.com/pfnet/optuna/commit/2eca0af3d781ec00cadbbda624218b2a8c508fa8#diff-d4bd9efbd95eea0d1e5e945856370ca28fb15d54755c765d1a15030f91f25ea8L118' target='_blank'>Link</a></div><div id='project'> Project Name: pfnet/optuna</div><div id='commit'> Commit Name: 2eca0af3d781ec00cadbbda624218b2a8c508fa8</div><div id='time'> Time: 2018-08-21</div><div id='author'> Author: toshihiko.yanase@gmail.com</div><div id='file'> File Name: tests/storages_tests/test_storages.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: test_get_study_id_from_name_and_get_study_name_from_id</div><BR>