<html><h3>73b2221b5eb4fd21802e6bf41e21d5df8ef9bf2c,src/sdk/pynni/nni/nas/pytorch/darts/trainer.py,DartsTrainer,_compute_hessian,#DartsTrainer#Any#Any#Any#Any#,119
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        hessian = (dalpha { L_trn(w+, alpha) } - dalpha { L_trn(w-, alpha) }) / (2*eps)
        eps = 0.01 / ||dw||
        
        <a id="change">self.model.load_state_dict(model)</a>

        norm = torch.cat([w.view(-1) for w in dw]).norm()
        eps = 0.01 / norm
</code></pre><h3>After Change</h3><pre><code class='java'>
                for p, d in zip(self.model.parameters(), dw):
                    p += e * d

            <a id="change">_</a>, loss = self._logits_and_loss(trn_X, trn_y)
            dalphas.append(torch.autograd.grad(loss, self.mutator.parameters()))

        dalpha_pos, dalpha_neg = dalphas  &#47&#47 dalpha { L_trn(w+) }, &#47&#47 dalpha { L_trn(w-) }</code></pre><img src="221176591.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/Microsoft/nni/commit/73b2221b5eb4fd21802e6bf41e21d5df8ef9bf2c#diff-84779df28017525536aee1504947b4c9e54367fdb4a11845e8fd916f99b3f2acL119' target='_blank'>Link</a></div><div id='project'> Project Name: Microsoft/nni</div><div id='commit'> Commit Name: 73b2221b5eb4fd21802e6bf41e21d5df8ef9bf2c</div><div id='time'> Time: 2019-11-22</div><div id='author'> Author: v-yugzh@microsoft.com</div><div id='file'> File Name: src/sdk/pynni/nni/nas/pytorch/darts/trainer.py</div><div id='class'> Class Name: DartsTrainer</div><div id='method'> Method Name: _compute_hessian</div><BR><BR><div id='link'><a href='https://github.com/google/uis-rnn/commit/ac1f07e722b1117642774b04d96e7174751e325c#diff-27419e27638ba26c3b055e9daca00840a52779aa0e76b06c6a2a68d128abffb0L38' target='_blank'>Link</a></div><div id='project'> Project Name: google/uis-rnn</div><div id='commit'> Commit Name: ac1f07e722b1117642774b04d96e7174751e325c</div><div id='time'> Time: 2018-10-18</div><div id='author'> Author: aonan@aonan.nyc.corp.google.com</div><div id='file'> File Name: demo.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: diarization_experiment</div><BR><BR><div id='link'><a href='https://github.com/Microsoft/nni/commit/73b2221b5eb4fd21802e6bf41e21d5df8ef9bf2c#diff-84779df28017525536aee1504947b4c9e54367fdb4a11845e8fd916f99b3f2acL43' target='_blank'>Link</a></div><div id='project'> Project Name: Microsoft/nni</div><div id='commit'> Commit Name: 73b2221b5eb4fd21802e6bf41e21d5df8ef9bf2c</div><div id='time'> Time: 2019-11-22</div><div id='author'> Author: v-yugzh@microsoft.com</div><div id='file'> File Name: src/sdk/pynni/nni/nas/pytorch/darts/trainer.py</div><div id='class'> Class Name: DartsTrainer</div><div id='method'> Method Name: train_one_epoch</div><BR><BR><div id='link'><a href='https://github.com/stanfordnlp/stanza/commit/b44d5bf6c87e3b857ca56e7a17c084d486da8d07#diff-d25fd491a24dc42cadfb219d03f392f3aeed4ce9e7c80d671fb05cdcafdb231eL122' target='_blank'>Link</a></div><div id='project'> Project Name: stanfordnlp/stanza</div><div id='commit'> Commit Name: b44d5bf6c87e3b857ca56e7a17c084d486da8d07</div><div id='time'> Time: 2018-10-15</div><div id='author'> Author: zyh@stanford.edu</div><div id='file'> File Name: models/lemma/trainer.py</div><div id='class'> Class Name: Trainer</div><div id='method'> Method Name: load</div><BR>