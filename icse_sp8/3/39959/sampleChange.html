<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

	def forward(self, X):
		&#47&#47 input X is a 4D tensor
		<a id="change">assert(X.dim()==4, "Encoding Layer requries 4D featuremaps!")</a>
		assert(X.size(1)==self.D,"Encoding Layer incompatible input channels!")
		B, N, K, D = X.size(0), X.size(2)*X.size(3), self.K, self.D
		&#47&#47 reshape input
		X = X.view(B,D,-1).transpose(1,2)</code></pre><h3>After Change</h3><pre><code class='java'>
		E = aggregate()(A, R)

		if unpacked:
			<a id="change">E = E.squeeze(0)</a>
		return E

	def __repr__(self):
		return self.__class__.__name__ + &quot(&quot \</code></pre>