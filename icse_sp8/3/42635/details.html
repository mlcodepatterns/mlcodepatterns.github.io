<html><h3>e88456edf02f285c13dd162f195e1e368f836789,jobs/guess_indicators_daily_job.py,,apply_guess,#Any#Any#,223
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            stock_data_list.append(tmp_val)

    &#47&#47 print(stock_data_list)
    return <a id="change">list(stock_data_list)</a>


&#47&#47 print(stock["mov_vol"].tail())
&#47&#47 print(stock["return"].tail())</code></pre><h3>After Change</h3><pre><code class='java'>
    stock = common.get_hist_data_cache(code, date_start, date_end)
    &#47&#47 设置返回数组。
    stock_data_list = []
    stock_name_list = <a id="change">[]</a>
    &#47&#47 增加空判断，如果是空返回 0 数据。
    if stock is None:
        for col in stock_column:
            if col == &quotdate&quot:
                stock_data_list.append(date)
                stock_name_list.append(&quotdate&quot)
            elif col == &quotcode&quot:
                stock_data_list.append(code)
                stock_name_list.append(&quotcode&quot)
            else:
                stock_data_list.append(0)
                stock_name_list.append(col)
        return pd.Series(stock_data_list, index=stock_name_list)

    &#47&#47 print(stock.head())
    &#47&#47 open  high  close   low     volume
    &#47&#47 stock = pd.DataFrame({"close": stock["close"]}, index=stock.index.values)
    stock = stock.sort_index(0)  &#47&#47 将数据按照日期排序下。

    stock["date"] = stock.index.values  &#47&#47 增加日期列。
    stock = stock.sort_index(0)  &#47&#47 将数据按照日期排序下。
    &#47&#47 print(stock) [186 rows x 14 columns]
    &#47&#47 初始化统计类
    &#47&#47 stockStat = stockstats.StockDataFrame.retype(pd.read_csv(&quot002032.csv&quot))
    stockStat = stockstats.StockDataFrame.retype(stock)

    print("&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47 print result &#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47")
    for col in stock_column:
        if col == &quotdate&quot:
            stock_data_list.append(date)
            stock_name_list.append(&quotdate&quot)
        elif col == &quotcode&quot:
            stock_data_list.append(code)
            stock_name_list.append(&quotcode&quot)
        else:
            &#47&#47 将数据的最后一个返回。
            tmp_val = stockStat[col].tail(1).values[0]
            if np.isinf(tmp_val):  &#47&#47 解决值中存在INF问题。
                tmp_val = 0
            if np.isnan(tmp_val):  &#47&#47 解决值中存在NaN问题。
                tmp_val = 0
            &#47&#47 print("col name : ", col, tmp_val)
            stock_data_list.append(tmp_val)
            stock_name_list.append(col)
    &#47&#47 print(stock_data_list)
    return <a id="change">pd.Series(stock_data_list, index=stock_name_list)</a>


&#47&#47 print(stock["mov_vol"].tail())
&#47&#47 print(stock["return"].tail())</code></pre><img src="200480407.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/pythonstock/stock/commit/e88456edf02f285c13dd162f195e1e368f836789#diff-01917d51d42192de5de9a1eb9345448f6f3a19beb8ba7147c1f2edbb19c11d54L236' target='_blank'>Link</a></div><div id='project'> Project Name: pythonstock/stock</div><div id='commit'> Commit Name: e88456edf02f285c13dd162f195e1e368f836789</div><div id='time'> Time: 2018-08-16</div><div id='author'> Author: yhy363@yhy363.com</div><div id='file'> File Name: jobs/guess_indicators_daily_job.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: apply_guess</div><BR><BR><div id='link'><a href='https://github.com/scikit-learn-contrib/categorical-encoding/commit/b5034279b48ae96ffdd4714f96e0f62b0f4807fc#diff-ec89fc16a024e906dde0693b4d8cbc46e946c810a1e9e45c4d8f214b87ba6af9L246' target='_blank'>Link</a></div><div id='project'> Project Name: scikit-learn-contrib/categorical-encoding</div><div id='commit'> Commit Name: b5034279b48ae96ffdd4714f96e0f62b0f4807fc</div><div id='time'> Time: 2018-10-26</div><div id='author'> Author: jcastaldo08@gmail.com</div><div id='file'> File Name: category_encoders/ordinal.py</div><div id='class'> Class Name: OrdinalEncoder</div><div id='method'> Method Name: ordinal_encoding</div><BR><BR><div id='link'><a href='https://github.com/pythonstock/stock/commit/e88456edf02f285c13dd162f195e1e368f836789#diff-ee95a22beed0390e9a08db2d27d9fda075f8aca8a42db35af5f8eaf4df9f4dccL78' target='_blank'>Link</a></div><div id='project'> Project Name: pythonstock/stock</div><div id='commit'> Commit Name: e88456edf02f285c13dd162f195e1e368f836789</div><div id='time'> Time: 2018-08-16</div><div id='author'> Author: yhy363@yhy363.com</div><div id='file'> File Name: jobs/guess_period_daily_job.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: apply_guess</div><BR><BR><div id='link'><a href='https://github.com/pythonstock/stock/commit/e88456edf02f285c13dd162f195e1e368f836789#diff-9bc9c563dd77e668b10414ff018d8f45c3e579b4e95ec780fdb03a8231defca0L92' target='_blank'>Link</a></div><div id='project'> Project Name: pythonstock/stock</div><div id='commit'> Commit Name: e88456edf02f285c13dd162f195e1e368f836789</div><div id='time'> Time: 2018-08-16</div><div id='author'> Author: yhy363@yhy363.com</div><div id='file'> File Name: jobs/guess_return_daily_job.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: apply_guess</div><BR>