<html><h3>e0cbe102023b194746a4102d6a193c713cd74944,quotekiosk.py,AutoSizerWindow,draw_text,#AutoSizerWindow#,140
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        fontsize = 100

        <a id="change">while fontsize:
            font = f"{self.fontname} {fontsize}"
            desc = Pango.font_description_from_string(font)
            layout.set_font_description(desc)
            pxsize = layout.get_pixel_size()
            if pxsize.width &lt; self.width - self.border_size*2 and \
               pxsize.height &lt; self.height - self.border_size*2:
                break
            fontsize -= 1

       </a> ctx.move_to(self.border_size, self.border_size)
        PangoCairo.show_layout(ctx, layout)

    def read_pixbuf(self, filename):</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 Set color and alpha
        ctx.set_source_rgba(*self.text_color, self.alpha)

        <a id="change">if not self.layout: &#47&#47 or not self.d_alpha or self.alpha == 0:
            &#47&#47 print("Laying out text")
            self.layout = PangoCairo.create_layout(ctx)
            self.layout.set_text(self.content, -1)

            &#47&#47 For some reason pango width has to be 1024 times the width.
            &#47&#47 Why? Where does this 1024 come from?
            &#47&#47 No one explains this anywhere.
            self.layout.set_width(1024 * (self.width - self.border_size*2))
            self.layout.set_wrap(Pango.WrapMode.WORD_CHAR)

            fontsize = 100

            while fontsize:
                font = f"{self.fontname} {fontsize}"
                desc = Pango.font_description_from_string(font)
                self.layout.set_font_description(desc)
                pxsize = self.layout.get_pixel_size()
                if pxsize.width &lt; self.width - self.border_size*2 and \
                   pxsize.height &lt; self.height - self.border_size*2:
                    break
                fontsize -= 1

       </a> ctx.move_to(self.border_size, self.border_size)

        PangoCairo.show_layout(ctx, self.layout)
</code></pre><img src="11650181.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/akkana/scripts/commit/e0cbe102023b194746a4102d6a193c713cd74944#diff-12e66bed89b90884cd10502ad5ddf2cd421ad38f8bf95b43e5935becdcd0a906L149' target='_blank'>Link</a></div><div id='project'> Project Name: akkana/scripts</div><div id='commit'> Commit Name: e0cbe102023b194746a4102d6a193c713cd74944</div><div id='time'> Time: 2020-01-17</div><div id='author'> Author: akkana@shallowsky.com</div><div id='file'> File Name: quotekiosk.py</div><div id='class'> Class Name: AutoSizerWindow</div><div id='method'> Method Name: draw_text</div><BR><BR><div id='link'><a href='https://github.com/WheatonCS/Lexos/commit/859ea294b86b621dba43e43a0bf50f3e39244708#diff-9c92673461998fae512ef8d98336f95d0e6e672e76ccdd348ca82b3481bd90c0L42' target='_blank'>Link</a></div><div id='project'> Project Name: WheatonCS/Lexos</div><div id='commit'> Commit Name: 859ea294b86b621dba43e43a0bf50f3e39244708</div><div id='time'> Time: 2015-06-02</div><div id='author'> Author: jingxian.liu@gmail.com</div><div id='file'> File Name: prepare/cutter.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: stripLeadingWhiteSpace</div><BR><BR><div id='link'><a href='https://github.com/WheatonCS/Lexos/commit/043728e6cf16fb5880976655c83bb0cfa8a3145a#diff-85c85d1130a250ce4a33ac994e2a79734d48d7ec259be97adfaf2f38b9996b3aL55' target='_blank'>Link</a></div><div id='project'> Project Name: WheatonCS/Lexos</div><div id='commit'> Commit Name: 043728e6cf16fb5880976655c83bb0cfa8a3145a</div><div id='time'> Time: 2017-08-01</div><div id='author'> Author: darias0826@gmail.com</div><div id='file'> File Name: lexos/processors/prepare/cutter.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: strip_leading_blank_lines</div><BR>