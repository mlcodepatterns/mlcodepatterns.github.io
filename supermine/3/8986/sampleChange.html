<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        
        &#47&#47-- Calculate the instantaneous frequency 
        &#47&#47 phase of differential spectrum
        d_frame = <a id="change">fft.fft(fft.fftshift(d_window * y[sample:(sample + n_fft)])).conj()</a>

        t       = d_frame - 1.j * freq_angular * frame 

        &#47&#47 Compute power per bin</code></pre><h3>After Change</h3><pre><code class='java'>

        t = freq_angular + (d_frame * frame).imag / power

        if_gram[:, i] = <a id="change">t[:if_gram.shape[0]]</a> * sr / (2 * np.pi)

    &#47&#47 Compensate for windowing effects, store STFT
    &#47&#47 sum(window) takes out integration due to window, 2 compensates for negative</code></pre>