<html><h3>1624bfcb02cd3e946552490ab18130678aa433b1,paysage/models/model.py,Model,grad_TAP_free_energy,#Model#,705
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        

        &#47&#47 compute the TAP approximation to the Helmholtz free energy:
        <a id="change">grad_EMF = gu.zero_grad(self)</a>

        &#47&#47 compute minimizing magnetizations from random initializations
        <a id="change">for s in range(num_r):
            mag, EMF = self.TAP_free_energy(None,
                                            init_lr_EMF,
                                            tolerance_EMF,
                                            max_iters_EMF)
            &#47&#47 Compute the gradients at this minimizing magnetization
            grad_gfe = self._grad_gibbs_free_energy(mag)
            gu.grad_mapzip_(be.add_, grad_gfe, grad_EMF)

        &#47&#47 average
       </a> <a id="change">scale = partial(be.tmul_, be.float_scalar(1/num_r))</a>
        <a id="change">gu.grad_apply_(scale, grad_EMF)</a>

        <a id="change">return grad_EMF</a>

    def save(self, store: pandas.HDFStore) -&gt; None:
        
        Save a model to an open HDFStore.</code></pre><h3>After Change</h3><pre><code class='java'>
                                          max_iters_EMF)

        &#47&#47 Return the gradients at this minimizing magnetization
        <a id="change">return self._grad_gibbs_free_energy(mag)</a>

    def save(self, store: pandas.HDFStore) -&gt; None:
        
        Save a model to an open HDFStore.</code></pre><img src="39671439.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 20</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/drckf/paysage/commit/1624bfcb02cd3e946552490ab18130678aa433b1#diff-508e96a846eb415c5c4b46e10ed08092f1bfc7da99a32edd572cb5b54e81261dL705' target='_blank'>Link</a></div><div id='project'> Project Name: drckf/paysage</div><div id='commit'> Commit Name: 1624bfcb02cd3e946552490ab18130678aa433b1</div><div id='time'> Time: 2017-05-18</div><div id='author'> Author: geminatea@gmail.com</div><div id='file'> File Name: paysage/models/model.py</div><div id='class'> Class Name: Model</div><div id='method'> Method Name: grad_TAP_free_energy</div><BR><BR><div id='link'><a href='https://github.com/drckf/paysage/commit/93418122381378d6a812287e6507ed1889fecda8#diff-508e96a846eb415c5c4b46e10ed08092f1bfc7da99a32edd572cb5b54e81261dL705' target='_blank'>Link</a></div><div id='project'> Project Name: drckf/paysage</div><div id='commit'> Commit Name: 93418122381378d6a812287e6507ed1889fecda8</div><div id='time'> Time: 2017-05-18</div><div id='author'> Author: geminatea@gmail.com</div><div id='file'> File Name: paysage/models/model.py</div><div id='class'> Class Name: Model</div><div id='method'> Method Name: grad_TAP_free_energy</div><BR><BR><div id='link'><a href='https://github.com/drckf/paysage/commit/81933a874f108043a25f6980334f7242147ddf59#diff-508e96a846eb415c5c4b46e10ed08092f1bfc7da99a32edd572cb5b54e81261dL704' target='_blank'>Link</a></div><div id='project'> Project Name: drckf/paysage</div><div id='commit'> Commit Name: 81933a874f108043a25f6980334f7242147ddf59</div><div id='time'> Time: 2017-05-18</div><div id='author'> Author: charleskennethfisher@gmail.com</div><div id='file'> File Name: paysage/models/model.py</div><div id='class'> Class Name: Model</div><div id='method'> Method Name: grad_TAP_free_energy</div><BR>