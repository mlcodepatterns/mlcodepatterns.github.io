<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    def test_api_get_error_log(self):
        Test the return of the error log.
        <a id="change">test_content = &quotTest StringÂ°&quot</a>
        with tempfile.NamedTemporaryFile() as log:
            log.write(<a id="change">test_content.encode(&quotutf-8&quot)</a>)
            log.flush()

            with patch.object(hass.config, &quotpath&quot, return_value=log.name):</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 support the buffer API&quot), but wsgiserver requires byte types
        &#47&#47 (&quotWSGI Applications must yield bytes&quot). So just mock our own
        &#47&#47 read method.
        <a id="change">m_open = Mock(return_value=Mock(
            read=Mock(side_effect=[test_string]))
        )</a>
        with patch(&quothomeassistant.components.http.open&quot, m_open, create=True):
            req = requests.get(_url(const.URL_API_ERROR_LOG),
                               headers=HA_HEADERS)
            self.assertEqual(test_string, req.text.encode(&quotUTF-8&quot))</code></pre>