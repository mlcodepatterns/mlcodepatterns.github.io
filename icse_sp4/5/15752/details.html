<html><h3>6a4355999fd3af41fbb2215a9f207195caafc546,chainercv/links/model/ssd/multibox_loss.py,,_hard_negative,#Any#Any#Any#,18
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>


def _hard_negative(x, positive, k):
    <a id="change">xp = chainer.cuda.get_array_module(x, positive)</a>
    <a id="change">x = chainer.cuda.to_cpu(x)</a>
    positive = chainer.cuda.to_cpu(positive)
    rank = (x * (positive - 1)).argsort(axis=1).argsort(axis=1)
    hard_negative = rank &lt; (positive.sum(axis=1) * k)[:, np.newaxis]
    <a id="change">return xp.array(hard_negative)</a>


def multibox_loss(mb_locs, mb_confs, gt_mb_locs, gt_mb_labels, k):
    Computes multibox losses.</code></pre><h3>After Change</h3><pre><code class='java'>
def _hard_negative(x, positive, k):
    rank = (x * (positive - 1)).argsort(axis=1).argsort(axis=1)
    hard_negative = rank &lt; (positive.sum(axis=1) * k)[:, np.newaxis]
    <a id="change">return hard_negative</a>


def multibox_loss(mb_locs, mb_confs, gt_mb_locs, gt_mb_labels, k):
    Computes multibox losses.</code></pre><img src="91751224.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/chainer/chainercv/commit/6a4355999fd3af41fbb2215a9f207195caafc546#diff-09fc91e91c365761455686990119a8e02ff2887804234c79d3e8059031c10b6aL19' target='_blank'>Link</a></div><div id='project'> Project Name: chainer/chainercv</div><div id='commit'> Commit Name: 6a4355999fd3af41fbb2215a9f207195caafc546</div><div id='time'> Time: 2017-10-06</div><div id='author'> Author: Hakuyume@users.noreply.github.com</div><div id='file'> File Name: chainercv/links/model/ssd/multibox_loss.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: _hard_negative</div><BR><BR><div id='link'><a href='https://github.com/explosion/thinc/commit/cc8d7ba5562cb2335d975b67e88a81a6bc9b0f46#diff-321a7efb4c6e7aabc58cc89bf75590db0bd4536ad538ba9ecba3caf5d967530fL9' target='_blank'>Link</a></div><div id='project'> Project Name: explosion/thinc</div><div id='commit'> Commit Name: cc8d7ba5562cb2335d975b67e88a81a6bc9b0f46</div><div id='time'> Time: 2020-01-12</div><div id='author'> Author: honnibal+gh@gmail.com</div><div id='file'> File Name: thinc/loss.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: categorical_crossentropy</div><BR><BR><div id='link'><a href='https://github.com/chainer/chainerrl/commit/c23fa1d1def2202c2508247eef2b8b83aedbe54b#diff-2e64e885a35ae8cf60369e92e73a096c9a278e0992200c1d889407992d2e633fL129' target='_blank'>Link</a></div><div id='project'> Project Name: chainer/chainerrl</div><div id='commit'> Commit Name: c23fa1d1def2202c2508247eef2b8b83aedbe54b</div><div id='time'> Time: 2016-08-25</div><div id='author'> Author: muupan@gmail.com</div><div id='file'> File Name: agents/dqn.py</div><div id='class'> Class Name: DQN</div><div id='method'> Method Name: _batch_states</div><BR>