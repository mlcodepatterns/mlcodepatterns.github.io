<html><h3>dad75ba3efc4fb3e244288f99ed09d1d125c49cf,baseline/tf/embeddings.py,,_mean_pool,#Any#Any#,317
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>


def _mean_pool(_, embeddings):
    <a id="change">return tf.reduce_mean(embeddings, 1, False)</a>


def _max_pool(_, embeddings):
    return tf.reduce_max(embeddings, 1, False)</code></pre><h3>After Change</h3><pre><code class='java'>


def _mean_pool(inputs, embeddings):
    mask = <a id="change">tf.not_equal(inputs, 0)</a>
    seq_lengths = tf.reduce_sum(<a id="change">tf.cast(mask, tf.int8)</a>, axis=1, keepdims=True)
    embeddings = tf.where(tf.expand_dims(mask, -1), embeddings, 0.)
    <a id="change">return tf.reduce_sum(embeddings, 1, False) / tf.cast(seq_lengths, embeddings.dtype)</a>


def _max_pool(inputs, embeddings):
    mask = tf.not_equal(inputs, 0)</code></pre><img src="226834445.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/dpressel/mead-baseline/commit/dad75ba3efc4fb3e244288f99ed09d1d125c49cf#diff-bdc9876a97022bf0a6b440506068d63f330d93973851a20f3db95026f0475964L318' target='_blank'>Link</a></div><div id='project'> Project Name: dpressel/mead-baseline</div><div id='commit'> Commit Name: dad75ba3efc4fb3e244288f99ed09d1d125c49cf</div><div id='time'> Time: 2020-05-01</div><div id='author'> Author: wliu@interactions.com</div><div id='file'> File Name: baseline/tf/embeddings.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: _mean_pool</div><BR><BR><div id='link'><a href='https://github.com/tensorflow/benchmarks/commit/237d138e6af68e7aed794c4797f07eab2fad4261#diff-31b842b0b3051023dbaefc9948e341e51dfd1496d58886b9fba8da320f27f2feL250' target='_blank'>Link</a></div><div id='project'> Project Name: tensorflow/benchmarks</div><div id='commit'> Commit Name: 237d138e6af68e7aed794c4797f07eab2fad4261</div><div id='time'> Time: 2018-10-01</div><div id='author'> Author: haoyuzhang@google.com</div><div id='file'> File Name: scripts/tf_cnn_benchmarks/ssd_dataloader.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: encode_labels</div><BR><BR><div id='link'><a href='https://github.com/tensorflow/mesh/commit/a8df7240f9174e03651e7fbd1ea52006f07a46a1#diff-564c3002be0a188d2ec73c626f4303cde207e56f67c994c8f03db6fa26943797L483' target='_blank'>Link</a></div><div id='project'> Project Name: tensorflow/mesh</div><div id='commit'> Commit Name: a8df7240f9174e03651e7fbd1ea52006f07a46a1</div><div id='time'> Time: 2020-04-21</div><div id='author'> Author: noam@google.com</div><div id='file'> File Name: mesh_tensorflow/transformer/transformer.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: sublayer_mask_padding</div><BR><BR><div id='link'><a href='https://github.com/dpressel/mead-baseline/commit/dad75ba3efc4fb3e244288f99ed09d1d125c49cf#diff-bdc9876a97022bf0a6b440506068d63f330d93973851a20f3db95026f0475964L318' target='_blank'>Link</a></div><div id='project'> Project Name: dpressel/mead-baseline</div><div id='commit'> Commit Name: dad75ba3efc4fb3e244288f99ed09d1d125c49cf</div><div id='time'> Time: 2020-05-01</div><div id='author'> Author: wliu@interactions.com</div><div id='file'> File Name: baseline/tf/embeddings.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: _mean_pool</div><BR>