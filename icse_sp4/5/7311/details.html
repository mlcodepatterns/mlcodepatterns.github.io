<html><h3>4ee4c9129a0006abc2e475bb63039d2bdb97153f,python/magent/builtin/mx_model/a2c.py,AdvantageActorCritic,infer_action,#AdvantageActorCritic#Any#Any#Any#Any#,108
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        n = len(view)

        ret = np.empty(n, dtype=np.int32)
        <a id="change">with self.ctx:
            self._reset_bind_size(n)
            data_batch = mx.io.DataBatch(data=[mx.nd.array(view), mx.nd.array(feature)])
            self.model.forward(data_batch, is_train=False)
            policy = self.model.get_outputs()[3].asnumpy()

            actions = np.arange(self.num_actions)
            for i in range(n):
                ret[i] = np.random.choice(actions, p=policy[i])
       </a> return ret

    def train(self, sample_buffer, print_every=1000):
        &#47&#47 calc buffer size</code></pre><h3>After Change</h3><pre><code class='java'>
        n = len(view)

        ret = np.empty(n, dtype=np.int32)
        <a id="change">self._reset_bind_size(n)</a>
        data_batch = mx.io.DataBatch(data=[mx.nd.array(view), mx.nd.array(feature)])
        self.model.forward(data_batch, is_train=False)
        policy = self.model.get_outputs()[3].asnumpy()
</code></pre><img src="44919793.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/geek-ai/MAgent/commit/4ee4c9129a0006abc2e475bb63039d2bdb97153f#diff-a1e6e32defe112e95a0fe07e6feb12113caef83501e12bd891aca6d8add0a868L108' target='_blank'>Link</a></div><div id='project'> Project Name: geek-ai/MAgent</div><div id='commit'> Commit Name: 4ee4c9129a0006abc2e475bb63039d2bdb97153f</div><div id='time'> Time: 2017-11-24</div><div id='author'> Author: zhenglianmin96@163.com</div><div id='file'> File Name: python/magent/builtin/mx_model/a2c.py</div><div id='class'> Class Name: AdvantageActorCritic</div><div id='method'> Method Name: infer_action</div><BR><BR><div id='link'><a href='https://github.com/geek-ai/MAgent/commit/4ee4c9129a0006abc2e475bb63039d2bdb97153f#diff-a1e6e32defe112e95a0fe07e6feb12113caef83501e12bd891aca6d8add0a868L124' target='_blank'>Link</a></div><div id='project'> Project Name: geek-ai/MAgent</div><div id='commit'> Commit Name: 4ee4c9129a0006abc2e475bb63039d2bdb97153f</div><div id='time'> Time: 2017-11-24</div><div id='author'> Author: zhenglianmin96@163.com</div><div id='file'> File Name: python/magent/builtin/mx_model/a2c.py</div><div id='class'> Class Name: AdvantageActorCritic</div><div id='method'> Method Name: train</div><BR><BR><div id='link'><a href='https://github.com/geek-ai/MAgent/commit/d15a15df582f43d9bc65a434db0d64c9e276b724#diff-bd772243ff816f61275864476a2bd3176dd7183846a3dcae9c9cdd19203758f2L205' target='_blank'>Link</a></div><div id='project'> Project Name: geek-ai/MAgent</div><div id='commit'> Commit Name: d15a15df582f43d9bc65a434db0d64c9e276b724</div><div id='time'> Time: 2017-11-23</div><div id='author'> Author: zhenglianmin96@163.com</div><div id='file'> File Name: python/magent/builtin/mx_model/dqn.py</div><div id='class'> Class Name: DeepQNetwork</div><div id='method'> Method Name: train</div><BR>