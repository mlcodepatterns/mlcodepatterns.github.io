<html><h3>5fc4c351699c9007a727eaaef99413962cf0818f,official/nlp/modeling/layers/self_attention_mask.py,SelfAttentionMask,call,#SelfAttentionMask#Any#,33
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    to_shape = tf_utils.get_shape_list(to_mask, expected_rank=2)
    to_seq_length = to_shape[1]

    <a id="change">to_mask = tf.cast(
        tf.reshape(to_mask, [batch_size, 1, to_seq_length]),
        dtype=from_tensor.dtype)</a>

    &#47&#47 We don&quott assume that `from_tensor` is a mask (although it could be). We
    &#47&#47 don&quott actually care if we attend *from* padding tokens (only *to* padding)
    &#47&#47 tokens so we create a tensor of all ones.</code></pre><h3>After Change</h3><pre><code class='java'>
  

  def call(self, inputs):
    <a id="change">if isinstance(inputs, list):
      return super().call(inputs[0], inputs[1])
    else:
      return super().call(inputs)</a>
</code></pre><img src="64286550.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/tensorflow/models/commit/5fc4c351699c9007a727eaaef99413962cf0818f#diff-9dab598652c5f80aa355291c1bdd38074b62cb28492ed5df07a2efb6877a52c2L34' target='_blank'>Link</a></div><div id='project'> Project Name: tensorflow/models</div><div id='commit'> Commit Name: 5fc4c351699c9007a727eaaef99413962cf0818f</div><div id='time'> Time: 2020-12-09</div><div id='author'> Author: hongkuny@google.com</div><div id='file'> File Name: official/nlp/modeling/layers/self_attention_mask.py</div><div id='class'> Class Name: SelfAttentionMask</div><div id='method'> Method Name: call</div><BR><BR><div id='link'><a href='https://github.com/ray-project/ray/commit/80d314ae5eaadc88061a62c827e1b8670098c1ab#diff-4096b64f647e947ebf926cfe3ab19288f90b7388fadd1dfd3ebc00c17accb047L57' target='_blank'>Link</a></div><div id='project'> Project Name: ray-project/ray</div><div id='commit'> Commit Name: 80d314ae5eaadc88061a62c827e1b8670098c1ab</div><div id='time'> Time: 2020-03-12</div><div id='author'> Author: sven@anyscale.io</div><div id='file'> File Name: rllib/utils/exploration/random.py</div><div id='class'> Class Name: Random</div><div id='method'> Method Name: get_tf_exploration_action_op</div><BR><BR><div id='link'><a href='https://github.com/tensorflow/transform/commit/deeb372d527073813abb40a2b9a209ad050f1e44#diff-620c46de123f69799077d8daec3e824ef614036d8bafb7842961f52a3a282a81L552' target='_blank'>Link</a></div><div id='project'> Project Name: tensorflow/transform</div><div id='commit'> Commit Name: deeb372d527073813abb40a2b9a209ad050f1e44</div><div id='time'> Time: 2018-07-31</div><div id='author'> Author: tf-transform-dev@google.com</div><div id='file'> File Name: tensorflow_transform/analyzers.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: mean</div><BR>