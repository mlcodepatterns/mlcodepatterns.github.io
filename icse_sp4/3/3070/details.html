<html><h3>dd7c34ea3480f2ffd8843171676aaa22b1777bd8,nilearn/decomposition/tests/test_canica.py,,test_canica_square_img,#,8
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        map = np.abs(maps[i]) &gt; np.abs(maps[i]).max() * 0.95
        for j in indices:
            ref_map = components[j].ravel() != 0
            if np.all(<a id="change">map.ravel()</a> == ref_map):
                indices.remove(j)
                break
        else:</code></pre><h3>After Change</h3><pre><code class='java'>
    &#47&#47 FIXME: This could be done more efficiently, e.g. thanks to hungarian
    &#47&#47 Find pairs of matching components
    &#47&#47 compute the cross-correlation matrix between components
    K = np.corrcoef(components, maps.reshape(4, 400))[<a id="change">4:, :</a>4]
    &#47&#47 K should be a permutation matrix, hence its coefficients 
    &#47&#47 should all be close to 0 1 or -1
    K_abs = <a id="change">np.abs(K)</a>
    assert_true(np.sum(K_abs &gt; .9) == 4)
    K_abs[K_abs &gt; .9] -= 1
    assert_array_almost_equal(K_abs, 0, 1)
</code></pre><img src="21319061.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/nilearn/nilearn/commit/dd7c34ea3480f2ffd8843171676aaa22b1777bd8#diff-7fe63c1c525822b2fd7ac99b31a612b1a8f7bad39d70c355402384b442ad427dL30' target='_blank'>Link</a></div><div id='project'> Project Name: nilearn/nilearn</div><div id='commit'> Commit Name: dd7c34ea3480f2ffd8843171676aaa22b1777bd8</div><div id='time'> Time: 2014-05-28</div><div id='author'> Author: bertrand.thirion@inria.fr</div><div id='file'> File Name: nilearn/decomposition/tests/test_canica.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: test_canica_square_img</div><BR><BR><div id='link'><a href='https://github.com/nilearn/nilearn/commit/7b0c84ac43d81f2c0d980645e693df8452ce1cb5#diff-3ea12144293a2139cacd09f728c921353baa3c4de595d52c810875c4b58c26d1L13' target='_blank'>Link</a></div><div id='project'> Project Name: nilearn/nilearn</div><div id='commit'> Commit Name: 7b0c84ac43d81f2c0d980645e693df8452ce1cb5</div><div id='time'> Time: 2012-06-22</div><div id='author'> Author: alexandre.abraham@cea.fr</div><div id='file'> File Name: nyu_rest_decomposition.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: </div><BR><BR><div id='link'><a href='https://github.com/matplotlib/matplotlib/commit/df4e62300edda78b05782aee6eb036f3d7f32457#diff-b3f136a845ae5b7383fbc2be280c64af12352a6583ace9658cc4f6e2479df4a3L347' target='_blank'>Link</a></div><div id='project'> Project Name: matplotlib/matplotlib</div><div id='commit'> Commit Name: df4e62300edda78b05782aee6eb036f3d7f32457</div><div id='time'> Time: 2017-12-01</div><div id='author'> Author: anntzer.lee@gmail.com</div><div id='file'> File Name: lib/matplotlib/contour.py</div><div id='class'> Class Name: ContourLabeler</div><div id='method'> Method Name: locate_label</div><BR>