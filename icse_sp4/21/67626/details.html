<html><h3>dfcb0f64f10b5161c6bc62136fd1245f37b6f8e4,scanpy/plotting/_stacked_violin.py,StackedViolin,_mainplot,#StackedViolin#Any#,297
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            _color_df = _color_df.T
        import matplotlib.colors

        <a id="change">norm = matplotlib.colors.Normalize(
            vmin=self.kwds.get(&quotvmin&quot), vmax=self.kwds.get(&quotvmax&quot)
        )</a>
        cmap = pl.get_cmap(self.kwds.get(&quotcmap&quot, self.cmap))
        if &quotcmap&quot in self.kwds:
            del self.kwds[&quotcmap&quot]
        colormap_array = cmap(norm(_color_df.values))</code></pre><h3>After Change</h3><pre><code class='java'>

        return self

    def _mainplot(<a id="change">self</a>, ax):
        &#47&#47 to make the stacked violin plots, the
        &#47&#47 `ax` is subdivided horizontally and in each horizontal sub ax
        &#47&#47 a seaborn violin plot is added.

        &#47&#47 work on a copy of the dataframes. This is to avoid changes
        &#47&#47 on the original data frames after repetitive calls to the
        &#47&#47 StackedViolin object, for example once with swap_axes and other without
        _matrix = self.obs_tidy.copy()

        if self.var_names_idx_order is not None:
            _matrix = _matrix.iloc[:, self.var_names_idx_order]

        if self.categories_order is not None:
            _matrix.index = _matrix.index.reorder_categories(
                self.categories_order, ordered=True
            )

        &#47&#47 get mean values for color and transform to color values
        &#47&#47 using colormap
        _color_df = _matrix.groupby(level=0).median()
        if self.are_axes_swapped:
            _color_df = _color_df.T

        cmap = pl.get_cmap(self.kwds.get(&quotcmap&quot, self.cmap))
        if &quotcmap&quot in self.kwds:
            del self.kwds[&quotcmap&quot]
        normalize = <a id="change">check_colornorm(
            self.vboundnorm.vmin,
            self.vboundnorm.vmax,
            self.vboundnorm.vcenter,
            self.vboundnorm.norm,
        )</a>
        colormap_array = cmap(normalize(_color_df.values))
        x_spacer_size = self.plot_x_padding
        y_spacer_size = self.plot_y_padding
        self._make_rows_of_violinplots(</code></pre><img src="313030312.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 17</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/theislab/scanpy/commit/dfcb0f64f10b5161c6bc62136fd1245f37b6f8e4#diff-5d0e683154209be7830f09b5389551bf9700a4184d08e97c46c23e2e4beb54a0L297' target='_blank'>Link</a></div><div id='project'> Project Name: theislab/scanpy</div><div id='commit'> Commit Name: dfcb0f64f10b5161c6bc62136fd1245f37b6f8e4</div><div id='time'> Time: 2021-03-14</div><div id='author'> Author: gokcen.eraslan@gmail.com</div><div id='file'> File Name: scanpy/plotting/_stacked_violin.py</div><div id='class'> Class Name: StackedViolin</div><div id='method'> Method Name: _mainplot</div><BR><BR><div id='link'><a href='https://github.com/theislab/scanpy/commit/dfcb0f64f10b5161c6bc62136fd1245f37b6f8e4#diff-b6aa455082724077953a169dbc2d59c936e82eaf95ec5438ccdc7ec9358c630dL531' target='_blank'>Link</a></div><div id='project'> Project Name: theislab/scanpy</div><div id='commit'> Commit Name: dfcb0f64f10b5161c6bc62136fd1245f37b6f8e4</div><div id='time'> Time: 2021-03-14</div><div id='author'> Author: gokcen.eraslan@gmail.com</div><div id='file'> File Name: scanpy/plotting/_baseplot_class.py</div><div id='class'> Class Name: BasePlot</div><div id='method'> Method Name: _mainplot</div><BR><BR><div id='link'><a href='https://github.com/theislab/scanpy/commit/dfcb0f64f10b5161c6bc62136fd1245f37b6f8e4#diff-5d0e683154209be7830f09b5389551bf9700a4184d08e97c46c23e2e4beb54a0L297' target='_blank'>Link</a></div><div id='project'> Project Name: theislab/scanpy</div><div id='commit'> Commit Name: dfcb0f64f10b5161c6bc62136fd1245f37b6f8e4</div><div id='time'> Time: 2021-03-14</div><div id='author'> Author: gokcen.eraslan@gmail.com</div><div id='file'> File Name: scanpy/plotting/_stacked_violin.py</div><div id='class'> Class Name: StackedViolin</div><div id='method'> Method Name: _mainplot</div><BR><BR><div id='link'><a href='https://github.com/theislab/scanpy/commit/dfcb0f64f10b5161c6bc62136fd1245f37b6f8e4#diff-9e39dbfce016146846b2669204753a6b9363846469a1d660e66355d25140bb8dL188' target='_blank'>Link</a></div><div id='project'> Project Name: theislab/scanpy</div><div id='commit'> Commit Name: dfcb0f64f10b5161c6bc62136fd1245f37b6f8e4</div><div id='time'> Time: 2021-03-14</div><div id='author'> Author: gokcen.eraslan@gmail.com</div><div id='file'> File Name: scanpy/plotting/_matrixplot.py</div><div id='class'> Class Name: MatrixPlot</div><div id='method'> Method Name: _mainplot</div><BR>