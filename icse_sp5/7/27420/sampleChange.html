<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    
    warning = ""
    &#47&#47 Convert to utf-8 whenever we have a binary input.
    <a id="change">if isinstance(markdown_string, six.binary_type):
        markdown_string_decoded = markdown_string.decode("utf-8")
        &#47&#47 Remove null bytes and warn if there were any, since it probably means
        &#47&#47 we were given a bad encoding.
        markdown_string = markdown_string_decoded.replace(u"\x00", u"")
        num_null_bytes = len(markdown_string_decoded) - len(markdown_string)
        if num_null_bytes:
            warning = (
                "&lt;!-- WARNING: discarded %d null bytes in markdown string "
                "after UTF-8 decoding --&gt;\n"
            ) % num_null_bytes

   </a> string_html = _MARKDOWN_STORE.markdown.convert(markdown_string)
    string_sanitized = bleach.clean(
        string_html, tags=_ALLOWED_TAGS, attributes=_ALLOWED_ATTRIBUTES
    )</code></pre><h3>After Change</h3><pre><code class='java'>
    Returns:
      A string containing safe HTML.
    
    return markdowns_to_safe_html(<a id="change">[markdown_string]</a>, lambda xs: xs[0])


def markdowns_to_safe_html(markdown_strings, combine):</code></pre>