<html><h3>959372edab3020c0164b8a2da4aaff1c49ba8400,example/resnet/convert_resnet_keras.py,,main,#,15
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    args = parser.parse_args()
    keras_model_path = path.join(args.out, "resnet50.h5")

    <a id="change">if not os.path.exists(keras_model_path):
        console.stderr("Exporting Keras model into file")
        os.makedirs(args.out, exist_ok=True)
        model = resnet50.ResNet50(include_top=True, weights=&quotimagenet&quot)
        model.save(keras_model_path)

   </a> console.stderr("Converting model into WebDNN format (graph descriptor)")
    &#47&#47 only for demo purpose, maybe not safe
    convert_keras_command = f"python ../../bin/convert_keras.py {keras_model_path} --input_shape &quot(1,224,224,3)&quot --out {args.out}"
    if args.encoding:</code></pre><h3>After Change</h3><pre><code class='java'>
    graph = KerasConverter(batch_size=1).convert(model)
    for backend in ["webgpu", "webassembly", "fallback"]:
        graph_exec_data = generate_descriptor(backend, graph, constant_encoder_name=args.encoding)
        <a id="change">graph_exec_data.save(args.out)</a>

    console.stderr("Done.")

</code></pre><img src="135678086.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/mil-tokyo/webdnn/commit/959372edab3020c0164b8a2da4aaff1c49ba8400#diff-ef9ec0a2b9a98e78eda53d3d1dc48c65192aecbbce07d57cceaf966d6d8a9e29L22' target='_blank'>Link</a></div><div id='project'> Project Name: mil-tokyo/webdnn</div><div id='commit'> Commit Name: 959372edab3020c0164b8a2da4aaff1c49ba8400</div><div id='time'> Time: 2017-07-02</div><div id='author'> Author: y.kikura@gmail.com</div><div id='file'> File Name: example/resnet/convert_resnet_keras.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: main</div><BR><BR><div id='link'><a href='https://github.com/IBM/adversarial-robustness-toolbox/commit/46b700a1b63488408121f1edf9df3df01d345a17#diff-2928fb6e4ca4b2433fb680438b59a5c4c3d992429edc2ac542e10bf6df9991caL244' target='_blank'>Link</a></div><div id='project'> Project Name: IBM/adversarial-robustness-toolbox</div><div id='commit'> Commit Name: 46b700a1b63488408121f1edf9df3df01d345a17</div><div id='time'> Time: 2019-02-21</div><div id='author'> Author: M.N.Tran@ibm.com</div><div id='file'> File Name: art/classifiers/detector_classifier.py</div><div id='class'> Class Name: DetectorClassifier</div><div id='method'> Method Name: save</div><BR><BR><div id='link'><a href='https://github.com/moskomule/senet.pytorch/commit/60f86864a6da5a746f9ae51f73ccfdeb29e6b35f#diff-09d0cbaf891d623ac245ccf84485a687b554217349ca55557c60b33234b969aeL59' target='_blank'>Link</a></div><div id='project'> Project Name: moskomule/senet.pytorch</div><div id='commit'> Commit Name: 60f86864a6da5a746f9ae51f73ccfdeb29e6b35f</div><div id='time'> Time: 2018-03-06</div><div id='author'> Author: hataya@keio.jp</div><div id='file'> File Name: utils.py</div><div id='class'> Class Name: Trainer</div><div id='method'> Method Name: save</div><BR>