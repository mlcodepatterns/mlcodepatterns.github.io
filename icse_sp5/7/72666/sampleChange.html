<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                                             group=self.group,
                                             tangent_vec=point,
                                             base_point=base_point)
                <a id="change">expected = point</a>
                <a id="change">inv_expected = - expected</a>

                self.assertTrue((np.allclose(result, expected)
                                 or np.allclose(result, inv_expected)),
                                &quot\n- on point {}: {} -&gt; {}\n&quot
                                &quot- base_point {}: {} -&gt; {}\n&quot
                                &quotresult = {} -&gt; {}\n&quot
                                &quotexpected = {} -&gt; {}&quot.format(
                                 angle_type,
                                 point, self.group.regularize(point),
                                 angle_type_base,
                                 base_point, self.group.regularize(base_point),
                                 result, self.group.regularize(result),
                                 expected, self.group.regularize(expected)))

                if np.allclose(result, inv_expected):
                    <a id="change">if np.linalg.norm(inv_expected - expected) &gt; 1e-5:
                        logging.warning(&quotTest group_exp_then_log passed only &quot
                                        &quot w. the assumption:\n&quot
                                        &quot rotvec = -rotvec &quot
                                        &quotfor a point {} &quot
                                        &quotand base_point {}.&quot.format(
                                                        angle_type,
                                                        angle_type_base))

   </a> def test_group_log_then_exp(self):
        
        This tests that the composition of
        log and exp gives identity.</code></pre><h3>After Change</h3><pre><code class='java'>
                tangent_vec_at_id = np.dot(np.linalg.inv(jacobian),
                                           tangent_vec)
                tangent_vec_at_id = self.group.regularize(tangent_vec_at_id)
                expected = <a id="change">np.dot(jacobian, tangent_vec_at_id)</a>

                self.assertTrue(np.allclose(result, expected, atol=1e-6),
                                &quot\n- on point {}: {} -&gt; {}\n&quot
                                &quot- base_point {}: {} -&gt; {}\n&quot</code></pre>