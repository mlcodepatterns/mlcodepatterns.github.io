<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                  float(parsed_line[col_name])))
            numerical_results[col_name][&quotcount&quot] += 1
            numerical_results[col_name][&quotsum&quot] += float(parsed_line[col_name])
          elif <a id="change">transform == constant.IMAGE_TRANSFORM</a>:
            pass
          elif <a id="change">transform</a> == constant.KEY_TRANSFORM:
            pass
          else:
            raise ValueError(<a id="change">&quotUnknown transform %s&quot % transform</a>)

  &#47&#47 Write the vocab files. Each label is on its own line.
  vocab_sizes = {}</code></pre><h3>After Change</h3><pre><code class='java'>
        parsed_line = dict(zip(header, line))
        num_examples += 1

        <a id="change">for col_name, transform_set in six.iteritems(inverted_features_target):
          &#47&#47 All transforms in transform_set require the same analysis. So look
          &#47&#47 at the first transform.
          transform_name = next(iter(transform_set))
          if transform_name in constant.TEXT_TRANSFORMS:
            split_strings = parsed_line[col_name].split(&quot &quot)

            &#47&#47 If a label is in the row N times, increase it&quots vocab count by 1.
            &#47&#47 This is needed for TFIDF, but it&quots also an interesting stat.
            for one_label in set(split_strings):
              &#47&#47 Filter out empty strings
              if one_label:
                vocabs[col_name][one_label] += 1
          elif transform_name in constant.CATEGORICAL_TRANSFORMS:
            if parsed_line[col_name]:
              vocabs[col_name][parsed_line[col_name]] += 1
          elif transform_name in constant.NUMERIC_TRANSFORMS:
            if not parsed_line[col_name].strip():
              continue

            numerical_results[col_name][&quotmin&quot] = (
              min(numerical_results[col_name][&quotmin&quot],
                  float(parsed_line[col_name])))
            numerical_results[col_name][&quotmax&quot] = (
              max(numerical_results[col_name][&quotmax&quot],
                  float(parsed_line[col_name])))
            numerical_results[col_name][&quotcount&quot] += 1
            numerical_results[col_name][&quotsum&quot] += float(parsed_line[col_name])

  &#47&#47 Write the vocab files. Each label is on its own line.
 </a> vocab_sizes = {}
  for name, label_count in six.iteritems(vocabs):
    &#47&#47 Labels is now the string:
    &#47&#47 label1,count</code></pre>