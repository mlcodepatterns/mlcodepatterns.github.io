<html><h3>667d856a2fc27732d745cd7d926e9739ad12995c,example/ctr/ctr/train.py,,train,#,183
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        elif args.role == "trainer" or args.role == "TRAINER":
            logger.info("download the training materials")
            file_index = args.trainer_id % 10
            address = <a id="change">"https://paddle-ctr-data.bj.bcebos.com/dac" + str(file_index) + ".tar.gz"</a>
            cmd = <a id="change">"cd /workspace/ctr/data/ && curl -o dac.tar.gz "</a> + address + " && tar zxf dac.tar.gz && rm dac.tar.gz"
            exit_code = subprocess.call(cmd, shell=True)
            if exit_code != 0:
                raise Exception("The download command failed, please check the network settings")</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 comma separated ips of all pservers, needed by trainer and

        args.endpoints = os.getenv("PADDLE_PSERVERS", "")
        <a id="change">ep_list = args.endpoints.split(&quot,&quot)</a>
        args.trainers = int(os.getenv("PADDLE_TRAINERS_NUM", "1"))
        args.pserver_id = int(os.getenv("PADDLE_PSERVER_ID", "0"))
        for ep in ep_list:
            <a id="change">if os.getenv("POD_IP", "localhost") in ep:
                args.current_endpoint = ep
                break
       </a> args.role = os.getenv("TRAINING_ROLE", "TRAINER")
        args.trainer_id = int(os.getenv("PADDLE_TRAINER_ID", "0"))
        args.is_local = bool(int(os.getenv("PADDLE_IS_LOCAL", 0)))
    if args.is_local:</code></pre><img src="331431383.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 7</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/PaddlePaddle/edl/commit/667d856a2fc27732d745cd7d926e9739ad12995c#diff-eb9f61d5d3f799fa0d15fe3af68d92468b2010ca09ad41ec983b3bb21c6fb388L184' target='_blank'>Link</a></div><div id='project'> Project Name: PaddlePaddle/edl</div><div id='commit'> Commit Name: 667d856a2fc27732d745cd7d926e9739ad12995c</div><div id='time'> Time: 2019-09-28</div><div id='author'> Author: wangjiawei04@baidu.com</div><div id='file'> File Name: example/ctr/ctr/train.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: train</div><BR><BR><div id='link'><a href='https://github.com/michaelhush/M-LOOP/commit/6e5cf676b113af8d70e34224f23bc8eace618856#diff-9f657823841d670472ac4a74f250306a7a967c04bb48f71aedd04a228fe3401fL120' target='_blank'>Link</a></div><div id='project'> Project Name: michaelhush/M-LOOP</div><div id='commit'> Commit Name: 6e5cf676b113af8d70e34224f23bc8eace618856</div><div id='time'> Time: 2017-05-02</div><div id='author'> Author: harry.slatyer@gmail.com</div><div id='file'> File Name: mloop/nnlearner.py</div><div id='class'> Class Name: SingleNeuralNet</div><div id='method'> Method Name: fit</div><BR><BR><div id='link'><a href='https://github.com/jindongwang/transferlearning/commit/2733bef356c53286d475a67476d88d4840923830#diff-3a0171c82ffe1293d5696d6703828e34998b1c16890b633015cd0292eaabef25L89' target='_blank'>Link</a></div><div id='project'> Project Name: jindongwang/transferlearning</div><div id='commit'> Commit Name: 2733bef356c53286d475a67476d88d4840923830</div><div id='time'> Time: 2020-09-30</div><div id='author'> Author: jindongwang@outlook.com</div><div id='file'> File Name: code/deep/finetune_AlexNet_ResNet/finetune_office31.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: finetune</div><BR>