<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        self.traci_connection.simulationStep()

        &#47&#47 TODO: Replace these traci calls with initial_state accesses
        <a id="change">for veh_id in self.ids:
            self.traci_connection.vehicle.setSpeedMode(veh_id, 0)
            if veh_id in self.rl_ids:
                self.traci_connection.vehicle.setLaneChangeMode(veh_id, 0)
            self.vehicles[veh_id]["type"] = self.traci_connection.vehicle.getTypeID(veh_id)
            self.vehicles[veh_id]["edge"] = self.traci_connection.vehicle.getRoadID(veh_id)
            self.vehicles[veh_id]["position"] = self.traci_connection.vehicle.getLanePosition(veh_id)
            self.vehicles[veh_id]["lane"] = self.traci_connection.vehicle.getLaneIndex(veh_id)
            self.vehicles[veh_id]["speed"] = self.traci_connection.vehicle.getSpeed(veh_id)
            self.vehicles[veh_id]["fuel"] = self.traci_connection.vehicle.getFuelConsumption(veh_id)
            self.vehicles[veh_id]["distance"] = self.traci_connection.vehicle.getDistance(veh_id)
            self.vehicles[veh_id]["absolute_position"] = self.get_x_by_id(veh_id)


       </a> self.state = self.getState()
        observation = np.copy(self.state)

        return observation</code></pre><h3>After Change</h3><pre><code class='java'>
            &#47&#47 re-initialize perceived state
            self.vehicles[veh_id] = self.initial_vehicles_state[veh_id]

            <a id="change">print("veh id:", veh_id)</a>
            print("edge:", self.vehicles[veh_id]["edge"])
            print("position:", self.vehicles[veh_id]["position"])
            print("lane:", self.vehicles[veh_id]["edge"])
            print("speed:", self.vehicles[veh_id]["edge"])</code></pre>