<html><h3>ed04f04e014da8ea597ff00b3f3f15c7e6d6fefe,src/pudl/transform/eia861.py,,sales,#Any#,653
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    logger.info("Tidying the EIA 861 Sales table.")
    &#47&#47 Clean up values just enough to use primary key columns as a multi-index:
    logger.debug("Cleaning up EIA861 Sales index columns so we can tidy data.")
    <a id="change">clean_sales = (
        tfr_dfs["sales_eia861"].copy()
        .assign(balancing_authority_code_eia=lambda x: x.balancing_authority_code_eia.fillna("UNK"))
        .dropna(subset=["utility_id_eia"])
        .query("utility_id_eia not in (88888, 99999)")
        .astype({"utility_id_eia": pd.Int64Dtype()})
        .set_index(idx_cols)
    )</a>
    &#47&#47 Split the table into index, data, and "denormalized" columns for processing:
    &#47&#47 Separate customer classes and reported data into a hierarchical index
    logger.debug("Stacking EIA861 Sales data columns by customer class.")
    data_cols = _filter_customer_cols(clean_sales, CUSTOMER_CLASSES)</code></pre><h3>After Change</h3><pre><code class='java'>
    ]

    &#47&#47 Pre-tidy clean specific to sales table
    <a id="change">raw_sales = (
        tfr_dfs["sales_eia861"].copy()
        .query("utility_id_eia not in (88888, 99999)")
    )</a>

    &#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47
    &#47&#47 Tidy Data:
    &#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47</code></pre><img src="295173875.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/catalyst-cooperative/pudl/commit/ed04f04e014da8ea597ff00b3f3f15c7e6d6fefe#diff-907d4c52b328de374b579b5af9a4d93d0e5c4aede67dfe99ee980e00dee81320L655' target='_blank'>Link</a></div><div id='project'> Project Name: catalyst-cooperative/pudl</div><div id='commit'> Commit Name: ed04f04e014da8ea597ff00b3f3f15c7e6d6fefe</div><div id='time'> Time: 2020-06-24</div><div id='author'> Author: aesharpe@Austens-MacBook-Pro.local</div><div id='file'> File Name: src/pudl/transform/eia861.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: sales</div><BR><BR><div id='link'><a href='https://github.com/andresriancho/w3af/commit/2add7b48cc1d9172133f26f801f3d65ff84b8345#diff-2924fc63977224cefeed80214c49d0e44b282cd2af9f59f03980c34cab4e0857L57' target='_blank'>Link</a></div><div id='project'> Project Name: andresriancho/w3af</div><div id='commit'> Commit Name: 2add7b48cc1d9172133f26f801f3d65ff84b8345</div><div id='time'> Time: 2017-11-28</div><div id='author'> Author: andres.riancho@gmail.com</div><div id='file'> File Name: w3af/plugins/grep/wsdl_greper.py</div><div id='class'> Class Name: wsdl_greper</div><div id='method'> Method Name: analyze_wsdl</div><BR><BR><div id='link'><a href='https://github.com/mlflow/mlflow/commit/de6603824e1ac7d9cdf925acb0f9fff073991332#diff-b2b10e69c9c9134afc376963051160539426069d6ed9ebd6af8252ce2b51de09L591' target='_blank'>Link</a></div><div id='project'> Project Name: mlflow/mlflow</div><div id='commit'> Commit Name: de6603824e1ac7d9cdf925acb0f9fff073991332</div><div id='time'> Time: 2019-11-05</div><div id='author'> Author: jcuquemelle@gmail.com</div><div id='file'> File Name: mlflow/store/tracking/sqlalchemy_store.py</div><div id='class'> Class Name: SqlAlchemyStore</div><div id='method'> Method Name: _search_runs</div><BR>