<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    elif len(gene_list) == 1:
        score = _adata[:, gene_list].X - np.nanmean(_adata[:, control_genes].X.toarray(), axis=1)
    else:
        score = <a id="change">np.nanmean(_adata[:, gene_list].X.toarray(), axis=1)</a> - np.nanmean(_adata[:, control_genes].X.toarray(), axis=1)
    adata.obs[score_name] = pd.Series(np.array(score).ravel(), index=adata.obs_names)

    logg.info(&quot    finished&quot, time=True, end=&quot &quot if settings.verbosity &gt; 2 else &quot\n&quot)</code></pre><h3>After Change</h3><pre><code class='java'>
    X_list = _adata[:, gene_list].X
    if issparse(X_list): X_list = X_list.toarray()
    X_control = _adata[:, control_genes].X
    <a id="change">if issparse(X_control): X_control = X_control.toarray()
</a>    X_control = np.nanmean(X_control, axis=1)

    if len(gene_list) == 0:
        &#47&#47 We shouldn&quott even get here, but just in case</code></pre>