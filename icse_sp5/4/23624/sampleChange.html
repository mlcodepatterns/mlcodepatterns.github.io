<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        if is_modal or True:
            return render_to_response(&quotsocial/social_connect.xhtml&quot, {}, context_instance=RequestContext(request))
        else:
            return HttpResponseRedirect(<a id="change">reverse(&quotindex&quot)</a>)

    return HttpResponseRedirect(reverse(&quotimport-signup&quot))
    </code></pre><h3>After Change</h3><pre><code class='java'>
        )
    FLOW.redirect_uri = STEP2_URI
    
    <a id="change">try:
        credential = FLOW.step2_exchange(request.REQUEST)
    except FlowExchangeError:
        logging.info(" ***&gt; [%s] Bad token from Google Reader." % (request.user,))
        return render_to_response(&quotsocial/social_connect.xhtml&quot, {
            &quoterror&quot: &quotThere was an error trying to import from Google Reader. Trying again will probably fix the issue.&quot
        }, context_instance=RequestContext(request))
    
   </a> user_token = None
    if request.user.is_authenticated():
        user_token = OAuthToken.objects.filter(user=request.user).order_by(&quot-created_date&quot)
    if not user_token:</code></pre>