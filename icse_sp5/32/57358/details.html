<html><h3>08e57f495ebbfa254783777bae75590af8165f53,reframe/core/containers.py,Singularity,launch_command,#Singularity#,177
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    def launch_command(self):
        super().launch_command()
        <a id="change">run_opts = [&quot-B"%s:%s"&quot % mp for mp in self.mount_points]</a>
        if self.with_cuda:
            run_opts.append(&quot--nv&quot)

        run_opts += self.options
        <a id="change">run_cmd = &quotsingularity exec %s %s bash -c &quot % (&quot &quot.join(run_opts),
                                                       self.image)</a>
        <a id="change">return run_cmd + "&quot" + &quot; &quot.join(
            [&quotcd &quot + self.workdir] + self.commands) + "&quot"</a>


class ContainerPlatformField(fields.TypedField):
    def __init__(self, *other_types):</code></pre><h3>After Change</h3><pre><code class='java'>
        run_opts += self.options
        workdir_cmd = f&quot--workdir="{self.workdir}" &quot if self.workdir else &quot&quot
        if self.command:
            <a id="change">return (f&quotsingularity exec {workdir_cmd}{" ".join(run_opts)} &quot
                    f&quot{self.image} {self.command}&quot)</a>

        return (f&quotsingularity run {workdir_cmd}{" ".join(run_opts)} &quot
                f&quot{self.image}&quot)
</code></pre><img src="266617932.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 23</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/eth-cscs/reframe/commit/08e57f495ebbfa254783777bae75590af8165f53#diff-f713bb9af68256550378712f615c0b7de2fccb0bbfac8e8ad57ac028221f8305L177' target='_blank'>Link</a></div><div id='project'> Project Name: eth-cscs/reframe</div><div id='commit'> Commit Name: 08e57f495ebbfa254783777bae75590af8165f53</div><div id='time'> Time: 2021-02-15</div><div id='author'> Author: manitaras@cscs.ch</div><div id='file'> File Name: reframe/core/containers.py</div><div id='class'> Class Name: Singularity</div><div id='method'> Method Name: launch_command</div><BR><BR><div id='link'><a href='https://github.com/eth-cscs/reframe/commit/08e57f495ebbfa254783777bae75590af8165f53#diff-f713bb9af68256550378712f615c0b7de2fccb0bbfac8e8ad57ac028221f8305L136' target='_blank'>Link</a></div><div id='project'> Project Name: eth-cscs/reframe</div><div id='commit'> Commit Name: 08e57f495ebbfa254783777bae75590af8165f53</div><div id='time'> Time: 2021-02-15</div><div id='author'> Author: manitaras@cscs.ch</div><div id='file'> File Name: reframe/core/containers.py</div><div id='class'> Class Name: Sarus</div><div id='method'> Method Name: launch_command</div><BR><BR><div id='link'><a href='https://github.com/eth-cscs/reframe/commit/08e57f495ebbfa254783777bae75590af8165f53#diff-f713bb9af68256550378712f615c0b7de2fccb0bbfac8e8ad57ac028221f8305L102' target='_blank'>Link</a></div><div id='project'> Project Name: eth-cscs/reframe</div><div id='commit'> Commit Name: 08e57f495ebbfa254783777bae75590af8165f53</div><div id='time'> Time: 2021-02-15</div><div id='author'> Author: manitaras@cscs.ch</div><div id='file'> File Name: reframe/core/containers.py</div><div id='class'> Class Name: Docker</div><div id='method'> Method Name: launch_command</div><BR>