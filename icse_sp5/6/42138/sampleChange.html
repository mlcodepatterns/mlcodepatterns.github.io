<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                &#47&#47 get probability of correct answer, divide by total prob mass
                prob_true = probs.get(parsed[i], 0)
                if prob_true &gt; 0:
                    <a id="change">prob_true /= sum(probs.values())</a>
                    loss -= math.log(prob_true)
                else:
                    loss = float(&quotinf&quot)
                num_tokens += 1</code></pre><h3>After Change</h3><pre><code class='java'>
                &#47&#47 get probability of correct answer, divide by total prob mass
                prob_true = probs.get(parsed[i], 0)
                if prob_true &gt; 0:
                    <a id="change">prob_true /= sum((probs.get(k, 0) for k in self.dict.keys()))</a>
                    loss -= math.log(prob_true)
                else:
                    loss = float(&quotinf&quot)
                num_tokens += 1</code></pre>