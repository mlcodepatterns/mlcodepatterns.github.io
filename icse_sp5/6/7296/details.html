<html><h3>1180972540f54c36a7fcec47097a304c7033d20a,parlai/core/metrics.py,Metrics,_update_ranking_metrics,#Metrics#Any#Any#,396
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                self.flags[&quothas_text_cands&quot] = True
                for k in self.eval_pr:
                    if cnts[k] &gt; 0:
                        self.metrics[<a id="change">&quothits@&quot + str(k)</a>] += 1
                <a id="change">self.metrics[&quothits@_cnt&quot] += 1</a>

    def update(self, observation, labels):
        
        Update metrics based on an observation and true labels.</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 (other metrics such as p@k and r@k take
        &#47&#47 the value of cnt into account.)
        for k in self.eval_pr:
            <a id="change">self.add(f&quothits@{k}&quot, AverageMetric(cnts[k] &gt; 0))</a>

    def evaluate_response(self, observation: Message, labels: List[str]) -&gt; None:
        
        Compute all required text-based metrics based on an observation and labels.</code></pre><img src="44871885.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/facebookresearch/ParlAI/commit/1180972540f54c36a7fcec47097a304c7033d20a#diff-8927eaffee89bfa6dd31242836637f2f2702d60a6e61f4d02270b607450a5821L396' target='_blank'>Link</a></div><div id='project'> Project Name: facebookresearch/ParlAI</div><div id='commit'> Commit Name: 1180972540f54c36a7fcec47097a304c7033d20a</div><div id='time'> Time: 2020-01-31</div><div id='author'> Author: roller@fb.com</div><div id='file'> File Name: parlai/core/metrics.py</div><div id='class'> Class Name: Metrics</div><div id='method'> Method Name: _update_ranking_metrics</div><BR><BR><div id='link'><a href='https://github.com/analysiscenter/batchflow/commit/53f15232ed13154bc5338dc002b43c3c62547ea7#diff-292a8aa1d3f08d05bb47ccf20e00f3b11e2d6fecc19714a4aafaed0a3befa9d1L89' target='_blank'>Link</a></div><div id='project'> Project Name: analysiscenter/batchflow</div><div id='commit'> Commit Name: 53f15232ed13154bc5338dc002b43c3c62547ea7</div><div id='time'> Time: 2017-11-12</div><div id='author'> Author: rhudor@gmail.com</div><div id='file'> File Name: dataset/models/tf/vgg.py</div><div id='class'> Class Name: VGG</div><div id='method'> Method Name: body</div><BR><BR><div id='link'><a href='https://github.com/analysiscenter/batchflow/commit/02098c5c44893ce455aefcfc452aa00bd655987b#diff-16ecf34e37a6a48f1e5ef1b9d2e2cd3badabe9fab683e8db4b4bcce1574fad1eL85' target='_blank'>Link</a></div><div id='project'> Project Name: analysiscenter/batchflow</div><div id='commit'> Commit Name: 02098c5c44893ce455aefcfc452aa00bd655987b</div><div id='time'> Time: 2017-11-15</div><div id='author'> Author: rhudor@gmail.com</div><div id='file'> File Name: dataset/models/tf/unet.py</div><div id='class'> Class Name: UNet</div><div id='method'> Method Name: body</div><BR>