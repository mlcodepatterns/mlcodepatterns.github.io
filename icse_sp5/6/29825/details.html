<html><h3>cc7559e11767fa0d21f1b80fe86dae0cf74303c0,python/seldon_core/metrics.py,,,#,19
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

&#47&#47 Development placeholder
LABELS = ["worker-id", "model", "image"]
my_labels = <a id="change">{"model": "latest", "image": "my-image"}</a>


class SeldonMetrics:
    Class to manage custom metrics stored in shared memory.</code></pre><h3>After Change</h3><pre><code class='java'>
ENV_MODEL_NAME = "PREDICTIVE_UNIT_ID"
ENV_MODEL_IMAGE = "PREDICTIVE_UNIT_IMAGE"
ENV_PREDICTOR_NAME = "PREDICTOR_ID"
<a id="change">ENV_PREDICTOR_LABELS = "PREDICTOR_LABELS"</a>

COUNTER = "COUNTER"
GAUGE = "GAUGE"
TIMER = "TIMER"

&#47&#47 This sets the bins spread logarithmically between 0.001 and 30
BINS = [0] + list(np.logspace(-3, np.log10(30), 50)) + [np.inf]

&#47&#47 Development placeholder
LABELS = [
    "worker-id",
    "seldon_deployment_name",
    "model_name",
    "image_name",
    "image_version",
    "predictor_name",
    "predictor_version",
]

image = os.environ.get(ENV_MODEL_IMAGE, "UNDEFINED:UNDEFINED")
image_name, image_version = image.split(":")
<a id="change">predictor_version = json.loads(os.environ.get(ENV_PREDICTOR_LABELS, "{}")).get(
    "version", "UNDERFINED"
)</a>

my_labels = {
    "seldon_deployment_name": os.environ.get(ENV_SELDON_DEPLOYMENT_NAME, "UNDEFINED"),
    "model_name": os.environ.get(ENV_MODEL_NAME, "UNDEFINED"),</code></pre><img src="149477416.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/SeldonIO/seldon-core/commit/cc7559e11767fa0d21f1b80fe86dae0cf74303c0#diff-3a0a4c2a605b10b60f28e55eb97c4d18aba9d02334d2deadff3832dd73339715L23' target='_blank'>Link</a></div><div id='project'> Project Name: SeldonIO/seldon-core</div><div id='commit'> Commit Name: cc7559e11767fa0d21f1b80fe86dae0cf74303c0</div><div id='time'> Time: 2020-03-23</div><div id='author'> Author: r.j.skolasinski@gmail.com</div><div id='file'> File Name: python/seldon_core/metrics.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: </div><BR><BR><div id='link'><a href='https://github.com/cmu-db/ottertune/commit/9393fb7aca75ea6934844de93c7d495aca3037b2#diff-c86d9ffe7860b4ea4b91f9cc1192d8d23808ee0970bc0e40bd156a7104d04e72L1077' target='_blank'>Link</a></div><div id='project'> Project Name: cmu-db/ottertune</div><div id='commit'> Commit Name: 9393fb7aca75ea6934844de93c7d495aca3037b2</div><div id='time'> Time: 2020-01-08</div><div id='author'> Author: dvanaken@cs.cmu.edu</div><div id='file'> File Name: server/website/website/views.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: give_result</div><BR><BR><div id='link'><a href='https://github.com/chakki-works/doccano/commit/7c0ff4479bf450eb04cccd32a0b4ed73b7e532c9#diff-7003b4cd1372c76461378255140cafa4c48dab0a8c47eddc4358d2233c26300dL90' target='_blank'>Link</a></div><div id='project'> Project Name: chakki-works/doccano</div><div id='commit'> Commit Name: 7c0ff4479bf450eb04cccd32a0b4ed73b7e532c9</div><div id='time'> Time: 2018-06-06</div><div id='author'> Author: light.tree.1.13@gmail.com</div><div id='file'> File Name: doccano/app/server/views.py</div><div id='class'> Class Name: LabelAPI</div><div id='method'> Method Name: post</div><BR>