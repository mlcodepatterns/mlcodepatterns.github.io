<html><h3>2784339dddeecd94dbab074140ba8e478b42f653,opennmt/decoders/self_attention_decoder.py,SelfAttentionDecoder,_run,#SelfAttentionDecoder#Any#Any#Any#Any#Any#Any#Any#,87
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        memory_sequence_length = (memory_sequence_length,)
      memory_mask = []
      for mem, mem_length in zip(memory, memory_sequence_length):
        mem_mask = <a id="change">tf.sequence_mask(mem_length, maxlen=tf.shape(mem)[1], dtype=tf.float32)</a>
        mem_mask = <a id="change">tf.expand_dims(mem_mask, 1)</a>
        memory_mask.append(mem_mask)

    &#47&#47 Run each layer.
    new_cache = []</code></pre><h3>After Change</h3><pre><code class='java'>
      if not isinstance(memory_sequence_length, (list, tuple)):
        memory_sequence_length = (memory_sequence_length,)
      memory_mask = [
          <a id="change">tf.sequence_mask(mem_length, maxlen=tf.shape(mem)[1])</a>
          for mem, mem_length in zip(memory, memory_sequence_length)]

    &#47&#47 Run each layer.
    new_cache = []</code></pre><img src="202016803.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/OpenNMT/OpenNMT-tf/commit/2784339dddeecd94dbab074140ba8e478b42f653#diff-c60905dae72132d03a5b0c8b514b10766b681565075afe76acedd57537c3f622L115' target='_blank'>Link</a></div><div id='project'> Project Name: OpenNMT/OpenNMT-tf</div><div id='commit'> Commit Name: 2784339dddeecd94dbab074140ba8e478b42f653</div><div id='time'> Time: 2019-08-29</div><div id='author'> Author: guillaume.klein@systrangroup.com</div><div id='file'> File Name: opennmt/decoders/self_attention_decoder.py</div><div id='class'> Class Name: SelfAttentionDecoder</div><div id='method'> Method Name: _run</div><BR><BR><div id='link'><a href='https://github.com/OpenNMT/OpenNMT-tf/commit/2784339dddeecd94dbab074140ba8e478b42f653#diff-61925983b612e8455a16b1b9d728efb902732d57051e2b6492d564a0b2ec472dL145' target='_blank'>Link</a></div><div id='project'> Project Name: OpenNMT/OpenNMT-tf</div><div id='commit'> Commit Name: 2784339dddeecd94dbab074140ba8e478b42f653</div><div id='time'> Time: 2019-08-29</div><div id='author'> Author: guillaume.klein@systrangroup.com</div><div id='file'> File Name: opennmt/tests/transformer_test.py</div><div id='class'> Class Name: TransformerTest</div><div id='method'> Method Name: testMultiHeadAttentionMask</div><BR><BR><div id='link'><a href='https://github.com/OpenNMT/OpenNMT-tf/commit/2784339dddeecd94dbab074140ba8e478b42f653#diff-61925983b612e8455a16b1b9d728efb902732d57051e2b6492d564a0b2ec472dL106' target='_blank'>Link</a></div><div id='project'> Project Name: OpenNMT/OpenNMT-tf</div><div id='commit'> Commit Name: 2784339dddeecd94dbab074140ba8e478b42f653</div><div id='time'> Time: 2019-08-29</div><div id='author'> Author: guillaume.klein@systrangroup.com</div><div id='file'> File Name: opennmt/tests/transformer_test.py</div><div id='class'> Class Name: TransformerTest</div><div id='method'> Method Name: testMultiHeadSelfAttention</div><BR><BR><div id='link'><a href='https://github.com/OpenNMT/OpenNMT-tf/commit/2784339dddeecd94dbab074140ba8e478b42f653#diff-61925983b612e8455a16b1b9d728efb902732d57051e2b6492d564a0b2ec472dL133' target='_blank'>Link</a></div><div id='project'> Project Name: OpenNMT/OpenNMT-tf</div><div id='commit'> Commit Name: 2784339dddeecd94dbab074140ba8e478b42f653</div><div id='time'> Time: 2019-08-29</div><div id='author'> Author: guillaume.klein@systrangroup.com</div><div id='file'> File Name: opennmt/tests/transformer_test.py</div><div id='class'> Class Name: TransformerTest</div><div id='method'> Method Name: testMultiHeadAttentionWithCache</div><BR><BR><div id='link'><a href='https://github.com/OpenNMT/OpenNMT-tf/commit/2784339dddeecd94dbab074140ba8e478b42f653#diff-61925983b612e8455a16b1b9d728efb902732d57051e2b6492d564a0b2ec472dL125' target='_blank'>Link</a></div><div id='project'> Project Name: OpenNMT/OpenNMT-tf</div><div id='commit'> Commit Name: 2784339dddeecd94dbab074140ba8e478b42f653</div><div id='time'> Time: 2019-08-29</div><div id='author'> Author: guillaume.klein@systrangroup.com</div><div id='file'> File Name: opennmt/tests/transformer_test.py</div><div id='class'> Class Name: TransformerTest</div><div id='method'> Method Name: testMultiHeadAttention</div><BR>