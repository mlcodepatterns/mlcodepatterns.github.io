<html><h3>20769173fc5100fd8b60ca7d77a0b7dd5d6225fd,skbio/tree/_nj.py,,_compute_q,#Any#,172
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    for i in range(n):
        for j in range(i):
            q[i, j] = q[j, i] = \
                <a id="change">((n - 2) * dm[i, j]) - dm[i].sum() - dm[j].sum()</a>
    return DistanceMatrix(q, dm.ids)


def _compute_collapsed_dm(dm, i, j, disallow_negative_branch_length,</code></pre><h3>After Change</h3><pre><code class='java'>
    q = np.zeros(dm.shape)
    n = dm.shape[0]
    dmv = dm.to_data_frame().values
    big_sum = <a id="change">np.array([dmv.sum(1)] * dm.shape[0])</a>
    <a id="change">big_sum_diffs = big_sum + big_sum.T</a>
    q = <a id="change">(n - 2) * dmv - big_sum_diffs</a>
    np.fill_diagonal(q, 0)
    return DistanceMatrix(q, dm.ids)

</code></pre><img src="294298219.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/biocore/scikit-bio/commit/20769173fc5100fd8b60ca7d77a0b7dd5d6225fd#diff-8de4b2aebf97ea186b62b8ed5946569ff3d13c245368f93836ecf699161d41cdL176' target='_blank'>Link</a></div><div id='project'> Project Name: biocore/scikit-bio</div><div id='commit'> Commit Name: 20769173fc5100fd8b60ca7d77a0b7dd5d6225fd</div><div id='time'> Time: 2017-04-24</div><div id='author'> Author: sdbrown@gmail.com</div><div id='file'> File Name: skbio/tree/_nj.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: _compute_q</div><BR><BR><div id='link'><a href='https://github.com/theislab/scanpy/commit/ee1ef70a4651670a146a65387b3d117099680aab#diff-c610e8f9cec5d1a5c19a8e7fe5734d840db0e007c275ba7bdca2f623954069c3L204' target='_blank'>Link</a></div><div id='project'> Project Name: theislab/scanpy</div><div id='commit'> Commit Name: ee1ef70a4651670a146a65387b3d117099680aab</div><div id='time'> Time: 2019-04-01</div><div id='author'> Author: malte.luecken@icb-lisa.scidom.de</div><div id='file'> File Name: scanpy/tools/_marker_gene_overlap.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: marker_gene_overlap</div><BR><BR><div id='link'><a href='https://github.com/astroML/astroML/commit/f388923837f92a9de81b97898eadde495353331b#diff-122c1355ed3ef969705713dddf92fa1753f8935cd2721ddfc41996f3f5735760L19' target='_blank'>Link</a></div><div id='project'> Project Name: astroML/astroML</div><div id='commit'> Commit Name: f388923837f92a9de81b97898eadde495353331b</div><div id='time'> Time: 2018-11-16</div><div id='author'> Author: bsipocz@gmail.com</div><div id='file'> File Name: astroML/density_estimation/gauss_mixture.py</div><div id='class'> Class Name: GaussianMixture1D</div><div id='method'> Method Name: __init__</div><BR>