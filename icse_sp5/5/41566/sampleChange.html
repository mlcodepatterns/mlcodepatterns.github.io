<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    @staticmethod
    def compute_perturbation_mask(aggregated_regions, ratio):
        &#47&#47 Get indices and values
        thresholds = <a id="change">np.percentile(aggregated_regions, math.ceil(100.0 * (1.0 - ratio)), axis=(1, 2, 3), keepdims=True)</a>
        <a id="change">perturbation_mask_regions = aggregated_regions &gt;= thresholds</a>

        return perturbation_mask_regions

    def expand_regions_to_pixels(self, regions):</code></pre><h3>After Change</h3><pre><code class='java'>
    @staticmethod
    def compute_perturbation_mask(aggregated_regions, num_perturbated_regions):
        &#47&#47 0 means highest scoring region
        order = np.argsort(-aggregated_regions.reshape(<a id="change">(*aggregated_regions.shape[:2], -1)</a>), axis=-1)
        <a id="change">ranks = order.argsort().reshape(aggregated_regions.shape)</a>
        perturbation_mask_regions = ranks &lt;= num_perturbated_regions - 1
        return perturbation_mask_regions

    def expand_regions_to_pixels(self, regions):</code></pre>