<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        y_proba.append(np.array(y_pr))
        score.append(accuracy_score(y_test, y_pr))

    <a id="change">for i in range(0, Random_Deep[2]):
        print("RNN ", i, "\n")
        model.append(Sequential())
        model[i], model_tmp = BuildModel.Image_model_RNN(number_of_classes, shape)

        filepath = "weights\weights_RNN_" + str(i) + ".hdf5"
        checkpoint = ModelCheckpoint(filepath, monitor=&quotval_acc&quot, verbose=1, save_best_only=True,
                                     mode=&quotmax&quot)
        callbacks_list = [checkpoint]

        history = model[i].fit(X_train, y_train, validation_data=(X_test, y_test),
                               epochs=n_epochs[2], batch_size=batch_size, verbose=2, callbacks=callbacks_list)
        model_tmp.load_weights(filepath)
        model_tmp.compile(loss=&quotsparse_categorical_crossentropy&quot,
                          optimizer=&quotrmsprop&quot,
                          metrics=[&quotaccuracy&quot])
        history_.append(history)

        y_pr = model_tmp.predict(X_test, batch_size=batch_size)
        y_pr = np.argmax(y_pr, axis=1)
        y_proba.append(np.array(y_pr))
        score.append(accuracy_score(y_test, y_pr))

    &#47&#47 reshape to be [samples][pixels][width][height]
   </a> i=0
    while i &lt; Random_Deep[1]:
        try:
            print("CNN ", i, "\n")</code></pre><h3>After Change</h3><pre><code class='java'>
            score.append(accuracy_score(y_test, y_pr))
            i = i+1
        except:
            <a id="change">print("Error in model ", i, "   try to re-generate an other model")</a>

    &#47&#47 reshape to be [samples][pixels][width][height]
    i=0
    while i &lt; Random_Deep[2]:</code></pre>