<html><h3>4cd9ec0f00788d08c053b885b5591fe134666a65,examples/training/train_ner.py,,main,#Any#Any#Any#,35
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        for itn in range(n_iter):
            random.shuffle(TRAIN_DATA)
            losses = {}
            <a id="change">for text, annotations in TRAIN_DATA:
                nlp.update(
                    [text],  &#47&#47 batch of texts
                    [annotations],  &#47&#47 batch of annotations
                    drop=0.5,  &#47&#47 dropout - make it harder to memorise data
                    sgd=optimizer,  &#47&#47 callable to update weights
                    losses=losses)
           </a> print(losses)

    &#47&#47 test the trained model
    for text, _ in TRAIN_DATA:</code></pre><h3>After Change</h3><pre><code class='java'>
            random.shuffle(TRAIN_DATA)
            losses = {}
            &#47&#47 batch up the examples using spaCy&quots minibatch
            <a id="change">batches = minibatch(TRAIN_DATA, size=compounding(4., 32., 1.001))</a>
            <a id="change">for batch in batches:
                texts, annotations = zip(*batch)
                nlp.update(
                    texts,  &#47&#47 batch of texts
                    annotations,  &#47&#47 batch of annotations
                    drop=0.5,  &#47&#47 dropout - make it harder to memorise data
                    sgd=optimizer,  &#47&#47 callable to update weights
                    losses=losses)
           </a> print(&quotLosses&quot, losses)

    &#47&#47 test the trained model
    for text, _ in TRAIN_DATA:</code></pre><img src="60139157.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 15</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/explosion/spaCy/commit/4cd9ec0f00788d08c053b885b5591fe134666a65#diff-40cf41c87dcc1337e2627a95a1425f5459dec9a29f67657bece49bc93a94a140L38' target='_blank'>Link</a></div><div id='project'> Project Name: explosion/spaCy</div><div id='commit'> Commit Name: 4cd9ec0f00788d08c053b885b5591fe134666a65</div><div id='time'> Time: 2018-10-09</div><div id='author'> Author: ines@ines.io</div><div id='file'> File Name: examples/training/train_ner.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: main</div><BR><BR><div id='link'><a href='https://github.com/explosion/spaCy/commit/4cd9ec0f00788d08c053b885b5591fe134666a65#diff-40cf41c87dcc1337e2627a95a1425f5459dec9a29f67657bece49bc93a94a140L38' target='_blank'>Link</a></div><div id='project'> Project Name: explosion/spaCy</div><div id='commit'> Commit Name: 4cd9ec0f00788d08c053b885b5591fe134666a65</div><div id='time'> Time: 2018-10-09</div><div id='author'> Author: ines@ines.io</div><div id='file'> File Name: examples/training/train_ner.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: main</div><BR><BR><div id='link'><a href='https://github.com/explosion/spaCy/commit/4cd9ec0f00788d08c053b885b5591fe134666a65#diff-33a1cc6c1790f178d97706937c661a6487fefbd6aba546dd0f3ea62e2847fc2fL53' target='_blank'>Link</a></div><div id='project'> Project Name: explosion/spaCy</div><div id='commit'> Commit Name: 4cd9ec0f00788d08c053b885b5591fe134666a65</div><div id='time'> Time: 2018-10-09</div><div id='author'> Author: ines@ines.io</div><div id='file'> File Name: examples/training/train_tagger.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: main</div><BR><BR><div id='link'><a href='https://github.com/explosion/spaCy/commit/4cd9ec0f00788d08c053b885b5591fe134666a65#diff-daa0c001f8a0d5dd3af6ffef6bdb2a2a4438a0e3bbf053deb73c1c421becc881L38' target='_blank'>Link</a></div><div id='project'> Project Name: explosion/spaCy</div><div id='commit'> Commit Name: 4cd9ec0f00788d08c053b885b5591fe134666a65</div><div id='time'> Time: 2018-10-09</div><div id='author'> Author: ines@ines.io</div><div id='file'> File Name: examples/training/train_parser.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: main</div><BR><BR><div id='link'><a href='https://github.com/explosion/spaCy/commit/4cd9ec0f00788d08c053b885b5591fe134666a65#diff-3cbe571eaaeab776410bdd07bcc649b1376b1bc23fe177a3615caf8ad7f2bdb0L79' target='_blank'>Link</a></div><div id='project'> Project Name: explosion/spaCy</div><div id='commit'> Commit Name: 4cd9ec0f00788d08c053b885b5591fe134666a65</div><div id='time'> Time: 2018-10-09</div><div id='author'> Author: ines@ines.io</div><div id='file'> File Name: examples/training/train_new_entity_type.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: main</div><BR><BR><div id='link'><a href='https://github.com/explosion/spaCy/commit/4cd9ec0f00788d08c053b885b5591fe134666a65#diff-527e15cf50f15a82b1e4f7bc372352ebaea49922b32a21f661ee57d3568882fbL69' target='_blank'>Link</a></div><div id='project'> Project Name: explosion/spaCy</div><div id='commit'> Commit Name: 4cd9ec0f00788d08c053b885b5591fe134666a65</div><div id='time'> Time: 2018-10-09</div><div id='author'> Author: ines@ines.io</div><div id='file'> File Name: examples/training/train_intent_parser.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: main</div><BR>