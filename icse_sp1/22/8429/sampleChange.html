<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        for itn in range(n_iter):
            random.shuffle(TRAIN_DATA)
            losses = {}
            <a id="change">for text, annotations in TRAIN_DATA:
                nlp.update(
                    [text],  &#47&#47 batch of texts
                    [annotations],  &#47&#47 batch of annotations
                    drop=0.5,  &#47&#47 dropout - make it harder to memorise data
                    sgd=optimizer,  &#47&#47 callable to update weights
                    losses=losses)
           </a> print(losses)

    &#47&#47 test the trained model
    for text, _ in TRAIN_DATA:</code></pre><h3>After Change</h3><pre><code class='java'>
            random.shuffle(TRAIN_DATA)
            losses = {}
            &#47&#47 batch up the examples using spaCy&quots minibatch
            <a id="change">batches = minibatch(TRAIN_DATA, size=compounding(4., 32., 1.001))</a>
            <a id="change">for batch in batches:
                texts, annotations = zip(*batch)
                nlp.update(
                    texts,  &#47&#47 batch of texts
                    annotations,  &#47&#47 batch of annotations
                    drop=0.5,  &#47&#47 dropout - make it harder to memorise data
                    sgd=optimizer,  &#47&#47 callable to update weights
                    losses=losses)
           </a> print(&quotLosses&quot, losses)

    &#47&#47 test the trained model
    for text, _ in TRAIN_DATA:</code></pre>