<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        Package.delete_local_file(pkg.get("mydataframe5.csv"))
        Package.delete_local_file(pkg.get("mydataframe6.tsv"))

        <a id="change">for lk, entry in pkg.walk():
            file_path = parse_file_url(urlparse(entry.physical_keys[0]))
            assert not (pathlib.Path(file_path)).exists(), "The serialization files should have been deleted"

            self.file_sweeper_path_list.append(file_path)


   </a> def test_tophash_changes(self):
        test_file = Path(&quottest.txt&quot)
        test_file.write_text(&quotasdf&quot, &quotutf-8&quot)
</code></pre><h3>After Change</h3><pre><code class='java'>
            patch(&quotquilt3.Package.build&quot) as build_mock:
            materialize_mock.return_value = pkg

            <a id="change">pkg.push(&quotQuilt/test_pkg_name&quot, &quots3://test-bucket&quot)</a>

        for lk in ["mydataframe1.parquet", "mydataframe2.csv", "mydataframe3.tsv"]:
            file_path = parse_file_url(urlparse(pkg.get(lk)))
            assert pathlib.Path(file_path).exists(), "These files should not have been deleted during push()"</code></pre>