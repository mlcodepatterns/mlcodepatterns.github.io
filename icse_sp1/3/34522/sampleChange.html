<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    &#47&#47find if have the same
    start_date_stamp=util_date_stamp(startDate)
    end_date_stamp=util_date_stamp(endDate)
    <a id="change">coll.find({&quotlast_trade_day&quot})</a>
    
    data=QAWind.get_stock_day(name,startDate,endDate)
    
    for i in range(0,len(data[0]),1):</code></pre><h3>After Change</h3><pre><code class='java'>
    if (coll.find({"code":name,"last_trade_day":{"$gte":int(end_date_stamp),"$lte":int(start_date_stamp)}}).count()==0):
        print(str(name)+&quot--&quot+str(startDate)+&quot--&quot+str(endDate))
        data=QAWind.get_stock_day(name,startDate,endDate)
        <a id="change">print(len(data[0]))</a>
        for i in range(0,len(data[0]),1):
            print(&quotnow saving=====&quot+str(name)+&quot===date====&quot+str(data[16][i]))
            &#47&#47sec_name,pre_close,open,high,close,volume,amt,dealnum,chg,pct_chg,swing,vwap,adjfactor,turn,free_turn,lastradeday_s,last_trade_day,rel_ipo_chg,rel_ipo_pct_chg,trade_status,susp_days,susp_reason,maxupordown,open3,high3,low3,close3
            coll.insert({&quotcode&quot:name,&quotname&quot:data[0][i],&quotpre_close&quot:data[1][i],&quotopen&quot:data[2][i],&quothigh&quot:data[3][i],&quotclose&quot:data[4][i],&quotvolume&quot:data[5][i],&quotamt&quot:data[6][i],&quotdealnum&quot:data[7][i],&quotchg&quot:data[8][i],&quotpct_chg&quot:data[9][i],&quotswing&quot:data[10][i],&quotvwap&quot:data[11][i],&quotadjfactor&quot:data[12][i],&quotturn&quot:data[13][i],&quotfree_turn&quot:data[14][i],&quotlastradeday_s&quot:data[15][i],&quotlast_trade_day&quot:data[16][i],&quotrel_ipo_chg&quot:data[17][i],&quotrel_ipo_pct_chg&quot:data[18][i],&quottrade_status&quot:data[19][i],&quotsusp_days&quot:data[20][i],&quotsusp_reason&quot:data[21][i],&quotmaxupordown&quot:data[22][i],&quotopen3&quot:data[23][i],&quothigh3&quot:data[24][i],&quotlow3&quot:data[25][i],&quotclose3&quot:data[26][i]})</code></pre>