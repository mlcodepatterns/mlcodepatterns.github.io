<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

def test_stacked_violin():
    adata = sc.datasets.krumsiek11()
    <a id="change">outfile = NamedTemporaryFile(suffix=&quot.png&quot, prefix=&quotscanpy_test_stacked_violin_&quot, delete=False)</a>
    sc.pl.stacked_violin(adata, adata.var_names, &quotcell_type&quot, use_raw=False, color=&quotblue&quot, show=False)

    pl.title("image may have cut labels.\nThis is ok for test")
    <a id="change">pl.savefig(outfile.name, dpi=80)</a>
    <a id="change">pl.close()
    re</a><a id="change">s = compare_images(ROOT + &quot/master_stacked_violin.png&quot, outfile.name, tolerance * 2)</a>

    assert res is None, res

    <a id="change">os.remove(outfile.name)</a>

    &#47&#47 test swapped axes
    sc.pl.stacked_violin(adata, adata.var_names, &quotcell_type&quot, use_raw=False,
                         swap_axes=True, figsize=(3, 5), show=False)
    <a id="change">pl.savefig(outfile.name, dpi=80)</a>
    <a id="change">pl.close()
    res = compare_images(ROOT + &quot/master_stacked_violin_swapped_axes.png&quot, outfile.name, tolerance * 2)</a>

    assert res is None, res

    <a id="change">os.remove(outfile.name)</a>


def test_violin():
    sc.pl.set_rcParams_defaults()</code></pre><h3>After Change</h3><pre><code class='java'>
    sc.pl.stacked_violin(adata, adata.var_names, &quotcell_type&quot, use_raw=False, color=&quotblue&quot, show=False)

    pl.title("image may have cut labels.\nThis is ok for test")
    <a id="change">save_and_compare_images(&quotmaster_stacked_violin&quot, tolerance=15)</a>

    &#47&#47 test swapped axes
    sc.pl.stacked_violin(adata, adata.var_names, &quotcell_type&quot, use_raw=False,
                         swap_axes=True, figsize=(3, 5), show=False)</code></pre>