<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                (end_time - start_time) / 3600.0])

            if batch_id % save_model_batch_num == 0:
                <a id="change">with open(os.path.join(save_model_dir, &quotloss.txt&quot), &quota&quot, encoding=&quotutf-8&quot) as f:
                    f.write(str(losses) + &quot\n&quot)
               </a> model_path = os.path.join(save_model_dir, &quotseq2seq_&quot + str(epoch) + &quot_&quot + str(batch_id) + &quot.model&quot)
                with open(model_path, &quotwb&quot) as f:
                    torch.save(model.state_dict(), f)
                    logger.info("Model save to " + model_path)</code></pre><h3>After Change</h3><pre><code class='java'>
            del logits, attn_, p_gen, loss_cv, loss

        with open(os.path.join(save_model_dir, &quotloss.txt&quot), &quota&quot, encoding=&quotutf-8&quot) as f:
            <a id="change">for i in losses:
                f.write(str(i) + &quot\n&quot)
       </a> model_path = os.path.join(save_model_dir, &quotseq2seq_&quot + str(epoch) + &quot_&quot + str(batch_id) + &quot.model&quot)
        with open(model_path, &quotwb&quot) as f:
            torch.save(model.state_dict(), f)
            logger.info("Model save to " + model_path)</code></pre>