<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        reward_type = &quotspeed&quot

        <a id="change">if reward_type == &quotspeed&quot:
            max_cost = np.array([self.env_params["target_velocity"]]*self.scenario.num_vehicles)
            max_cost = np.linalg.norm(max_cost)

            cost = state[0] - self.env_params["target_velocity"]
            cost = np.linalg.norm(cost)

            return max(max_cost - cost, 0)

        elif reward_type == &quotdistance&quot:
            distance = np.array([self.vehicles[veh_id]["absolute_position"] - self.initial_pos[veh_id]
                                 for veh_id in self.ids])

            return sum(distance)

   </a> def getState(self):
        
        See parent class
        The state is an array the velocities for each vehicle</code></pre><h3>After Change</h3><pre><code class='java'>
        
        See parent class
        
        <a id="change">vel = state[0]</a>

        if <a id="change">any(vel &lt; -100)</a> or kwargs["fail"]:
            return 0.0

        max_cost = np.array([self.env_params["target_velocity"]]*self.scenario.num_vehicles)</code></pre>