<html><h3>2593c5c7f473079153092e059ae18b253f33816d,chainer_/chainercv2/models/simplepose_coco.py,,_test,#,487
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        assert ((y.shape[0] == batch) and (y.shape[1] == keypoints) and (y.shape[2] == x.shape[2] // 4) and
                (y.shape[3] == x.shape[3] // 4))

        <a id="change">center = np.zeros((batch, 2), np.float32)</a>
        <a id="change">scale = np.ones((batch, 2), np.float32)</a>
        <a id="change">z, _ = net.calc_pose(y, center, scale)</a>
        assert (z.shape[0] == batch)


if __name__ == "__main__":</code></pre><h3>After Change</h3><pre><code class='java'>

    in_size = (256, 192)
    keypoints = 17
    <a id="change">return_heatmap = False</a>
    pretrained = False

    models = [
        simplepose_resnet18_coco,
        simplepose_resnet50b_coco,
        simplepose_resnet101b_coco,
        simplepose_resnet152b_coco,
        simplepose_resneta50b_coco,
        simplepose_resneta101b_coco,
        simplepose_resneta152b_coco,
    ]

    for model in models:

        net = model(pretrained=pretrained, in_size=in_size, return_heatmap=return_heatmap)
        weight_count = net.count_params()
        print("m={}, {}".format(model.__name__, weight_count))
        assert (model != simplepose_resnet18_coco or weight_count == 15376721)
        assert (model != simplepose_resnet50b_coco or weight_count == 33999697)
        assert (model != simplepose_resnet101b_coco or weight_count == 52991825)
        assert (model != simplepose_resnet152b_coco or weight_count == 68635473)
        assert (model != simplepose_resneta50b_coco or weight_count == 34018929)
        assert (model != simplepose_resneta101b_coco or weight_count == 53011057)
        assert (model != simplepose_resneta152b_coco or weight_count == 68654705)

        batch = 14
        x = np.random.rand(batch, 3, in_size[0], in_size[1]).astype(np.float32)
        y = net(x)
        assert ((y.shape[0] == batch) and (y.shape[1] == keypoints))
        <a id="change">if return_heatmap:
            assert ((y.shape[2] == x.shape[2] // 4) and (y.shape[3] == x.shape[3] // 4))
        else:
            assert (y.shape[2] == 3)


</a>if __name__ == "__main__":
    _test()
</code></pre><img src="190075316.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 11</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/osmr/imgclsmob/commit/2593c5c7f473079153092e059ae18b253f33816d#diff-d28586faf4e08fbfd83353e091747a84a11f4d13b5a4171d7f93137e984ab749L386' target='_blank'>Link</a></div><div id='project'> Project Name: osmr/imgclsmob</div><div id='commit'> Commit Name: 2593c5c7f473079153092e059ae18b253f33816d</div><div id='time'> Time: 2020-02-15</div><div id='author'> Author: osemery@gmail.com</div><div id='file'> File Name: chainer_/chainercv2/models/simplepose_coco.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: _test</div><BR><BR><div id='link'><a href='https://github.com/osmr/imgclsmob/commit/2593c5c7f473079153092e059ae18b253f33816d#diff-75e7ba0036b61cc3b55d5dee2fca8ec020a9c2b9a2debb87bca27d1454a055b5L500' target='_blank'>Link</a></div><div id='project'> Project Name: osmr/imgclsmob</div><div id='commit'> Commit Name: 2593c5c7f473079153092e059ae18b253f33816d</div><div id='time'> Time: 2020-02-15</div><div id='author'> Author: osemery@gmail.com</div><div id='file'> File Name: pytorch/pytorchcv/models/simplepose_coco.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: _test</div><BR><BR><div id='link'><a href='https://github.com/osmr/imgclsmob/commit/2593c5c7f473079153092e059ae18b253f33816d#diff-d28586faf4e08fbfd83353e091747a84a11f4d13b5a4171d7f93137e984ab749L487' target='_blank'>Link</a></div><div id='project'> Project Name: osmr/imgclsmob</div><div id='commit'> Commit Name: 2593c5c7f473079153092e059ae18b253f33816d</div><div id='time'> Time: 2020-02-15</div><div id='author'> Author: osemery@gmail.com</div><div id='file'> File Name: chainer_/chainercv2/models/simplepose_coco.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: _test</div><BR><BR><div id='link'><a href='https://github.com/osmr/imgclsmob/commit/2593c5c7f473079153092e059ae18b253f33816d#diff-babd1cb107645ce8da0d2d04751532e1492ffcf0fd054766040348feb1d8daa8L621' target='_blank'>Link</a></div><div id='project'> Project Name: osmr/imgclsmob</div><div id='commit'> Commit Name: 2593c5c7f473079153092e059ae18b253f33816d</div><div id='time'> Time: 2020-02-15</div><div id='author'> Author: osemery@gmail.com</div><div id='file'> File Name: tensorflow2/tf2cv/models/simplepose_coco.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: _test</div><BR>