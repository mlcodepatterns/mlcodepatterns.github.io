<html><h3>2665eecc8c29cae4e7a93ec587f5d59e916025e3,mvpa/tests/test_svm.py,SVMTests,testCperClass,#SVMTests#Any#,98
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            self.failUnless(cve.states.confusion.stats["P&quot"][1] &gt; 0)

        e = cve(ds_)
        <a id="change">if cfg.getboolean(&quottests&quot, &quotlabile&quot, default=&quotyes&quot):
            self.failUnless(cve.states.confusion.stats["P&quot"][1] &lt; 5,
                            msg="With disballance we should have almost no "
                            "hits. Got %f" % cve.states.confusion.stats["P&quot"][1])
            &#47&#47print "D:", cve.confusion.stats["P&quot"][1], cve.confusion.stats[&quotMCC&quot][1]

        &#47&#47 Set &quot1 C per label&quot
        &#47&#47 recreate cvte since previous might have operated on copies
       </a> cve = CrossValidatedTransferError(TransferError(clf), NFoldSplitter(),
                                          enable_states=&quotconfusion&quot)
        oldC = clf.params.C
        &#47&#47 TODO: provide clf.params.C not with a tuple but dictionary</code></pre><h3>After Change</h3><pre><code class='java'>

        &#47&#47 on disbalanced
        e = cve(ds_)
        <a id="change">tpr_2 =  cve.states.confusion.stats["TPR"][1]</a>

        &#47&#47 Set &quot1 C per label&quot
        &#47&#47 recreate cvte since previous might have operated on copies
        cve = CrossValidatedTransferError(TransferError(clf), NFoldSplitter(),
                                          enable_states=&quotconfusion&quot)
        oldC = clf.params.C
        &#47&#47 TODO: provide clf.params.C not with a tuple but dictionary
        &#47&#47       with C per label (now order is deduced in a cruel way)
        ratio = N.sqrt(float(spl[ds_.UL[0]])/spl[ds_.UL[1]])
        clf.params.C = (-1/ratio, -1*ratio)
        try:
            &#47&#47 on disbalanced but with balanced C
            e_ = cve(ds_)
            &#47&#47 reassign C
            clf.params.C = oldC
        except:
            clf.params.C = oldC
            raise
        tpr_3 = cve.states.confusion.stats["TPR"][1]

        &#47&#47 Actual tests
        if cfg.getboolean(&quottests&quot, &quotlabile&quot, default=&quotyes&quot):
            self.failUnless(tpr_1 &gt; 0.25,
                            msg="Without disballance we should have some "
                            "hits, but got TPR=%.3f" % tpr_1)

            <a id="change">self.failUnless(tpr_2 &lt; 0.25,
                            msg="With disballance we should have almost no "
                            "hits for minor, but got TPR=%.3f" % tpr_2)</a>

            self.failUnless(tpr_3 &gt; 0.25,
                            msg="With disballanced data but ratio-based Cs "
                            "we should have some hits for minor, but got "</code></pre><img src="91138606.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/PyMVPA/PyMVPA/commit/2665eecc8c29cae4e7a93ec587f5d59e916025e3#diff-f04f666e46d4ea7f1b1118feff313f4706b796da4d822f0768cd5da5fd0ef99cL94' target='_blank'>Link</a></div><div id='project'> Project Name: PyMVPA/PyMVPA</div><div id='commit'> Commit Name: 2665eecc8c29cae4e7a93ec587f5d59e916025e3</div><div id='time'> Time: 2009-12-17</div><div id='author'> Author: debian@onerussian.com</div><div id='file'> File Name: mvpa/tests/test_svm.py</div><div id='class'> Class Name: SVMTests</div><div id='method'> Method Name: testCperClass</div><BR><BR><div id='link'><a href='https://github.com/PyMVPA/PyMVPA/commit/b157150be42a40cd0bd9e7609caadb267133cd4c#diff-e2943af8afc38a124ed6a744959032b4fb8a8ff8fd9c8642d0ad516dcdcf54bcL23' target='_blank'>Link</a></div><div id='project'> Project Name: PyMVPA/PyMVPA</div><div id='commit'> Commit Name: b157150be42a40cd0bd9e7609caadb267133cd4c</div><div id='time'> Time: 2009-08-19</div><div id='author'> Author: debian@onerussian.com</div><div id='file'> File Name: mvpa/tests/test_procrust.py</div><div id='class'> Class Name: ProcrusteanMapperTests</div><div id='method'> Method Name: testSimple</div><BR><BR><div id='link'><a href='https://github.com/PyMVPA/PyMVPA/commit/7859ecea2734c65fa6eabb014b2936c5aebc5cb2#diff-26199baaf391361625bd6773b9df4ed2677df4680a9650d2731510adec4898eaL178' target='_blank'>Link</a></div><div id='project'> Project Name: PyMVPA/PyMVPA</div><div id='commit'> Commit Name: 7859ecea2734c65fa6eabb014b2936c5aebc5cb2</div><div id='time'> Time: 2007-11-07</div><div id='author'> Author: debian@onerussian.com</div><div id='file'> File Name: tests/test_dataset.py</div><div id='class'> Class Name: DatasetTests</div><div id='method'> Method Name: testZScoring</div><BR>