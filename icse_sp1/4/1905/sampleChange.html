<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        start_date=coll_stock_day.find({&quotcode&quot:str(item)[0:6]})[coll_stock_day.find({&quotcode&quot:str(item)[0:6]}).count()-1][&quotdate&quot]
        end_date=str(datetime.date.today())
        data=QATushare.QA_fetch_get_stock_day(str(item)[0:6],start_date,end_date)[1::]
        <a id="change">coll_stock_day.insert_many(data)</a>


def QA_update_standard_sql():
    print(&quot正在整理和更新数据,请稍等.....&quot)</code></pre><h3>After Change</h3><pre><code class='java'>

        QA_util_log_info(&quotupdating from %s to %s&quot %(start_date,end_date))
        data=QATushare.QA_fetch_get_stock_day(str(item)[0:6],start_date,end_date)[1::]
        <a id="change">try:
            coll_stock_day.insert_many(data)
        except:
            QA_util_log_info(&quoterror in updating--- %s&quot%item)
            


</a>def QA_update_standard_sql():
    print(&quot正在整理和更新数据,请稍等.....&quot)
    coll=pymongo.MongoClient().quantaxis.stock_day
    coll.ensure_index(&quotcode&quot)</code></pre>