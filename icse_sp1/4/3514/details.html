<html><h3>57905059321e5a4088cdb8e79048dfc6dc80d4ca,perfkitbenchmarker/linux_packages/mofed.py,,_Install,#Any#,40
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
  driver = MOFED_DRIVER.format(version=FLAGS.mofed_version,
                               os=MOFED_OS_MAPPING[vm.OS_TYPE])
  vm.InstallPackages(&quotlibdapl2 libmlx4-1&quot)
  <a id="change">try:
    vm.RemoteCommand(&quotcurl -fSsL {} | tar -zxpf -&quot.format(driver))
  except:
    raise errors.Setup.InvalidSetupError(&quotFailed to download {}&quot.format(driver))
 </a> stdout, _ = vm.RemoteCommand(&quotcd MLNX_OFED_LINUX-* && sudo ./mlnxofedinstall &quot
                               &quot--force&quot)
  if not regex_util.ExtractExactlyOneMatch(r&quotInstallation passed successfully&quot,
                                           stdout):</code></pre><h3>After Change</h3><pre><code class='java'>
                   "OS.UpdateRdmaDriver=y/g&quot /etc/waagent.conf")
  vm.Reboot()
  &#47&#47 Check IB status.
  stdout, _ = <a id="change">vm.RemoteCommand(&quotsudo ibdev2netdev -v&quot)</a>
  if &quotport 1 (ACTIVE) ==&gt; ib0 (Up)&quot not in stdout:
    raise errors.Benchmarks.PrepareException(&quotInfiniband is not up.&quot)

</code></pre><img src="23600232.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/GoogleCloudPlatform/PerfKitBenchmarker/commit/57905059321e5a4088cdb8e79048dfc6dc80d4ca#diff-a1b03b1ee8d0dcd07ac6eb5adc4d18ddc6c26ac0725f28d4d07f14a696f0a85fL43' target='_blank'>Link</a></div><div id='project'> Project Name: GoogleCloudPlatform/PerfKitBenchmarker</div><div id='commit'> Commit Name: 57905059321e5a4088cdb8e79048dfc6dc80d4ca</div><div id='time'> Time: 2021-03-06</div><div id='author'> Author: tohaowu@google.com</div><div id='file'> File Name: perfkitbenchmarker/linux_packages/mofed.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: _Install</div><BR><BR><div id='link'><a href='https://github.com/GoogleCloudPlatform/PerfKitBenchmarker/commit/9121332c18e024d417d1aeb189ec98f295ffc694#diff-a29314e7d057fc5691af87dc4fd861942233f2edfd1a1a157c9b061317e35806L49' target='_blank'>Link</a></div><div id='project'> Project Name: GoogleCloudPlatform/PerfKitBenchmarker</div><div id='commit'> Commit Name: 9121332c18e024d417d1aeb189ec98f295ffc694</div><div id='time'> Time: 2020-07-28</div><div id='author'> Author: chriswilkes@google.com</div><div id='file'> File Name: perfkitbenchmarker/linux_packages/epel_release.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: YumInstall</div><BR><BR><div id='link'><a href='https://github.com/GoogleCloudPlatform/PerfKitBenchmarker/commit/c27bc543680442ceb979c18738115b01dd963f28#diff-32287c2ce057866933afe81aca905e259cc12836164f2a0e2526fba718095630L70' target='_blank'>Link</a></div><div id='project'> Project Name: GoogleCloudPlatform/PerfKitBenchmarker</div><div id='commit'> Commit Name: c27bc543680442ceb979c18738115b01dd963f28</div><div id='time'> Time: 2019-04-29</div><div id='author'> Author: deitz@google.com</div><div id='file'> File Name: perfkitbenchmarker/linux_benchmarks/coremark_benchmark.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: Prepare</div><BR>