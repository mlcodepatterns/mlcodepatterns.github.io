<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                else:
                    room = self.client.join_room(target_room)

                <a id="change">_LOGGER.debug(room.send_text(message))</a>

            except MatrixRequestError as ex:
                _LOGGER.error(
                    "Unable to deliver message to room &quot%s&quot: (%d): %s",</code></pre><h3>After Change</h3><pre><code class='java'>
        Send the message to the matrix server.
        target_rooms = kwargs.get(ATTR_TARGET) or [self._default_room]

        <a id="change">service_data = {
            ATTR_TARGET: target_rooms,
            ATTR_MESSAGE: message
        }</a>

        return self.hass.services.call(
            DOMAIN, &quotsend_message&quot, service_data=service_data)
</code></pre>