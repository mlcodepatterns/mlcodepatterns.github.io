<html><h3>0ed3e9e8b5383390506772029f1afa9f1f90819f,demo_log_odds_ratio_prior.py,,,#,9
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                          nlp=nlp).build()

term_freq_df = corpus.get_term_freq_df()
frequencies_scaled = scale(np.log(<a id="change">term_freq_df</a>.sum(axis=1).values))
zeta_i_j = (LogOddsRatioUninformativeDirichletPrior()
            .get_zeta_i_j_given_separate_counts(term_freq_df[&quotdemocrat freq&quot],
                                                term_freq_df[&quotrepublican freq&quot]))
zeta_scaled_for_charting = scale_neg_1_to_1_with_zero_mean_abs_max(zeta_i_j)

<a id="change">html = produce_scattertext_explorer(corpus,
                                    category=&quotdemocrat&quot,
                                    category_name=&quotDemocratic&quot,
                                    not_category_name=&quotRepublican&quot,
                                    minimum_term_frequency=5,
                                    width_in_pixels=1000,
                                    x_coords=frequencies_scaled,
                                    y_coords=zeta_scaled_for_charting,
                                    scores=zeta_i_j,
                                    sort_by_dist=False,
                                    metadata=convention_df[&quotspeaker&quot],
                                    x_label=&quotLog Frequency&quot,
                                    y_label=&quotLog Odds Ratio w/ Prior (a_w=0.01)&quot)</a>
file_name = &quotdemo_log_odds_ratio_prior.html&quot
open(file_name, &quotwb&quot).write(html.encode(&quotutf-8&quot))
print(&quotOpen %s in Chrome or Firefox.&quot % file_name)
</code></pre><h3>After Change</h3><pre><code class='java'>
	.where(lambda x: x.corpus &gt; 0).dropna()
)
bg_df.background += bg_df.corpus
corpus_bg = corpus.remove_terms(set(corpus.get_terms()) - <a id="change">set(bg_df.index)</a>)
priors = (corpus_bg
	.get_term_and_background_counts()
	.reindex(corpus_bg.get_terms())[&quotbackground&quot]
)
<a id="change">term_scorer = LogOddsRatioInformativeDirichletPrior(priors.values, 10)</a>


tooltip_context = &quot&quot&quot(function(d) {
	return d.term+"&lt;br/&gt;Count ratio (per 25k): "+d.cat25k+":"+d.ncat25k+"&lt;br/&gt;Z-score: "+ Number(Math.round(d.os+&quote3&quot)+&quote-3&quot);</code></pre><img src="298093607.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/JasonKessler/scattertext/commit/0ed3e9e8b5383390506772029f1afa9f1f90819f#diff-81303de3446155c7ae61ab73dd3effdd4858cea4c6910456e346f22af7f17adcL7' target='_blank'>Link</a></div><div id='project'> Project Name: JasonKessler/scattertext</div><div id='commit'> Commit Name: 0ed3e9e8b5383390506772029f1afa9f1f90819f</div><div id='time'> Time: 2018-01-19</div><div id='author'> Author: jason.kessler@gmail.com</div><div id='file'> File Name: demo_log_odds_ratio_prior.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: </div><BR><BR><div id='link'><a href='https://github.com/automl/SMAC3/commit/2402c8a3c28f5c6faf9931fe97b6516b7c426edb#diff-244565a38aff38c39a86ad807cbebbf49048ec95d255c08bfae0bc73d9a46628L87' target='_blank'>Link</a></div><div id='project'> Project Name: automl/SMAC3</div><div id='commit'> Commit Name: 2402c8a3c28f5c6faf9931fe97b6516b7c426edb</div><div id='time'> Time: 2016-02-12</div><div id='author'> Author: lindauer@cs.uni-freiburg.de</div><div id='file'> File Name: smac/smbo/intensification.py</div><div id='class'> Class Name: Intensifier</div><div id='method'> Method Name: intensify</div><BR><BR><div id='link'><a href='https://github.com/bokeh/bokeh/commit/f1bc5b054e29f6d8e948fe7222936a2b0a975535#diff-8c8034050c128513566b612738fdfef538b7377a31a4f533dc7fef02b4bfcb9aL542' target='_blank'>Link</a></div><div id='project'> Project Name: bokeh/bokeh</div><div id='commit'> Commit Name: f1bc5b054e29f6d8e948fe7222936a2b0a975535</div><div id='time'> Time: 2019-10-07</div><div id='author'> Author: mattpap@gmail.com</div><div id='file'> File Name: bokeh/util/compiler.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: _bundle_models</div><BR><BR><div id='link'><a href='https://github.com/etal/cnvkit/commit/2654a34e8654f199e7d5f86d7115f3cb4233f2dc#diff-0ab1d37db7a49c9adeac416873f1556ffd9fcdfbeaeb7f74808ed3c0ce6c804eL241' target='_blank'>Link</a></div><div id='project'> Project Name: etal/cnvkit</div><div id='commit'> Commit Name: 2654a34e8654f199e7d5f86d7115f3cb4233f2dc</div><div id='time'> Time: 2016-12-01</div><div id='author'> Author: eric.talevich@gmail.com</div><div id='file'> File Name: cnvlib/tabio/vcfio.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: _extract_genotype</div><BR>