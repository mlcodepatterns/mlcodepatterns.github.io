<html><h3>8cef69efb71c8f26931f6e448057942ea2533676,metric_learn/itml.py,ITML,fit,#ITML#Any#Any#Any#Any#,68
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        _lambda[i] -= alpha
        beta = alpha/(1 - alpha*wtw)
        pos_bhat[i] = 1./((1 / pos_bhat[i]) + (alpha / gamma))
        A += beta * A.dot(<a id="change">np.outer(v,v)</a>).dot(A)

      &#47&#47 update negatives
      vv = self.X[c] - self.X[d]
      for i,v in enumerate(vv):
        wtw = v.dot(A).dot(v)  &#47&#47 scalar
        alpha = min(_lambda[i+num_pos],gamma_proj*(1./neg_bhat[i] - 1./wtw))
        <a id="change">_lambda[i+num_pos]</a> -= alpha
        beta = -alpha/(1 + alpha*wtw)
        neg_bhat[i] = 1./((1 / neg_bhat[i]) - (alpha / gamma))
        A += beta * A.dot(np.outer(v,v)).dot(A)</code></pre><h3>After Change</h3><pre><code class='java'>
        beta = alpha/(1 - alpha*wtw)
        pos_bhat[i] = 1./((1 / pos_bhat[i]) + (alpha / gamma))
        Av = A.dot(v)
        A += beta * <a id="change">np.outer(Av, Av)</a>

      &#47&#47 update negatives
      vv = self.X[c] - self.X[d]
      for i,v in enumerate(vv):
        wtw = v.dot(A).dot(v)  &#47&#47 scalar
        alpha = min(_lambda[i+num_pos],gamma_proj*(1./neg_bhat[i] - 1./wtw))
        <a id="change">_lambda[i+num_pos]</a> -= alpha
        beta = -alpha/(1 + alpha*wtw)
        neg_bhat[i] = 1./((1 / neg_bhat[i]) - (alpha / gamma))
        Av = A.dot(v)</code></pre><img src="325131025.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/metric-learn/metric-learn/commit/8cef69efb71c8f26931f6e448057942ea2533676#diff-d990e3e32fe0b4db8083f02085212f4efa31a9ac5b00d494fb2faf2547ab6d3fL93' target='_blank'>Link</a></div><div id='project'> Project Name: metric-learn/metric-learn</div><div id='commit'> Commit Name: 8cef69efb71c8f26931f6e448057942ea2533676</div><div id='time'> Time: 2017-01-31</div><div id='author'> Author: arikpoz@users.noreply.github.com</div><div id='file'> File Name: metric_learn/itml.py</div><div id='class'> Class Name: ITML</div><div id='method'> Method Name: fit</div><BR><BR><div id='link'><a href='https://github.com/drckf/paysage/commit/57bc6b1065b9ec11ffb5c6891a3d8c770f46a21e#diff-2c03f264daeda030e69e67cf895ddc8d6353d977f196d28f2bc90f0418c835f7L165' target='_blank'>Link</a></div><div id='project'> Project Name: drckf/paysage</div><div id='commit'> Commit Name: 57bc6b1065b9ec11ffb5c6891a3d8c770f46a21e</div><div id='time'> Time: 2017-04-12</div><div id='author'> Author: geminatea@gmail.com</div><div id='file'> File Name: paysage/models/tap_machine.py</div><div id='class'> Class Name: TAP_rbm</div><div id='method'> Method Name: gradient</div><BR><BR><div id='link'><a href='https://github.com/metric-learn/metric-learn/commit/9c68f7dd377c3e524807ad3b121f840f5623c028#diff-d990e3e32fe0b4db8083f02085212f4efa31a9ac5b00d494fb2faf2547ab6d3fL98' target='_blank'>Link</a></div><div id='project'> Project Name: metric-learn/metric-learn</div><div id='commit'> Commit Name: 9c68f7dd377c3e524807ad3b121f840f5623c028</div><div id='time'> Time: 2017-08-03</div><div id='author'> Author: bjoern.barz@uni-jena.de</div><div id='file'> File Name: metric_learn/itml.py</div><div id='class'> Class Name: ITML</div><div id='method'> Method Name: fit</div><BR>