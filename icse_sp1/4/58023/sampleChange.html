<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
  @staticmethod
  def _register(sourceroot):
    SourceRoot._ROOTS.add(sourceroot._basedir)
    <a id="change">if sourceroot._allowed_target_types is not None:
      SourceRoot._ALLOWED_TARGET_TYPES[sourceroot._basedir] = sourceroot._allowed_target_types


 </a> @staticmethod
  def find(target):
    Finds the source root for the given target.
</code></pre><h3>After Change</h3><pre><code class='java'>
    
    &#47&#47 Verify that source_root_dir doesn&quott reach outside buildroot.
    buildroot = get_buildroot()
    normpath = <a id="change">os.path.normpath(os.path.join(buildroot, source_root_dir))</a>
    if not normpath.startswith(buildroot):
      raise ValueError(&quotSource root %s is not under the build root %s&quot % (normpath, buildroot))

    SourceRoot._ROOTS.add(source_root_dir)</code></pre>