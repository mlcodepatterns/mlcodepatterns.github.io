<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        result = []
        for uploaded_file in request.FILES.values():
            new_staged_file = <a id="change">StagedFile.objects.create(
                    timeout=datetime.datetime.utcnow() + self.timeout,
                    file=uploaded_file
                )</a>
            result.append({
                "filename": uploaded_file.name,
                "uuid": new_staged_file.id,
                "extra_attrs": {}</code></pre><h3>After Change</h3><pre><code class='java'>
        if request.method != "POST":
            return HttpResponseBadRequest()

        <a id="change">csrf_token = request.META.get(&quotCSRF_COOKIE&quot, None)</a>
        if not csrf_token:
            return HttpResponseForbidden("CSRF token is missing")

        if "HTTP_CONTENT_RANGE" in request.META:</code></pre>