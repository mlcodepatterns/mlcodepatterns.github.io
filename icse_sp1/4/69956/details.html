<html><h3>d7148f390db12a3f7e4b43ab584648b2e4a1882d,pyro/distributions/spanning_tree.py,SpanningTree,log_partition_function,#SpanningTree#,109
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        shift = self.edge_logits.detach().max()
        edge_probs = (self.edge_logits - shift).exp()
        adjacency = torch.zeros(V, V, dtype=edge_probs.dtype)
        <a id="change">adjacency</a>[grid[0], grid[1]] = edge_probs
        adjacency[grid[1], grid[0]] = edge_probs
        laplacian = adjacency.sum(-1).diag() - adjacency
        truncated = laplacian[:-1, :-1]</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 See https://en.wikipedia.org/wiki/Kirchhoff%27s_theorem
        V = self.num_vertices
        v1, v2 = make_complete_graph(V).unbind(0)
        <a id="change">logits = self.edge_logits.new_full((V, V), -math.inf)</a>
        logits[v1, v2] = self.edge_logits
        logits[v2, v1] = self.edge_logits
        log_diag = logits.logsumexp(-1)
        &#47&#47 Numerically stabilize so that laplacian has 1&quots on the diagonal.</code></pre><img src="320867489.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/uber/pyro/commit/d7148f390db12a3f7e4b43ab584648b2e4a1882d#diff-2961f8062e8cfa849cb6f357c7877d5438bdd5b9c9995adfddf2d2c045c94df3L109' target='_blank'>Link</a></div><div id='project'> Project Name: uber/pyro</div><div id='commit'> Commit Name: d7148f390db12a3f7e4b43ab584648b2e4a1882d</div><div id='time'> Time: 2020-11-07</div><div id='author'> Author: fritz.obermeyer@gmail.com</div><div id='file'> File Name: pyro/distributions/spanning_tree.py</div><div id='class'> Class Name: SpanningTree</div><div id='method'> Method Name: log_partition_function</div><BR><BR><div id='link'><a href='https://github.com/rusty1s/pytorch_geometric/commit/46887e49fe301323e82a258a8063db846ac63339#diff-5a3ff3c23c646498cef2b9a1ac6a17913aa03b45ff853d944a0fd546014109a9L12' target='_blank'>Link</a></div><div id='project'> Project Name: rusty1s/pytorch_geometric</div><div id='commit'> Commit Name: 46887e49fe301323e82a258a8063db846ac63339</div><div id='time'> Time: 2018-11-16</div><div id='author'> Author: matthias.fey@tu-dortmund.de</div><div id='file'> File Name: torch_geometric/nn/prop/gcn_prop.py</div><div id='class'> Class Name: GCNProp</div><div id='method'> Method Name: forward</div><BR><BR><div id='link'><a href='https://github.com/open-mmlab/mmdetection/commit/b69667001f250a54a37129a000a8d5160e047239#diff-d6cb38b54ccbc7b6432bd8c6fe8599f1eb577fab627d70e0a2a5e2ac9f091e1bL48' target='_blank'>Link</a></div><div id='project'> Project Name: open-mmlab/mmdetection</div><div id='commit'> Commit Name: b69667001f250a54a37129a000a8d5160e047239</div><div id='time'> Time: 2019-12-24</div><div id='author'> Author: erotemic@gmail.com</div><div id='file'> File Name: mmdet/core/bbox/assigners/point_assigner.py</div><div id='class'> Class Name: PointAssigner</div><div id='method'> Method Name: assign</div><BR><BR><div id='link'><a href='https://github.com/rusty1s/pytorch_geometric/commit/653be87728a9420fbd980d0d6024451c892ef721#diff-76d6eb399829f57f7b5d5b4beecffcba1821018d499de843c31eca6ab0f6813dL24' target='_blank'>Link</a></div><div id='project'> Project Name: rusty1s/pytorch_geometric</div><div id='commit'> Commit Name: 653be87728a9420fbd980d0d6024451c892ef721</div><div id='time'> Time: 2019-01-28</div><div id='author'> Author: matthias.fey@tu-dortmund.de</div><div id='file'> File Name: torch_geometric/nn/glob/sort.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: global_sort_pool</div><BR>