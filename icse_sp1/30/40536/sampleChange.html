<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                embeddings = nn.Embedding(
                    len(self.dictionary), self.opt["embedding_size"]
                )
            <a id="change">self.context_encoder</a> = <a id="change">TransformerEncoder(
                n_heads=self.opt["n_heads"],
                n_layers=self.opt["n_layers"],
                embedding_size=self.opt["embedding_size"],
                ffn_size=self.opt["ffn_size"],
                vocabulary_size=len(self.dictionary),
                embedding=embeddings,
                dropout=self.opt["dropout"],
                attention_dropout=self.opt["attention_dropout"],
                relu_dropout=self.opt["relu_dropout"],
                padding_idx=self.dictionary.tok2ind[self.dictionary.null_token],
                learn_positional_embeddings=self.opt["learn_positional_embeddings"],
                embeddings_scale=False,
                n_positions=self.opt["n_positions"],
                activation=self.opt["activation"],
                variant=self.opt["variant"],
                n_segments=self.opt["n_segments"],
            )</a>
            if self.opt.get("load_context_encoder_from") is not None:
                self._load_context_encoder_state()

    def forward(</code></pre><h3>After Change</h3><pre><code class='java'>
                embeddings = nn.Embedding(
                    len(self.dictionary), self.opt["embedding_size"]
                )
            <a id="change">self.context_encoder</a> = <a id="change">TransformerEncoder(
                opt=self.opt,
                embedding=embeddings,
                vocabulary_size=len(self.dictionary),
                padding_idx=self.dictionary.tok2ind[self.dictionary.null_token],
                embeddings_scale=False,
            )</a>
            if self.opt.get("load_context_encoder_from") is not None:
                self._load_context_encoder_state()

    def forward(</code></pre>