<html><h3>dbcf394afeae6a2ee11c5338d4918cc6ef107264,QUANTAXIS/QAFetch/QATdx.py,,QA_fetch_depth_market_data,#Any#Any#Any#,454
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

def QA_fetch_depth_market_data(code=[&quot000001&quot, &quot000002&quot], ip=None, port=None):
    global best_ip
    <a id="change">if ip is None and port is None and best_ip[&quotstock&quot][&quotip&quot] is None and best_ip[&quotstock&quot][&quotport&quot] is None:
        best_ip = select_best_ip()
        ip = best_ip[&quotstock&quot][&quotip&quot]
        port = best_ip[&quotstock&quot][&quotport&quot]
    elif ip is None and port is None and best_ip[&quotstock&quot][&quotip&quot] is not None and best_ip[&quotstock&quot][&quotport&quot] is not None:
        ip = best_ip[&quotstock&quot][&quotip&quot]
        port = best_ip[&quotstock&quot][&quotport&quot]
    else:
        pass
   </a> api = TdxHq_API()
    __data = pd.DataFrame()
    with api.connect(ip, port):
        code = [code] if type(code) is str else code</code></pre><h3>After Change</h3><pre><code class='java'>


def QA_fetch_depth_market_data(code=[&quot000001&quot, &quot000002&quot], ip=None, port=None):
    <a id="change">ip, port = get_mainmarket_ip(ip, port)</a>
    api = TdxHq_API()
    __data = pd.DataFrame()
    with api.connect(ip, port):
        code = [code] if type(code) is str else code</code></pre><img src="135436562.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 14</div><BR><div id='size'>Non-data size: 38</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/QUANTAXIS/QUANTAXIS/commit/dbcf394afeae6a2ee11c5338d4918cc6ef107264#diff-7538796d81070eb61c412c7e400354e806e119db3631c605c42534812a98f417L439' target='_blank'>Link</a></div><div id='project'> Project Name: QUANTAXIS/QUANTAXIS</div><div id='commit'> Commit Name: dbcf394afeae6a2ee11c5338d4918cc6ef107264</div><div id='time'> Time: 2018-06-28</div><div id='author'> Author: yutiansut@qq.com</div><div id='file'> File Name: QUANTAXIS/QAFetch/QATdx.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: QA_fetch_depth_market_data</div><BR><BR><div id='link'><a href='https://github.com/QUANTAXIS/QUANTAXIS/commit/dbcf394afeae6a2ee11c5338d4918cc6ef107264#diff-7538796d81070eb61c412c7e400354e806e119db3631c605c42534812a98f417L406' target='_blank'>Link</a></div><div id='project'> Project Name: QUANTAXIS/QUANTAXIS</div><div id='commit'> Commit Name: dbcf394afeae6a2ee11c5338d4918cc6ef107264</div><div id='time'> Time: 2018-06-28</div><div id='author'> Author: yutiansut@qq.com</div><div id='file'> File Name: QUANTAXIS/QAFetch/QATdx.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: QA_fetch_get_stock_latest</div><BR><BR><div id='link'><a href='https://github.com/QUANTAXIS/QUANTAXIS/commit/dbcf394afeae6a2ee11c5338d4918cc6ef107264#diff-7538796d81070eb61c412c7e400354e806e119db3631c605c42534812a98f417L536' target='_blank'>Link</a></div><div id='project'> Project Name: QUANTAXIS/QUANTAXIS</div><div id='commit'> Commit Name: dbcf394afeae6a2ee11c5338d4918cc6ef107264</div><div id='time'> Time: 2018-06-28</div><div id='author'> Author: yutiansut@qq.com</div><div id='file'> File Name: QUANTAXIS/QAFetch/QATdx.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: QA_fetch_get_stock_list</div><BR><BR><div id='link'><a href='https://github.com/QUANTAXIS/QUANTAXIS/commit/dbcf394afeae6a2ee11c5338d4918cc6ef107264#diff-7538796d81070eb61c412c7e400354e806e119db3631c605c42534812a98f417L803' target='_blank'>Link</a></div><div id='project'> Project Name: QUANTAXIS/QUANTAXIS</div><div id='commit'> Commit Name: dbcf394afeae6a2ee11c5338d4918cc6ef107264</div><div id='time'> Time: 2018-06-28</div><div id='author'> Author: yutiansut@qq.com</div><div id='file'> File Name: QUANTAXIS/QAFetch/QATdx.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: QA_fetch_get_stock_info</div><BR><BR><div id='link'><a href='https://github.com/QUANTAXIS/QUANTAXIS/commit/dbcf394afeae6a2ee11c5338d4918cc6ef107264#diff-7538796d81070eb61c412c7e400354e806e119db3631c605c42534812a98f417L428' target='_blank'>Link</a></div><div id='project'> Project Name: QUANTAXIS/QUANTAXIS</div><div id='commit'> Commit Name: dbcf394afeae6a2ee11c5338d4918cc6ef107264</div><div id='time'> Time: 2018-06-28</div><div id='author'> Author: yutiansut@qq.com</div><div id='file'> File Name: QUANTAXIS/QAFetch/QATdx.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: QA_fetch_get_stock_realtime</div><BR><BR><div id='link'><a href='https://github.com/QUANTAXIS/QUANTAXIS/commit/dbcf394afeae6a2ee11c5338d4918cc6ef107264#diff-7538796d81070eb61c412c7e400354e806e119db3631c605c42534812a98f417L454' target='_blank'>Link</a></div><div id='project'> Project Name: QUANTAXIS/QUANTAXIS</div><div id='commit'> Commit Name: dbcf394afeae6a2ee11c5338d4918cc6ef107264</div><div id='time'> Time: 2018-06-28</div><div id='author'> Author: yutiansut@qq.com</div><div id='file'> File Name: QUANTAXIS/QAFetch/QATdx.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: QA_fetch_depth_market_data</div><BR><BR><div id='link'><a href='https://github.com/QUANTAXIS/QUANTAXIS/commit/dbcf394afeae6a2ee11c5338d4918cc6ef107264#diff-7538796d81070eb61c412c7e400354e806e119db3631c605c42534812a98f417L120' target='_blank'>Link</a></div><div id='project'> Project Name: QUANTAXIS/QUANTAXIS</div><div id='commit'> Commit Name: dbcf394afeae6a2ee11c5338d4918cc6ef107264</div><div id='time'> Time: 2018-06-28</div><div id='author'> Author: yutiansut@qq.com</div><div id='file'> File Name: QUANTAXIS/QAFetch/QATdx.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: QA_fetch_get_security_bars</div><BR><BR><div id='link'><a href='https://github.com/QUANTAXIS/QUANTAXIS/commit/dbcf394afeae6a2ee11c5338d4918cc6ef107264#diff-7538796d81070eb61c412c7e400354e806e119db3631c605c42534812a98f417L768' target='_blank'>Link</a></div><div id='project'> Project Name: QUANTAXIS/QUANTAXIS</div><div id='commit'> Commit Name: dbcf394afeae6a2ee11c5338d4918cc6ef107264</div><div id='time'> Time: 2018-06-28</div><div id='author'> Author: yutiansut@qq.com</div><div id='file'> File Name: QUANTAXIS/QAFetch/QATdx.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: QA_fetch_get_stock_xdxr</div><BR><BR><div id='link'><a href='https://github.com/QUANTAXIS/QUANTAXIS/commit/dbcf394afeae6a2ee11c5338d4918cc6ef107264#diff-7538796d81070eb61c412c7e400354e806e119db3631c605c42534812a98f417L621' target='_blank'>Link</a></div><div id='project'> Project Name: QUANTAXIS/QUANTAXIS</div><div id='commit'> Commit Name: dbcf394afeae6a2ee11c5338d4918cc6ef107264</div><div id='time'> Time: 2018-06-28</div><div id='author'> Author: yutiansut@qq.com</div><div id='file'> File Name: QUANTAXIS/QAFetch/QATdx.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: QA_fetch_get_index_min</div><BR><BR><div id='link'><a href='https://github.com/QUANTAXIS/QUANTAXIS/commit/dbcf394afeae6a2ee11c5338d4918cc6ef107264#diff-7538796d81070eb61c412c7e400354e806e119db3631c605c42534812a98f417L576' target='_blank'>Link</a></div><div id='project'> Project Name: QUANTAXIS/QUANTAXIS</div><div id='commit'> Commit Name: dbcf394afeae6a2ee11c5338d4918cc6ef107264</div><div id='time'> Time: 2018-06-28</div><div id='author'> Author: yutiansut@qq.com</div><div id='file'> File Name: QUANTAXIS/QAFetch/QATdx.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: QA_fetch_get_index_day</div><BR><BR><div id='link'><a href='https://github.com/QUANTAXIS/QUANTAXIS/commit/dbcf394afeae6a2ee11c5338d4918cc6ef107264#diff-7538796d81070eb61c412c7e400354e806e119db3631c605c42534812a98f417L740' target='_blank'>Link</a></div><div id='project'> Project Name: QUANTAXIS/QUANTAXIS</div><div id='commit'> Commit Name: dbcf394afeae6a2ee11c5338d4918cc6ef107264</div><div id='time'> Time: 2018-06-28</div><div id='author'> Author: yutiansut@qq.com</div><div id='file'> File Name: QUANTAXIS/QAFetch/QATdx.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: QA_fetch_get_stock_transaction_realtime</div><BR><BR><div id='link'><a href='https://github.com/QUANTAXIS/QUANTAXIS/commit/dbcf394afeae6a2ee11c5338d4918cc6ef107264#diff-7538796d81070eb61c412c7e400354e806e119db3631c605c42534812a98f417L699' target='_blank'>Link</a></div><div id='project'> Project Name: QUANTAXIS/QUANTAXIS</div><div id='commit'> Commit Name: dbcf394afeae6a2ee11c5338d4918cc6ef107264</div><div id='time'> Time: 2018-06-28</div><div id='author'> Author: yutiansut@qq.com</div><div id='file'> File Name: QUANTAXIS/QAFetch/QATdx.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: QA_fetch_get_stock_transaction</div><BR><BR><div id='link'><a href='https://github.com/QUANTAXIS/QUANTAXIS/commit/dbcf394afeae6a2ee11c5338d4918cc6ef107264#diff-7538796d81070eb61c412c7e400354e806e119db3631c605c42534812a98f417L359' target='_blank'>Link</a></div><div id='project'> Project Name: QUANTAXIS/QUANTAXIS</div><div id='commit'> Commit Name: dbcf394afeae6a2ee11c5338d4918cc6ef107264</div><div id='time'> Time: 2018-06-28</div><div id='author'> Author: yutiansut@qq.com</div><div id='file'> File Name: QUANTAXIS/QAFetch/QATdx.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: QA_fetch_get_stock_min</div><BR><BR><div id='link'><a href='https://github.com/QUANTAXIS/QUANTAXIS/commit/dbcf394afeae6a2ee11c5338d4918cc6ef107264#diff-7538796d81070eb61c412c7e400354e806e119db3631c605c42534812a98f417L169' target='_blank'>Link</a></div><div id='project'> Project Name: QUANTAXIS/QUANTAXIS</div><div id='commit'> Commit Name: dbcf394afeae6a2ee11c5338d4918cc6ef107264</div><div id='time'> Time: 2018-06-28</div><div id='author'> Author: yutiansut@qq.com</div><div id='file'> File Name: QUANTAXIS/QAFetch/QATdx.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: QA_fetch_get_stock_day</div><BR><BR><div id='link'><a href='https://github.com/QUANTAXIS/QUANTAXIS/commit/dbcf394afeae6a2ee11c5338d4918cc6ef107264#diff-7538796d81070eb61c412c7e400354e806e119db3631c605c42534812a98f417L821' target='_blank'>Link</a></div><div id='project'> Project Name: QUANTAXIS/QUANTAXIS</div><div id='commit'> Commit Name: dbcf394afeae6a2ee11c5338d4918cc6ef107264</div><div id='time'> Time: 2018-06-28</div><div id='author'> Author: yutiansut@qq.com</div><div id='file'> File Name: QUANTAXIS/QAFetch/QATdx.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: QA_fetch_get_stock_block</div><BR>