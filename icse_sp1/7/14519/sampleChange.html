<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    &#47&#47print(index[0:5])
    &#47&#47 good index
    good_index = [i for i,x in enumerate(gl) if (x==ql and gc[i]!=qc )]
    junk_index1 = <a id="change">[i for i,x in enumerate(gl) if (x==-2) ]</a>
    junk_index2 = [i <a id="change">for</a> i,x in enumerate(gl) if (x==ql and gc[i]==qc )]
    <a id="change">junk_index = junk_index2 + junk_index1</a>
    &#47&#47print(len(junk_index))
    CMC_tmp = compute_mAP(index, good_index, junk_index)
    return CMC_tmp
</code></pre><h3>After Change</h3><pre><code class='java'>
&#47&#47 Evaluate
def evaluate(qf,ql,qc,gf,gl,gc):
    query = qf
    <a id="change">score = np.dot(gf,query)</a>
    &#47&#47 predict index
    index = np.argsort(score)  &#47&#47from small to large
    index = index[::-1]
    &#47&#47index = index[0:2000]</code></pre>