<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
def setup_platform(hass, config, add_entities, discovery_info=None):
    Setup the APCUPSd sensor.
    typ = config.get(apcupsd.CONF_TYPE)
    <a id="change">if typ is None:
        _LOGGER.error(
            "You must include a &quot%s&quot when configuring an APCUPSd sensor.",
            apcupsd.CONF_TYPE)
        return False
   </a> typ = typ.upper()

    if typ not in apcupsd.DATA.status:
        _LOGGER.error(
            "Specified &quot%s&quot of &quot%s&quot does not appear in the APCUPSd status "
            "output.", apcupsd.CONF_TYPE, typ)
        return False

    <a id="change">add_entities((
        Sensor(config, apcupsd.DATA, unit=SPECIFIC_UNITS.get(typ)),
    ))</a>


def infer_unit(value):
    If the value ends with any of the units from ALL_UNITS.</code></pre><h3>After Change</h3><pre><code class='java'>
        sensor_type = resource.lower()

        if sensor_type not in SENSOR_TYPES:
            SENSOR_TYPES[sensor_type] = <a id="change">[
                sensor_type.title(), &quot&quot, &quotmdi:information-outline&quot]</a>

        if sensor_type.upper() not in apcupsd.DATA.status:
            _LOGGER.warning(
                &quotSensor type: "%s" does not appear in the APCUPSd status &quot</code></pre>