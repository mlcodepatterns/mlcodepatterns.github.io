<html><h3>e822a02daa1cd1c42f6d2bf309d5996a21979ef1,qucumber/tests/test_grads_positive.py,,algorithmic_gradKL,#Any#Any#Any#,75
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    Z = partition(nn_state,vis)
    for i in range(len(vis)):
        for rbmType in nn_state.gradient(vis[i]):
            <a id="change">for pars in nn_state.gradient(vis[i])[rbmType]:
                grad_KL[rbmType][pars] += ((target_psi[i,0])**2)*nn_state.gradient(vis[i])[rbmType][pars]            
                grad_KL[rbmType][pars] -= probability(nn_state,vis[i], Z)*nn_state.gradient(vis[i])[rbmType][pars]
   </a> return grad_KL            

def algorithmic_gradNLL(qr,data,k):
    qr.nn_state.set_visible_layer(data)</code></pre><h3>After Change</h3><pre><code class='java'>
    grad_KL = torch.zeros(nn_state.rbm_am.num_pars,dtype=torch.double)
    for i in range(len(vis)):
        grad_KL += ((target_psi[i,0])**2)*nn_state.gradient(vis[i]) 
        grad_KL -=probability(nn_state,vis[i], Z)*<a id="change">nn_state.gradient(vis[i])</a>
        &#47&#47for rbmType in nn_state.gradient(vis[i]):
        &#47&#47    for pars in nn_state.gradient(vis[i])[rbmType]:
        &#47&#47        grad_KL[rbmType][pars] += ((target_psi[i,0])**2)*nn_state.gradient(vis[i])[rbmType][pars]            
        &#47&#47        grad_KL[rbmType][pars] -= probability(nn_state,vis[i], Z)*nn_state.gradient(vis[i])[rbmType][pars]</code></pre><img src="195144960.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/PIQuIL/QuCumber/commit/e822a02daa1cd1c42f6d2bf309d5996a21979ef1#diff-d6b580fb81123005c59f9774718c0f01bc31ff6eea0be625ce99d2b85f5747a5L76' target='_blank'>Link</a></div><div id='project'> Project Name: PIQuIL/QuCumber</div><div id='commit'> Commit Name: e822a02daa1cd1c42f6d2bf309d5996a21979ef1</div><div id='time'> Time: 2018-07-31</div><div id='author'> Author: gtorlai@uwaterloo.ca</div><div id='file'> File Name: qucumber/tests/test_grads_positive.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: algorithmic_gradKL</div><BR><BR><div id='link'><a href='https://github.com/PIQuIL/QuCumber/commit/b11d724e27ce608da0b38565f2a697b1da98d799#diff-ef251de1419577af4a10e0c40393f8f877a610257eae232bc4d877dfb2433882L49' target='_blank'>Link</a></div><div id='project'> Project Name: PIQuIL/QuCumber</div><div id='commit'> Commit Name: b11d724e27ce608da0b38565f2a697b1da98d799</div><div id='time'> Time: 2018-07-29</div><div id='author'> Author: gtorlai@uwaterloo.ca</div><div id='file'> File Name: qucumber/quantum_reconstruction.py</div><div id='class'> Class Name: QuantumReconstruction</div><div id='method'> Method Name: compute_batch_gradients</div><BR><BR><div id='link'><a href='https://github.com/PIQuIL/QuCumber/commit/6aba6ab3264e8ecd7bdb7b46059480d0eb1ecca4#diff-ef251de1419577af4a10e0c40393f8f877a610257eae232bc4d877dfb2433882L50' target='_blank'>Link</a></div><div id='project'> Project Name: PIQuIL/QuCumber</div><div id='commit'> Commit Name: 6aba6ab3264e8ecd7bdb7b46059480d0eb1ecca4</div><div id='time'> Time: 2018-07-26</div><div id='author'> Author: gtorlai@uwaterloo.ca</div><div id='file'> File Name: qucumber/quantum_reconstruction.py</div><div id='class'> Class Name: QuantumReconstruction</div><div id='method'> Method Name: compute_batch_gradients</div><BR>