<html><h3>d97188ee62bc0627235578485c5df7d3245fa1ed,example6.py,,,#,14
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        316, 245, 232, 175, 149, 263, 387, 283, 391, 211, 396, 352, 345, 258, 253, 163, 140, 293, 194, 342, 161, 358,
        271, 156, 260, 384, 153, 277, 214]

<a id="change">laws_str = [str(x) for x in laws]</a>


def get_encodes(x):
    &#47&#47 x is `batch_size` of lines, each of which is a json object</code></pre><h3>After Change</h3><pre><code class='java'>
with open(&quotREADME.md&quot) as fp:
    data = [v for v in fp if v.strip()]
    bc = BertClient()
    list_vec = <a id="change">bc.encode(data)</a>
    <a id="change">list_label = [0 for _ in data]</a>  &#47&#47 a dummy list of all-zero labels

&#47&#47 write tfrecords

with tf.python_io.TFRecordWriter(&quottmp.tfrecord&quot) as writer:
    def create_float_feature(values):
        return tf.train.Feature(float_list=tf.train.FloatList(value=values))


    def create_int_feature(values):
        return tf.train.Feature(int64_list=tf.train.Int64List(value=list(values)))


    <a id="change">for (vec, label) in zip(list_vec, list_label):
        features = {&quotfeatures&quot: create_float_feature(vec), &quotlabels&quot: create_int_feature([label])}
        tf_example = tf.train.Example(features=tf.train.Features(feature=features))
        writer.write(tf_example.SerializeToString())

&#47&#47 read tfrecords and build dataset from it

</a>num_hidden_unit = 768


def _decode_record(record):</code></pre><img src="208046499.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 6</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/hanxiao/bert-as-service/commit/d97188ee62bc0627235578485c5df7d3245fa1ed#diff-a5b9e32145b731f1008a42b8d0d8d8331471eb5371644c290f4c48dc4893b26dL17' target='_blank'>Link</a></div><div id='project'> Project Name: hanxiao/bert-as-service</div><div id='commit'> Commit Name: d97188ee62bc0627235578485c5df7d3245fa1ed</div><div id='time'> Time: 2018-12-02</div><div id='author'> Author: hanhxiao@tencent.com</div><div id='file'> File Name: example6.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: </div><BR><BR><div id='link'><a href='https://github.com/CyberReboot/poseidon/commit/262f2dd76cd516d0be4a73e87e72a39938a18795#diff-126755a652c0abd93f5fbcda5cced27f41b086411cc48c0e4767d5e7cfe1dbc3L189' target='_blank'>Link</a></div><div id='project'> Project Name: CyberReboot/poseidon</div><div id='commit'> Commit Name: 262f2dd76cd516d0be4a73e87e72a39938a18795</div><div id='time'> Time: 2016-08-10</div><div id='author'> Author: tlanham@cs.stanford.edu</div><div id='file'> File Name: poseidon/poseidonStorage/test_poseidonStorage.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: test_db_add_many_docs</div><BR><BR><div id='link'><a href='https://github.com/CyberReboot/poseidon/commit/ec8602f95ff5916925c54a9adfc867112b2d5b70#diff-126755a652c0abd93f5fbcda5cced27f41b086411cc48c0e4767d5e7cfe1dbc3L194' target='_blank'>Link</a></div><div id='project'> Project Name: CyberReboot/poseidon</div><div id='commit'> Commit Name: ec8602f95ff5916925c54a9adfc867112b2d5b70</div><div id='time'> Time: 2016-08-09</div><div id='author'> Author: tlanham@cs.stanford.edu</div><div id='file'> File Name: poseidon/poseidonStorage/test_poseidonStorage.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: test_db_add_many_docs</div><BR>