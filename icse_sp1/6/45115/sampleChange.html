<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    if check_ready_to_run() == False:
        &#47&#47 GPU metrics collector is already running. Exit
        exit(2)
    <a id="change">with open(os.path.join(metrics_output_dir, "gpu_metrics"), "w") as outputFile:
        pass
   </a> os.chmod(os.path.join(metrics_output_dir, "gpu_metrics"), 0o777)
    cmd = &quotnvidia-smi -q -x&quot
    while(True):
        try:</code></pre><h3>After Change</h3><pre><code class='java'>
        except Exception:
            traceback.print_exc()
            gen_empty_gpu_metric(metrics_output_dir)
            <a id="change">break</a>
        parse_nvidia_smi_result(smi_output, metrics_output_dir)
        &#47&#47 TODO: change to sleep time configurable via arguments
        time.sleep(5)
</code></pre>