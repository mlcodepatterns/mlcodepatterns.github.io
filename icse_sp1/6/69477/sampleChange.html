<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        feats = encoder_out[seq_len.squeeze(), torch.arange(seq_len.size(0))]
        lm_out = None
        if self.aux_lm_loss:
            <a id="change">lm_out = F.linear(encoder_out, self.encoder.decoder.embed_out)</a>
        return out, lm_out

class BERTModel(nn.Module):
    def __init__(self, args):</code></pre><h3>After Change</h3><pre><code class='java'>
                        d[&quotlast_h&quot] = d[&quoth&quot]
            &#47&#47 print("Cell dimensions: ", cell.size()) -&gt; torch.Size([128, 4096])
            seq_len = seq_len.view(-1, 1).float()
            if self.conc<a id="change">at_mean:
                maps[&quotconcat_mean&quot][&quotc&quot] /= seq_len
                if get_hidden:
  </a>                  maps[&quotconcat_mean&quot][&quoth&quot] /= seq_len
            for k, d in maps.items():
                cell = torch.cat([cell, d[&quotc&quot]], -1)
                if get_hidden:</code></pre>