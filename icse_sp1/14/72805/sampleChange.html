<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    @classmethod
    def fromJSON(cls, data, fields):
        warnings.warn(&quotExample class will be retired soon and moved to torchtext.legacy. Please see the most recent release notes for further information.&quot, UserWarning)
        <a id="change">ex = cls()</a>
        obj = json.loads(data)

        <a id="change">for key, vals in fields.items():
            if vals is not None:
                if not isinstance(vals, list):
                    vals = [vals]

                for val in vals:
                    &#47&#47 for processing the key likes &quotfoo.bar&quot
                    name, field = val
                    ks = key.split(&quot.&quot)

                    def reducer(obj, key):
                        if isinstance(obj, list):
                            results = []
                            for data in obj:
                                if key not in data:
                                    &#47&#47 key error
                                    raise ValueError("Specified key {} was not found in "
                                                     "the input data".format(key))
                                else:
                                    results.append(data[key])
                            return results
                        else:
                            &#47&#47 key error
                            if key not in obj:
                                raise ValueError("Specified key {} was not found in "
                                                 "the input data".format(key))
                            else:
                                return obj[key]

                    v = reduce(reducer, ks, obj)
                    setattr(ex, name, field.preprocess(v))
       </a> <a id="change">return ex</a>

    @classmethod
    def fromdict(cls, data, fields):
        warnings.warn(&quotExample class will be retired soon and moved to torchtext.legacy. Please see the most recent release notes for further information.&quot, UserWarning)</code></pre><h3>After Change</h3><pre><code class='java'>
        warnings.warn(&quot{} class has &quot.format(self.__class__.__name__) +
                      &quotbeen retired and moved to torchtext.legacy. Please &quot +
                      &quotimport from torchtext.legacy.data if you still want it.&quot, UserWarning)
        <a id="change">raise ImportWarning</a>

    @classmethod
    def fromdict(cls, data, fields):
        warnings.warn(&quot{} class has &quot.format(self.__class__.__name__) +</code></pre>