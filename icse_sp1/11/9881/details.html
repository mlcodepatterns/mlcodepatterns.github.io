<html><h3>884525df33ffb939b354177d6f99ead8ccb28840,homeassistant/components/media_player/plex.py,,setup_plexserver,#Any#Any#Any#,58
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 configuration, let&quots use those, not to break anything
    &#47&#47 We may want to use this method as option when HA&quots
    &#47&#47 configuration options increase
    <a id="change">if config.get(&quotname&quot, &quot&quot):
        name = config.get(&quotname&quot, &quot&quot)
        user = config.get(&quotuser&quot, &quot&quot)
        password = config.get(&quotpassword&quot, &quot&quot)
        plexuser = MyPlexUser.signin(user, password)
        plexserver = plexuser.getResource(name).connect()

    &#47&#47 Discovery mode. Parse config file, attempt conenction
    &#47&#47 Request configuration on connect fail
    else:

        print(&quotWEEEEJ, host: %s&quot%host)
        try:
            &#47&#47 Get configuration from config file
            &#47&#47 FIXME unauthenticated plex servers dont require
            &#47&#47 a token, so config file isn&quott mandatory
            with open(conf_file,&quotr&quot) as f:
                conf_dict = eval(f.read())

            plexserver = PlexServer(
                &quothttp://%s&quot%host,
                conf_dict.get(host)[&quottoken&quot])
        except IOError: &#47&#47 File not found
            request_configuration(host, hass, add_devices_callback)
            return

        except NotFound:  &#47&#47 Wrong host was given or need token?
            _LOGGER.exception("Error connecting to the Hue bridge at %s", host)
            return

   </a> plex_clients = {}
    plex_sessions = {}

    @util.Throttle(MIN_TIME_BETWEEN_SCANS, MIN_TIME_BETWEEN_FORCED_SCANS)</code></pre><h3>After Change</h3><pre><code class='java'>
        &#47&#47 Called by module inclusion, let&quots only use config
        host,token = conf_dict.popitem()
        token = token[&quottoken&quot]
    elif <a id="change">host</a> not in <a id="change">conf_dict.keys()</a>:
        &#47&#47 Not in config
        conf_dict[host] = { &quottoken&quot : &quot&quot }
        token = None</code></pre><img src="68008717.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 7</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/home-assistant/home-assistant/commit/884525df33ffb939b354177d6f99ead8ccb28840#diff-1ac31c701acdfdbccbe826a1bd31c4309d76217abc1239096550b8b074632e83L58' target='_blank'>Link</a></div><div id='project'> Project Name: home-assistant/home-assistant</div><div id='commit'> Commit Name: 884525df33ffb939b354177d6f99ead8ccb28840</div><div id='time'> Time: 2015-10-25</div><div id='author'> Author: tom.duijf@gmail.com</div><div id='file'> File Name: homeassistant/components/media_player/plex.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: setup_plexserver</div><BR><BR><div id='link'><a href='https://github.com/studioml/studio/commit/9ff097f08b073a5c7b98299276da2a82b5ae6a1d#diff-25e9ff635dbd8c946f3e810cf08ad97b3cc0990a7b463ce8c34af437be97d8aeL22' target='_blank'>Link</a></div><div id='project'> Project Name: studioml/studio</div><div id='commit'> Commit Name: 9ff097f08b073a5c7b98299276da2a82b5ae6a1d</div><div id='time'> Time: 2020-12-15</div><div id='author'> Author: andrei.denissov@cognizant.com</div><div id='file'> File Name: studio/s3_provider.py</div><div id='class'> Class Name: S3Provider</div><div id='method'> Method Name: _get</div><BR><BR><div id='link'><a href='https://github.com/home-assistant/home-assistant/commit/884525df33ffb939b354177d6f99ead8ccb28840#diff-1ac31c701acdfdbccbe826a1bd31c4309d76217abc1239096550b8b074632e83L58' target='_blank'>Link</a></div><div id='project'> Project Name: home-assistant/home-assistant</div><div id='commit'> Commit Name: 884525df33ffb939b354177d6f99ead8ccb28840</div><div id='time'> Time: 2015-10-25</div><div id='author'> Author: tom.duijf@gmail.com</div><div id='file'> File Name: homeassistant/components/media_player/plex.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: setup_plexserver</div><BR><BR><div id='link'><a href='https://github.com/studioml/studio/commit/821e08817e2e5a7b6af34d3b9c17bffdc2bc028b#diff-4373bc6747de6dc01cd5a3f1d5b9946d3af938a177fdd40d573252766b8c6044L15' target='_blank'>Link</a></div><div id='project'> Project Name: studioml/studio</div><div id='commit'> Commit Name: 821e08817e2e5a7b6af34d3b9c17bffdc2bc028b</div><div id='time'> Time: 2017-09-07</div><div id='author'> Author: peter.zhokhov@sentient.ai</div><div id='file'> File Name: studio/gcloud_artifact_store.py</div><div id='class'> Class Name: GCloudArtifactStore</div><div id='method'> Method Name: __init__</div><BR>