<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    if not request.sources_stripped:
        &#47&#47 Get rid of any identified-as-missing __init__.py files that are not under a source root.
        <a id="change">missing_init_files_list = list(missing_init_files)</a>
        optional_src_roots = await MultiGet(
            Get(OptionalSourceRoot, SourceRootRequest, SourceRootRequest.for_file(init_file))
            for init_file in missing_init_files_list
        )
        <a id="change">for optional_src_root, init_file in zip(optional_src_roots, missing_init_files_list):
            &#47&#47 If the identified-as-missing __init__.py file is above or at a source root, remove it.
            if (
                optional_src_root.source_root is None
                or optional_src_root.source_root.path == os.path.dirname(init_file)
            ):
                missing_init_files.remove(init_file)

   </a> generated_inits_digest = await Get(
        Digest,
        InputFilesContent(FileContent(path=fp, content=b"") for fp in sorted(missing_init_files)),
    )</code></pre><h3>After Change</h3><pre><code class='java'>
        Digest,
        InputFilesContent(
            FileContent(fp, b"&#47&#47 Generated by Pants to ensure that this package is importable.")
            for fp in <a id="change">missing_init_files.difference(discovered_inits_snapshot.files)</a>
        ),
    )
    result = await Get(
        Snapshot,</code></pre>