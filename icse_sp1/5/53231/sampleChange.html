<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                    
            text = raw_text[annotation_start:annotation_end]
            if label != none_value:
                <a id="change">annotation = [
                    ("start", annotation_start),
                    ("end", annotation_end),
                    ("label", label),
                    ("text", text)
                ]</a>
                <a id="change">if prob_seq is not None:
                    annotation.append(("confidence", prob_seq))
               </a> doc_annotations.add(<a id="change">tuple(annotation)</a>)
        doc_annotations = sorted([dict(items) for items in doc_annotations], key=lambda x: x[&quotstart&quot])
        annotations.append(doc_annotations)
    return raw_texts, annotations</code></pre><h3>After Change</h3><pre><code class='java'>

                &#47&#47 prevent duplicate annotation edge case
                if (annotation_start, annotation_end) not in annotation_ranges:
                    <a id="change">annotation_ranges.add((annotation_start, annotation_end))</a>
                    doc_annotations.append(annotation)
                    
        doc_annotations = sorted([dict(items) for items in doc_annotations], key=lambda x: x[&quotstart&quot])
        annotations.append(doc_annotations)</code></pre>