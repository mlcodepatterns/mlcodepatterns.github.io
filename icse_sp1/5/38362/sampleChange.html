<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
def fix(df):
    &#47&#47 sqrt2 fix er2lo:(&quotzplptp&quot, &quotzrmvon&quot) er2hi:(&quotzplscn&quot, &quotzrmvoi&quot)
    idx = (df.baseline.str.count(&quotA&quot) == 1) & (df.root_id &gt; &quotzpaaaa&quot) & (df.root_id &lt; &quotzrzzzz&quot)
    <a id="change">df.loc[idx,&quotsnr&quot]</a> /= np.sqrt(2.0)
    df.loc[idx,&quotamp&quot] /= np.sqrt(2.0)
    &#47&#47 swap polarization fix er3lo:(&quotzxuerf&quot, &quotzyjmiy&quot) er3hi:(&quotzymrse&quot, &quotzztobd&quot)
    idx1 = df.baseline.str.contains(&quotA&quot) & (df.polarization == &quotLR&quot) & (df.root_id &gt; &quotzxaaaa&quot) & (df.root_id &lt; &quotzzzzzz&quot)</code></pre><h3>After Change</h3><pre><code class='java'>
def fix(df):
    nchan = max(pd.to_numeric(df.freq_code.str[1:]))
    &#47&#47 sqrt2 fix er2lo:(&quotzplptp&quot, &quotzrmvon&quot) er2hi:(&quotzplscn&quot, &quotzrmvoi&quot) gmva-sgra:(&quotzydcyi&quot, &quotzyddcl&quot)
    <a id="change">if nchan &gt; 16: &#47&#47 EHT case
        idx = (df.baseline.str.count(&quotA&quot) == 1) & (df.root_id &gt; &quotzpaaaa&quot) & (df.root_id &lt; &quotzrzzzz&quot)
    else: &#47&#47 VLBA case
        idx = (df.baseline.str.count(&quotA&quot) == 1) & (df.root_id &gt; &quotzpaaaa&quot) & (df.root_id &lt; &quotzzzzzz&quot)
   </a> df.loc[idx,&quotsnr&quot] /= np.sqrt(2.0)
    df.loc[idx,&quotamp&quot] /= np.sqrt(2.0)
    &#47&#47 swap polarization fix er3lo:(&quotzxuerf&quot, &quotzyjmiy&quot) er3hi:(&quotzymrse&quot, &quotzztobd&quot)
    if nchan &gt; 16: &#47&#47 EHT case</code></pre>