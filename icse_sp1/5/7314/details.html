<html><h3>d15a15df582f43d9bc65a434db0d64c9e276b724,python/magent/builtin/mx_model/dqn.py,DeepQNetwork,train,#DeepQNetwork#Any#Any#,205
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            batch_target = self._calc_target(batch_next_view, batch_next_feature,
                                             batch_reward, batch_terminal)

            <a id="change">with self.ctx:
                self._reset_bind_size(batch_size)
                batch = mx.io.DataBatch(data=[mx.nd.array(batch_view),
                                              mx.nd.array(batch_feature)],
                                        label=[mx.nd.array(batch_action),
                                               mx.nd.array(batch_target),
                                               mx.nd.array(batch_mask)])
                self.model.forward(batch, is_train=True)
                self.model.backward()
                loss = self.model.get_outputs()[1].asnumpy()
                self.model.update()
                total_loss += loss

           </a> if ct % self.target_update == 0:
                self._copy_network(self.target_model, self.model)

            if ct % print_every == 0:</code></pre><h3>After Change</h3><pre><code class='java'>
            batch_target = self._calc_target(batch_next_view, batch_next_feature,
                                             batch_reward, batch_terminal)

            <a id="change">self._reset_bind_size(batch_size)</a>
            batch = mx.io.DataBatch(data=[mx.nd.array(batch_view),
                                          mx.nd.array(batch_feature)],
                                    label=[mx.nd.array(batch_action),
                                           mx.nd.array(batch_target),</code></pre><img src="45985405.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/geek-ai/MAgent/commit/d15a15df582f43d9bc65a434db0d64c9e276b724#diff-bd772243ff816f61275864476a2bd3176dd7183846a3dcae9c9cdd19203758f2L205' target='_blank'>Link</a></div><div id='project'> Project Name: geek-ai/MAgent</div><div id='commit'> Commit Name: d15a15df582f43d9bc65a434db0d64c9e276b724</div><div id='time'> Time: 2017-11-23</div><div id='author'> Author: zhenglianmin96@163.com</div><div id='file'> File Name: python/magent/builtin/mx_model/dqn.py</div><div id='class'> Class Name: DeepQNetwork</div><div id='method'> Method Name: train</div><BR><BR><div id='link'><a href='https://github.com/geek-ai/MAgent/commit/4ee4c9129a0006abc2e475bb63039d2bdb97153f#diff-a1e6e32defe112e95a0fe07e6feb12113caef83501e12bd891aca6d8add0a868L108' target='_blank'>Link</a></div><div id='project'> Project Name: geek-ai/MAgent</div><div id='commit'> Commit Name: 4ee4c9129a0006abc2e475bb63039d2bdb97153f</div><div id='time'> Time: 2017-11-24</div><div id='author'> Author: zhenglianmin96@163.com</div><div id='file'> File Name: python/magent/builtin/mx_model/a2c.py</div><div id='class'> Class Name: AdvantageActorCritic</div><div id='method'> Method Name: infer_action</div><BR><BR><div id='link'><a href='https://github.com/geek-ai/MAgent/commit/4ee4c9129a0006abc2e475bb63039d2bdb97153f#diff-a1e6e32defe112e95a0fe07e6feb12113caef83501e12bd891aca6d8add0a868L124' target='_blank'>Link</a></div><div id='project'> Project Name: geek-ai/MAgent</div><div id='commit'> Commit Name: 4ee4c9129a0006abc2e475bb63039d2bdb97153f</div><div id='time'> Time: 2017-11-24</div><div id='author'> Author: zhenglianmin96@163.com</div><div id='file'> File Name: python/magent/builtin/mx_model/a2c.py</div><div id='class'> Class Name: AdvantageActorCritic</div><div id='method'> Method Name: train</div><BR>