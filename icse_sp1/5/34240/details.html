<html><h3>49e58fcd4fcbc3b596a1fced1f74b9a63464f0e8,parlai/agents/seq2seq/seq2seq.py,Seq2seqAgent,build_criterion,#Seq2seqAgent#,197
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        if self.opt.get(&quotnumsoftmax&quot, 1) &gt; 1:
            self.criterion = nn.NLLLoss(ignore_index=self.NULL_IDX, reduction=&quotsum&quot)
        else:
            <a id="change">self.criterion = nn.CrossEntropyLoss(
                ignore_index=self.NULL_IDX, reduction=&quotsum&quot
            )</a>

    def batchify(self, *args, **kwargs):
        Override batchify options for seq2seq.
        kwargs[&quotsort&quot] = True  &#47&#47 need sorted for pack_padded</code></pre><h3>After Change</h3><pre><code class='java'>
        if self.opt.get(&quotnumsoftmax&quot, 1) &gt; 1:
            return nn.NLLLoss(ignore_index=self.NULL_IDX, reduction=&quotsum&quot)
        else:
            <a id="change">return nn.CrossEntropyLoss(ignore_index=self.NULL_IDX, reduction=&quotsum&quot)</a>

    def batchify(self, *args, **kwargs):
        Override batchify options for seq2seq.
        kwargs[&quotsort&quot] = True  &#47&#47 need sorted for pack_padded</code></pre><img src="168043408.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/facebookresearch/ParlAI/commit/49e58fcd4fcbc3b596a1fced1f74b9a63464f0e8#diff-dcaefd7b1cf1934b2bbb5d653012f58b36cfd96b5555d6995c654b4d0f81eeebL197' target='_blank'>Link</a></div><div id='project'> Project Name: facebookresearch/ParlAI</div><div id='commit'> Commit Name: 49e58fcd4fcbc3b596a1fced1f74b9a63464f0e8</div><div id='time'> Time: 2019-08-12</div><div id='author'> Author: ahm@fb.com</div><div id='file'> File Name: parlai/agents/seq2seq/seq2seq.py</div><div id='class'> Class Name: Seq2seqAgent</div><div id='method'> Method Name: build_criterion</div><BR><BR><div id='link'><a href='https://github.com/facebookresearch/ParlAI/commit/49e58fcd4fcbc3b596a1fced1f74b9a63464f0e8#diff-4589965936c6e6a5cbfb3e10a4113ead429e9e9dd227b95ae40044fb3420c379L156' target='_blank'>Link</a></div><div id='project'> Project Name: facebookresearch/ParlAI</div><div id='commit'> Commit Name: 49e58fcd4fcbc3b596a1fced1f74b9a63464f0e8</div><div id='time'> Time: 2019-08-12</div><div id='author'> Author: ahm@fb.com</div><div id='file'> File Name: parlai/core/torch_classifier_agent.py</div><div id='class'> Class Name: TorchClassifierAgent</div><div id='method'> Method Name: build_criterion</div><BR><BR><div id='link'><a href='https://github.com/facebookresearch/ParlAI/commit/49e58fcd4fcbc3b596a1fced1f74b9a63464f0e8#diff-39dae8f480804dec9cebb29796f02e9f200db7b9ad7fbf244c98cd1b25a4bd15L184' target='_blank'>Link</a></div><div id='project'> Project Name: facebookresearch/ParlAI</div><div id='commit'> Commit Name: 49e58fcd4fcbc3b596a1fced1f74b9a63464f0e8</div><div id='time'> Time: 2019-08-12</div><div id='author'> Author: ahm@fb.com</div><div id='file'> File Name: parlai/core/torch_ranker_agent.py</div><div id='class'> Class Name: TorchRankerAgent</div><div id='method'> Method Name: build_criterion</div><BR>