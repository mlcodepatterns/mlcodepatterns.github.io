<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                                      self.gradient_moving,
                                      self.factors)
        displacement=np.array(displacement)
        <a id="change">displacement[..., 0] = ndimage.filters.gaussian_filter(displacement[..., 0],
                                                               self.sigma_diff)</a>
        <a id="change">displacement[..., 1] = ndimage.filters.gaussian_filter(displacement[..., 1],
                                                                self.sigma_diff)</a>
        displacement[..., 2] = ndimage.filters.gaussian_filter(displacement[..., 2],
                                                                self.sigma_diff)
        max_norm = np.sqrt(np.sum(displacement**2, -1)).max()
        displacement *= self.step_length/max_norm</code></pre><h3>After Change</h3><pre><code class='java'>
                                      self.gradient_moving,
                                      self.factors)
        displacement=np.array(displacement)
        <a id="change">i=0</a>
        <a id="change">while i &lt; self.dim:
            displacement[..., i] = ndimage.filters.gaussian_filter(displacement[..., i],
                                                                   self.sigma_diff)
            i+=1
       </a> max_norm = np.sqrt(np.sum(displacement**2, -1)).max()
        displacement *= self.step_length/max_norm
        return displacement
</code></pre>