<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        &#47&#47   * hostname_to_ip
        &#47&#47   * ip_to_hostname
        logger.info("Purge data.")
        <a id="change">valid_keys = DataSource.ip_to_hostname.keys()</a>
        for key in DataSource.node_stats.keys() - valid_keys:
            DataSource.node_stats.pop(key)

        for key in DataSource.node_physical_stats.keys() - valid_keys:</code></pre><h3>After Change</h3><pre><code class='java'>
        logger.info("Purge data.")
        alive_nodes = {
            node_id
            <a id="change">for</a> node_id, node_info in <a id="change">DataSource.nodes.items()</a>
            if node_info["state"] == "ALIVE"
        }
        for key in DataSource.node_stats.keys() - alive_nodes:
            DataSource.node_stats.pop(key)</code></pre>