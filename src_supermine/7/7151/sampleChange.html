<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

def main():
    print(&quotPreparing training ...&quot)
    <a id="change">with codecs.open(opt.train_src, "r", "utf-8") as src_file:
        src_line = src_file.readline().strip().split()
        _, _, nFeatures = onmt.IO.extract_features(src_line)

   </a> fields = onmt.IO.ONMTDataset.get_fields(nFeatures)
    print("Building Training...")
    train = onmt.IO.ONMTDataset(opt.train_src, opt.train_tgt, fields, opt)
    print("Building Vocab...")</code></pre><h3>After Change</h3><pre><code class='java'>


def main():
    <a id="change">if opt.data_type == &quottext&quot:
        print(&quotPreparing training ...&quot)
        with codecs.open(opt.train_src, "r", "utf-8") as src_file:
            src_line = src_file.readline().strip().split()
            _, _, nFeatures = onmt.IO.extract_features(src_line)

        fields = onmt.IO.ONMTDataset.get_fields(nFeatures)
    elif opt.data_type == &quotimg&quot:
        fields = onmt.IO.ONMTDataset.get_fields(data_type=&quotimg&quot)

   </a> print("Building Training...")
    train = onmt.IO.ONMTDataset(opt.train_src, opt.train_tgt, fields, opt)
    print("Building Vocab...")
    onmt.IO.ONMTDataset.build_vocab(train, opt)</code></pre>