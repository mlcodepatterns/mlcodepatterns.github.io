<html><h3>c672738b39c8f739551da0d88991a2fedfba3e14,deeppavlov/models/ranking/metrics.py,,recall_at_k,#Any#Any#Any#,24
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    flags = np.zeros_like(predictions)
    for i in range(predictions.shape[0]):
        for j in range(predictions.shape[1]):
            <a id="change">if predictions[i][j] in np.arange(labels[i][j]):
                flags[i][j] = 1.
   </a> return np.mean((np.sum(flags, -1) &gt;= 1.).astype(float))


@register_metric(&quotrank_response&quot)</code></pre><h3>After Change</h3><pre><code class='java'>
    return recall_at_k(labels, predictions, k=10)

def recall_at_k(y_true, y_pred, k):
    <a id="change">num_examples = float(len(y_pred))</a>
    predictions = np.array(y_pred)
    predictions = np.flip(np.argsort(predictions, -1), -1)[:, :k]
    num_correct = 0
    for el in predictions:</code></pre><img src="29553616.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 6</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/deepmipt/DeepPavlov/commit/c672738b39c8f739551da0d88991a2fedfba3e14#diff-52b6f544f27001dd35211a031660acaa8f46d504cec53028abdd5dab939d1667L25' target='_blank'>Link</a></div><div id='project'> Project Name: deepmipt/DeepPavlov</div><div id='commit'> Commit Name: c672738b39c8f739551da0d88991a2fedfba3e14</div><div id='time'> Time: 2018-10-04</div><div id='author'> Author: puleon@mail.ru</div><div id='file'> File Name: deeppavlov/models/ranking/metrics.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: recall_at_k</div><BR><BR><div id='link'><a href='https://github.com/DT42/BerryNet/commit/1a4afd3eb200e41706b67497bdc94261263147ee#diff-58a01f1e70837018524db1a24165cc59760fd4f0abb081ffe1843fb2772b6835L86' target='_blank'>Link</a></div><div id='project'> Project Name: DT42/BerryNet</div><div id='commit'> Commit Name: 1a4afd3eb200e41706b67497bdc94261263147ee</div><div id='time'> Time: 2018-02-19</div><div id='author'> Author: bofu@dt42.io</div><div id='file'> File Name: berrynet/engine/movidius.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: process_inceptionv3_output</div><BR><BR><div id='link'><a href='https://github.com/deepmipt/DeepPavlov/commit/c672738b39c8f739551da0d88991a2fedfba3e14#diff-52b6f544f27001dd35211a031660acaa8f46d504cec53028abdd5dab939d1667L38' target='_blank'>Link</a></div><div id='project'> Project Name: deepmipt/DeepPavlov</div><div id='commit'> Commit Name: c672738b39c8f739551da0d88991a2fedfba3e14</div><div id='time'> Time: 2018-10-04</div><div id='author'> Author: puleon@mail.ru</div><div id='file'> File Name: deeppavlov/models/ranking/metrics.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: rank_response</div><BR><BR><div id='link'><a href='https://github.com/NifTK/NiftyNet/commit/29bb1d395f6caf76b8318a1c72ace753ad98f30c#diff-58235707ad13e09bb73c25118bdae2352973eb59b88bb1c00a0821098e94e01eL32' target='_blank'>Link</a></div><div id='project'> Project Name: NifTK/NiftyNet</div><div id='commit'> Commit Name: 29bb1d395f6caf76b8318a1c72ace753ad98f30c</div><div id='time'> Time: 2017-12-18</div><div id='author'> Author: wenqi.li@ucl.ac.uk</div><div id='file'> File Name: niftynet/layer/upsample_res_block.py</div><div id='class'> Class Name: UpBlock</div><div id='method'> Method Name: layer_op</div><BR><BR><div id='link'><a href='https://github.com/chainer/chainercv/commit/21426b86a47a5e48ac0a6c51e7ca67596fca9cb7#diff-739c49a9529c1599246050f436770bc520c2f0cf3ef5b1789e8b047ad215fc10L24' target='_blank'>Link</a></div><div id='project'> Project Name: chainer/chainercv</div><div id='commit'> Commit Name: 21426b86a47a5e48ac0a6c51e7ca67596fca9cb7</div><div id='time'> Time: 2017-06-15</div><div id='author'> Author: SESA5474@WTJPLVSE010002D.apa.gad.schneider-electric.com</div><div id='file'> File Name: chainercv/utils/download.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: _reporthook</div><BR><BR><div id='link'><a href='https://github.com/wkentaro/labelme/commit/b6e0df882cda9f08654318b494fe49ea79a0a939#diff-6ab2819bed03c83203513fddd306c07064da647681f818c1d85e28a9796f6a45L150' target='_blank'>Link</a></div><div id='project'> Project Name: wkentaro/labelme</div><div id='commit'> Commit Name: b6e0df882cda9f08654318b494fe49ea79a0a939</div><div id='time'> Time: 2018-02-01</div><div id='author'> Author: jonas.serych@gmail.com</div><div id='file'> File Name: labelme/shape.py</div><div id='class'> Class Name: Shape</div><div id='method'> Method Name: nearestVertex</div><BR>