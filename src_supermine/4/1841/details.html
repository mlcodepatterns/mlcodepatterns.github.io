<html><h3>91287eb35a52102b12d523e9f7194808b5cf1a45,onmt/utils/alignment.py,,build_align_pharaoh,#Any#,66
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    for tgt_id, src_id in enumerate(tgt_align_src_id.tolist()):
        align_pairs.append(str(src_id) + "-" + str(tgt_id))
    <a id="change">align_pairs.sort(key=lambda x: int(x.split(&quot-&quot)[-1]))</a>  &#47&#47 sort by tgt_id
    align_pairs.sort(key=lambda x: int(x.split(&quot-&quot)[0]))  &#47&#47 sort by src_id
    return align_pairs
</code></pre><h3>After Change</h3><pre><code class='java'>
    or empty list if it&quots None.
    
    align_pairs = []
    <a id="change">if isinstance(valid_alignment, torch.Tensor):
        tgt_align_src_id = valid_alignment.argmax(dim=-1)

        for tgt_id, src_id in enumerate(tgt_align_src_id.tolist()):
            align_pairs.append(str(src_id) + "-" + str(tgt_id))
        align_pairs.sort(key=lambda x: int(x.split(&quot-&quot)[-1]))  &#47&#47 sort by tgt_id
        align_pairs.sort(key=lambda x: int(x.split(&quot-&quot)[0]))  &#47&#47 sort by src_id
   </a> return align_pairs


def to_word_align(src, tgt, subword_align, mode):</code></pre><img src="9380471.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/OpenNMT/OpenNMT-py/commit/91287eb35a52102b12d523e9f7194808b5cf1a45#diff-dae9ef429a0db1a86faece2180e60877368f6a2081205a44354e37445b04fb41L69' target='_blank'>Link</a></div><div id='project'> Project Name: OpenNMT/OpenNMT-py</div><div id='commit'> Commit Name: 91287eb35a52102b12d523e9f7194808b5cf1a45</div><div id='time'> Time: 2020-03-18</div><div id='author'> Author: linxiao.zeng@gmail.com</div><div id='file'> File Name: onmt/utils/alignment.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: build_align_pharaoh</div><BR><BR><div id='link'><a href='https://github.com/NervanaSystems/nlp-architect/commit/57e30a889f430cf948e26ee54e497004c501ee43#diff-4c7c2e9eb0d70e256a1e73bc27ad69f7c9cb1b376cfbb2c585971115ec0deb58L249' target='_blank'>Link</a></div><div id='project'> Project Name: NervanaSystems/nlp-architect</div><div id='commit'> Commit Name: 57e30a889f430cf948e26ee54e497004c501ee43</div><div id='time'> Time: 2018-06-10</div><div id='author'> Author: shira.guskin@intel.com</div><div id='file'> File Name: set_expansion_demo/ui/main.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: search_callback</div><BR><BR><div id='link'><a href='https://github.com/keras-team/keras/commit/69d5139b8ccc860cd3ed8b63be83a104ceeedafb#diff-b08f8eb68f1020decc0addd2758a1b71e202215b4d9756bda4e422e8a35e243cL1716' target='_blank'>Link</a></div><div id='project'> Project Name: keras-team/keras</div><div id='commit'> Commit Name: 69d5139b8ccc860cd3ed8b63be83a104ceeedafb</div><div id='time'> Time: 2016-08-09</div><div id='author'> Author: francois.chollet@gmail.com</div><div id='file'> File Name: keras/engine/topology.py</div><div id='class'> Class Name: Container</div><div id='method'> Method Name: __init__</div><BR><BR><div id='link'><a href='https://github.com/NifTK/NiftyNet/commit/84caf3151dbf0731f4c7a6fe079cfad5b26687d6#diff-3b2d5a4c63b9417cfade5656a2b78258ce1bfc9e383de389140c1a7e7c667714L145' target='_blank'>Link</a></div><div id='project'> Project Name: NifTK/NiftyNet</div><div id='commit'> Commit Name: 84caf3151dbf0731f4c7a6fe079cfad5b26687d6</div><div id='time'> Time: 2018-05-23</div><div id='author'> Author: guotai.wang.14@ucl.ac.uk</div><div id='file'> File Name: niftynet/layer/discrete_label_normalisation.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: find_set_of_labels</div><BR>