<html><h3>d9f1874e3489edc915228dcfdae64d5294034464,rllib/agents/pg/tests/test_pg.py,TestPG,test_pg_loss_functions,#TestPG#,34
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
                expected_logp = expected_logp.numpy()
            expected_loss = -np.mean(
                expected_logp *
                <a id="change">(train_batch[Postprocessing.ADVANTAGES] if fw != "torch" else
                 train_batch[Postprocessing.ADVANTAGES].numpy())</a>)
            check(results, expected_loss, decimals=4)

</code></pre><h3>After Change</h3><pre><code class='java'>
            adv = train_batch[Postprocessing.ADVANTAGES]
            if sess:
                expected_logp = sess.run(expected_logp)
            elif <a id="change">fw</a> == "torch":
                expected_logp = <a id="change">expected_logp</a>.detach().cpu().numpy()
                adv = <a id="change">adv</a>.detach().cpu().numpy()
            else:
                expected_logp = expected_logp.numpy()
            expected_loss = -np.mean(expected_logp * adv)</code></pre><img src="12799667.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/ray-project/ray/commit/d9f1874e3489edc915228dcfdae64d5294034464#diff-567f3f11aa8a20b4477b6d78589e4facff35e8a5ea9fb23510416d199f8b3a0dL66' target='_blank'>Link</a></div><div id='project'> Project Name: ray-project/ray</div><div id='commit'> Commit Name: d9f1874e3489edc915228dcfdae64d5294034464</div><div id='time'> Time: 2020-10-27</div><div id='author'> Author: sven@anyscale.io</div><div id='file'> File Name: rllib/agents/pg/tests/test_pg.py</div><div id='class'> Class Name: TestPG</div><div id='method'> Method Name: test_pg_loss_functions</div><BR><BR><div id='link'><a href='https://github.com/ray-project/ray/commit/66df8b8c3522dcb47ce163f1d8f9503c094459ce#diff-25c1dea662da51462fd93a9bd6d56d94a7d9af65c9430bbb624171bdf61e9ff8L127' target='_blank'>Link</a></div><div id='project'> Project Name: ray-project/ray</div><div id='commit'> Commit Name: 66df8b8c3522dcb47ce163f1d8f9503c094459ce</div><div id='time'> Time: 2020-03-31</div><div id='author'> Author: sven@anyscale.io</div><div id='file'> File Name: rllib/utils/numpy.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: fc</div><BR><BR><div id='link'><a href='https://github.com/OpenNMT/OpenNMT-py/commit/b40c5085bfd8f46a7bfca10b73f91b55a353c918#diff-86563f2e2d4c51883fbd3caa04c4fb2828b79e8352c2afc2b510dc098503e750L136' target='_blank'>Link</a></div><div id='project'> Project Name: OpenNMT/OpenNMT-py</div><div id='commit'> Commit Name: b40c5085bfd8f46a7bfca10b73f91b55a353c918</div><div id='time'> Time: 2019-01-29</div><div id='author'> Author: benzurdopeters@gmail.com</div><div id='file'> File Name: onmt/decoders/decoder.py</div><div id='class'> Class Name: RNNDecoderBase</div><div id='method'> Method Name: detach_state</div><BR>