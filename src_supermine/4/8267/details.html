<html><h3>22f37f9aa646e48ce0066da985e29837be9b72cb,tensorpack/graph_builder/utils.py,GradientPacker,compute_strategy,#GradientPacker#Any#,389
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            bool - False if grads cannot be packed due to various reasons.
        
        for g in grads:
            <a id="change">assert g.shape.is_fully_defined(), "Shape of {} is {}!".format(g.name, g.shape)</a>

        self._shapes = [g.shape for g in grads]
        self._sizes = [g.shape.num_elements() for g in grads]
        self._total_size = sum(self._sizes)</code></pre><h3>After Change</h3><pre><code class='java'>
            bool - False if grads cannot be packed due to various reasons.
        
        for g in grads:
            <a id="change">if not g.shape.is_fully_defined():
                logger.warn("Found gradient with incomplete shape: "
                            "{} has shape {}".format(g.name, g.shape))
                return False

       </a> self._shapes = [g.shape for g in grads]
        self._sizes = [g.shape.num_elements() for g in grads]
        self._total_size = sum(self._sizes)
        if self._total_size / self._num_split &lt; 1024:</code></pre><img src="39352776.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/tensorpack/tensorpack/commit/22f37f9aa646e48ce0066da985e29837be9b72cb#diff-22648802ad102e66d19a6d7318a53f1ad7712badab669a3a93269e775fd82bd0L395' target='_blank'>Link</a></div><div id='project'> Project Name: tensorpack/tensorpack</div><div id='commit'> Commit Name: 22f37f9aa646e48ce0066da985e29837be9b72cb</div><div id='time'> Time: 2020-10-21</div><div id='author'> Author: ppwwyyxx@users.noreply.github.com</div><div id='file'> File Name: tensorpack/graph_builder/utils.py</div><div id='class'> Class Name: GradientPacker</div><div id='method'> Method Name: compute_strategy</div><BR><BR><div id='link'><a href='https://github.com/aleju/imgaug/commit/bb749fe0ef40e0c792a0a8cbda28673efcef41c2#diff-fe107f92728cf67dc12cf569142dae3e08872d8bc857ce303b98b49baec5a7c5L1252' target='_blank'>Link</a></div><div id='project'> Project Name: aleju/imgaug</div><div id='commit'> Commit Name: bb749fe0ef40e0c792a0a8cbda28673efcef41c2</div><div id='time'> Time: 2019-09-21</div><div id='author'> Author: kontakt@ajung.name</div><div id='file'> File Name: imgaug/augmenters/size.py</div><div id='class'> Class Name: CropAndPad</div><div id='method'> Method Name: _draw_samples_image</div><BR><BR><div id='link'><a href='https://github.com/hanxiao/bert-as-service/commit/07318b6f193745c75467170413229f57893125c6#diff-edb2f165a4ee03fd3810d70df339f5911fb0c457ae4ed57ca80a83f88ebc614dL160' target='_blank'>Link</a></div><div id='project'> Project Name: hanxiao/bert-as-service</div><div id='commit'> Commit Name: 07318b6f193745c75467170413229f57893125c6</div><div id='time'> Time: 2019-03-13</div><div id='author'> Author: hanhxiao@tencent.com</div><div id='file'> File Name: server/bert_serving/server/helper.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: check_tf_version</div><BR><BR><div id='link'><a href='https://github.com/ray-project/ray/commit/a0f73cf3f72d02b5f47f4a189052171a3fdd85c3#diff-ef95a89a9ab07c8e3d15c24f30a8660393d5302c6710f235c38d3b1074b7d066L28' target='_blank'>Link</a></div><div id='project'> Project Name: ray-project/ray</div><div id='commit'> Commit Name: a0f73cf3f72d02b5f47f4a189052171a3fdd85c3</div><div id='time'> Time: 2021-02-17</div><div id='author'> Author: krfricke@users.noreply.github.com</div><div id='file'> File Name: release/xgboost_tests/workloads/ft_small_elastic.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: </div><BR>