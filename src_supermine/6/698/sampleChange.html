<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 HACK: collect source feature vocabs.
    feature_vocabs = []
    for j in range(100):
        <a id="change">key = "src_feat_" + str(j)</a>
        <a id="change">if key not in fields:
            break
       </a> feature_vocabs.append(<a id="change">fields[key].vocab</a>)

    emb_opts = {&quotsrc_word_vec_size&quot: model_opt.src_word_vec_size,
                &quotposition_encoding&quot: model_opt.position_encoding,</code></pre><h3>After Change</h3><pre><code class='java'>

    &#47&#47 Make Encoder.
    src_vocab = fields["src"].vocab
    num_feat_embeddings = [<a id="change">len(feat_dict)</a> for feat_dict in
                           ONMTDataset.collect_feature_dicts(fields)]
    embeddings = build_embeddings(
                model_opt, src_vocab.stoi[onmt.IO.PAD_WORD],</code></pre>