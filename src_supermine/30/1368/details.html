<html><h3>b351d1394087251b119930bf4aaee7a79ef4e55a,python/ray/tests/test_reconstruction.py,,test_multiple_downstream_tasks,#Any#Any#,199
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

@pytest.mark.parametrize("reconstruction_enabled", [False, True])
def test_multiple_downstream_tasks(ray_start_cluster, reconstruction_enabled):
    <a id="change">config</a> = <a id="change">json.dumps({
        "num_heartbeats_timeout": 10,
        "raylet_heartbeat_timeout_milliseconds": 100,
        "lineage_pinning_enabled": 1 if reconstruction_enabled else 0,
        "free_objects_period_milliseconds": -1,
        "initial_reconstruction_timeout_milliseconds": 200,
    })</a>
    cluster = ray_start_cluster
    &#47&#47 Head node with no resources.
    cluster.add_node(num_cpus=0, _internal_config=config)
    ray.init(address=cluster.address)</code></pre><h3>After Change</h3><pre><code class='java'>

@pytest.mark.parametrize("reconstruction_enabled", [False, True])
def test_multiple_downstream_tasks(ray_start_cluster, reconstruction_enabled):
    <a id="change">config</a> = <a id="change">{
        "num_heartbeats_timeout": 10,
        "raylet_heartbeat_timeout_milliseconds": 100,
        "initial_reconstruction_timeout_milliseconds": 200,
    }</a>
    &#47&#47 Workaround to reset the config to the default value.
    <a id="change">if not reconstruction_enabled:
        config["lineage_pinning_enabled"] = 0
   </a> <a id="change">config = json.dumps(config)</a>

    cluster = ray_start_cluster
    &#47&#47 Head node with no resources.
    cluster.add_node(</code></pre><img src="7505266.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 5</div><BR><div id='size'>Non-data size: 10</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/ray-project/ray/commit/b351d1394087251b119930bf4aaee7a79ef4e55a#diff-35aaecb6fd30f9eabec5e4505dc3f889bc990cd0c37a5c457ebbe9a28fd964e0L200' target='_blank'>Link</a></div><div id='project'> Project Name: ray-project/ray</div><div id='commit'> Commit Name: b351d1394087251b119930bf4aaee7a79ef4e55a</div><div id='time'> Time: 2020-07-17</div><div id='author'> Author: swang@cs.berkeley.edu</div><div id='file'> File Name: python/ray/tests/test_reconstruction.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: test_multiple_downstream_tasks</div><BR><BR><div id='link'><a href='https://github.com/ray-project/ray/commit/b351d1394087251b119930bf4aaee7a79ef4e55a#diff-35aaecb6fd30f9eabec5e4505dc3f889bc990cd0c37a5c457ebbe9a28fd964e0L153' target='_blank'>Link</a></div><div id='project'> Project Name: ray-project/ray</div><div id='commit'> Commit Name: b351d1394087251b119930bf4aaee7a79ef4e55a</div><div id='time'> Time: 2020-07-17</div><div id='author'> Author: swang@cs.berkeley.edu</div><div id='file'> File Name: python/ray/tests/test_reconstruction.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: test_basic_reconstruction_put</div><BR><BR><div id='link'><a href='https://github.com/ray-project/ray/commit/b351d1394087251b119930bf4aaee7a79ef4e55a#diff-35aaecb6fd30f9eabec5e4505dc3f889bc990cd0c37a5c457ebbe9a28fd964e0L200' target='_blank'>Link</a></div><div id='project'> Project Name: ray-project/ray</div><div id='commit'> Commit Name: b351d1394087251b119930bf4aaee7a79ef4e55a</div><div id='time'> Time: 2020-07-17</div><div id='author'> Author: swang@cs.berkeley.edu</div><div id='file'> File Name: python/ray/tests/test_reconstruction.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: test_multiple_downstream_tasks</div><BR><BR><div id='link'><a href='https://github.com/ray-project/ray/commit/b351d1394087251b119930bf4aaee7a79ef4e55a#diff-35aaecb6fd30f9eabec5e4505dc3f889bc990cd0c37a5c457ebbe9a28fd964e0L55' target='_blank'>Link</a></div><div id='project'> Project Name: ray-project/ray</div><div id='commit'> Commit Name: b351d1394087251b119930bf4aaee7a79ef4e55a</div><div id='time'> Time: 2020-07-17</div><div id='author'> Author: swang@cs.berkeley.edu</div><div id='file'> File Name: python/ray/tests/test_reconstruction.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: test_reconstruction_cached_dependency</div><BR><BR><div id='link'><a href='https://github.com/ray-project/ray/commit/b351d1394087251b119930bf4aaee7a79ef4e55a#diff-35aaecb6fd30f9eabec5e4505dc3f889bc990cd0c37a5c457ebbe9a28fd964e0L109' target='_blank'>Link</a></div><div id='project'> Project Name: ray-project/ray</div><div id='commit'> Commit Name: b351d1394087251b119930bf4aaee7a79ef4e55a</div><div id='time'> Time: 2020-07-17</div><div id='author'> Author: swang@cs.berkeley.edu</div><div id='file'> File Name: python/ray/tests/test_reconstruction.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: test_basic_reconstruction</div><BR><BR><div id='link'><a href='https://github.com/ray-project/ray/commit/b351d1394087251b119930bf4aaee7a79ef4e55a#diff-35aaecb6fd30f9eabec5e4505dc3f889bc990cd0c37a5c457ebbe9a28fd964e0L255' target='_blank'>Link</a></div><div id='project'> Project Name: ray-project/ray</div><div id='commit'> Commit Name: b351d1394087251b119930bf4aaee7a79ef4e55a</div><div id='time'> Time: 2020-07-17</div><div id='author'> Author: swang@cs.berkeley.edu</div><div id='file'> File Name: python/ray/tests/test_reconstruction.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: test_reconstruction_chain</div><BR>