<html><h3>165756cc19a19db0e75c128ccc97eff3579af1c3,examples/nas/enas/search.py,,,#,19
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    optimizer = torch.optim.SGD(model.parameters(), 0.05, momentum=0.9, weight_decay=1.0E-4)
    lr_scheduler = torch.optim.lr_scheduler.CosineAnnealingLR(optimizer, T_max=num_epochs, eta_min=0.001)

    <a id="change">trainer = enas.EnasTrainer(model,
                               loss=criterion,
                               metrics=accuracy,
                               reward_function=reward_accuracy,
                               optimizer=optimizer,
                               callbacks=[LRSchedulerCallback(lr_scheduler), ArchitectureCheckpoint("./checkpoints")],
                               batch_size=args.batch_size,
                               num_epochs=num_epochs,
                               dataset_train=dataset_train,
                               dataset_valid=dataset_valid,
                               log_frequency=args.log_frequency,
                               mutator=mutator)</a>
    if args.visualization:
        trainer.enable_visualization()
    <a id="change">trainer.train()</a>
</code></pre><h3>After Change</h3><pre><code class='java'>
    optimizer = torch.optim.SGD(model.parameters(), 0.05, momentum=0.9, weight_decay=1.0E-4)
    lr_scheduler = torch.optim.lr_scheduler.CosineAnnealingLR(optimizer, T_max=num_epochs, eta_min=0.001)

    <a id="change">if args.v1:
        trainer = enas.EnasTrainer(model,
                                   loss=criterion,
                                   metrics=accuracy,
                                   reward_function=reward_accuracy,
                                   optimizer=optimizer,
                                   callbacks=[LRSchedulerCallback(lr_scheduler), ArchitectureCheckpoint("./checkpoints")],
                                   batch_size=args.batch_size,
                                   num_epochs=num_epochs,
                                   dataset_train=dataset_train,
                                   dataset_valid=dataset_valid,
                                   log_frequency=args.log_frequency,
                                   mutator=mutator)
        if args.visualization:
            trainer.enable_visualization()
        trainer.train()
    else:
        from nni.retiarii.trainer.pytorch.enas import EnasTrainer
        trainer = EnasTrainer(model,
                              loss=criterion,
                              metrics=accuracy,
                              reward_function=reward_accuracy,
                              optimizer=optimizer,
                              batch_size=args.batch_size,
                              num_epochs=num_epochs,
                              dataset=dataset_train,
                              log_frequency=args.log_frequency,
                              ctrl_kwargs=ctrl_kwargs)
        trainer.fit()</a>
</code></pre><img src="12803367.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/microsoft/nni/commit/165756cc19a19db0e75c128ccc97eff3579af1c3#diff-e1cca81aea90aa8afd9529c5d4570fb0217145a908bd119dac8b179b0d8aeca7L23' target='_blank'>Link</a></div><div id='project'> Project Name: microsoft/nni</div><div id='commit'> Commit Name: 165756cc19a19db0e75c128ccc97eff3579af1c3</div><div id='time'> Time: 2020-12-05</div><div id='author'> Author: Yuge.Zhang@microsoft.com</div><div id='file'> File Name: examples/nas/enas/search.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: </div><BR><BR><div id='link'><a href='https://github.com/microsoft/nni/commit/165756cc19a19db0e75c128ccc97eff3579af1c3#diff-960a381d3d17ef404cbbbdd8ff00087f3ab54beb5cdae1d26a2b37ac1d38f0bbL20' target='_blank'>Link</a></div><div id='project'> Project Name: microsoft/nni</div><div id='commit'> Commit Name: 165756cc19a19db0e75c128ccc97eff3579af1c3</div><div id='time'> Time: 2020-12-05</div><div id='author'> Author: Yuge.Zhang@microsoft.com</div><div id='file'> File Name: examples/nas/darts/search.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: </div><BR><BR><div id='link'><a href='https://github.com/ClimbsRocks/auto_ml/commit/090b20a6dc31cb152505523e5f48c87f6142278c#diff-893454c3b7604c9e39cf39dfbdd6f1f0b1c6707e4fec48a68ceec16035875121L214' target='_blank'>Link</a></div><div id='project'> Project Name: ClimbsRocks/auto_ml</div><div id='commit'> Commit Name: 090b20a6dc31cb152505523e5f48c87f6142278c</div><div id='time'> Time: 2016-08-24</div><div id='author'> Author: ClimbsBytes@gmail.com</div><div id='file'> File Name: auto_ml/predictor.py</div><div id='class'> Class Name: Predictor</div><div id='method'> Method Name: train</div><BR>