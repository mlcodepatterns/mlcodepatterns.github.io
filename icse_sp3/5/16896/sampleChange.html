<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        &#47&#47 Threads are unpredictable, try 20 times if we&quotre ready
        wait_loops = 0
        <a id="change">while blocking_thread.is_alive() and wait_loops &lt; 20:
            wait_loops += 1
            time.sleep(0.05)

       </a> self.assertFalse(blocking_thread.is_alive())

    def test_stopping_with_keyboardinterrupt(self):
        calls = []</code></pre><h3>After Change</h3><pre><code class='java'>
            self.hass.pool.block_till_done()

        &#47&#47 Wait for thread to stop
        <a id="change">for _ in range(20):
            if not blocking_thread.is_alive():
                break
            time.sleep(0.05)

       </a> self.assertFalse(blocking_thread.is_alive())

    def test_stopping_with_keyboardinterrupt(self):
        calls = []</code></pre>