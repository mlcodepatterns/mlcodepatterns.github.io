<html><h3>b4562327a4554689d8ab0906c605476ccf817336,language/xsp/data_preprocessing/abstract_sql.py,,_get_from_clause_for_tables,#Any#Any#,549
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
def _get_from_clause_for_tables(table_names, fk_relations):
  Returns list of SqlSpan tuples for FROM clause.
  if not table_names:
    <a id="change">raise ParseError(&quotNo table names provided.&quot)</a>
  if len(table_names) == 1:
    return [make_sql_span(table_name=table_names[0])]

  &#47&#47 Map of (table_a, table_b) to (column_a, column_b)
  fk_relations_map = {}
  for relation in fk_relations:
    fk_relations_map[(relation.child_table,
                      relation.parent_table)] = (relation.child_column,
                                                 relation.parent_column)
    &#47&#47 Also add the reverse.
    <a id="change">fk_relations_map[(relation.parent_table,
                      relation.child_table)] = (relation.parent_column,
                                                relation.child_column)</a>

  &#47&#47 Naively try every permutation of table_names until we get a hit.
  &#47&#47 TODO(petershaw): Could probably speed up this up quite a bit and provide
  &#47&#47 better error handling for ambiguous cases.</code></pre><h3>After Change</h3><pre><code class='java'>
  sql_spans = []
  sql_spans.append(make_sql_span(table_name=visited_tables[0]))
  for i in range(len(visited_tables) - 1):
    table_a = <a id="change">visited_tables[i]</a>
    table_b = visited_tables[i + 1]
    column_a, column_b = fk_relations[i]
    &#47&#47 join table_b on table_a.column_a = table_b.column_b
    sql_spans.append(make_sql_span(sql_token=&quotjoin&quot))</code></pre><img src="188030772.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/google-research/language/commit/b4562327a4554689d8ab0906c605476ccf817336#diff-199d64ad8c520723787b0b10d680494fb47f1e648355bd7f94cf5d4b100e50eeL551' target='_blank'>Link</a></div><div id='project'> Project Name: google-research/language</div><div id='commit'> Commit Name: b4562327a4554689d8ab0906c605476ccf817336</div><div id='time'> Time: 2019-11-15</div><div id='author'> Author: kentonl@google.com</div><div id='file'> File Name: language/xsp/data_preprocessing/abstract_sql.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: _get_from_clause_for_tables</div><BR><BR><div id='link'><a href='https://github.com/pantsbuild/pants/commit/b538f8e02f54afe537e0b0cecdddcd63d8740daa#diff-ce665403913e99006798ee95d5a1662f71a46a7ff4a0b06362d749f4986bfd24L127' target='_blank'>Link</a></div><div id='project'> Project Name: pantsbuild/pants</div><div id='commit'> Commit Name: b538f8e02f54afe537e0b0cecdddcd63d8740daa</div><div id='time'> Time: 2020-01-31</div><div id='author'> Author: ericarellano@me.com</div><div id='file'> File Name: src/python/pants/engine/legacy/parser.py</div><div id='class'> Class Name: LegacyPythonCallbacksParser</div><div id='method'> Method Name: parse</div><BR><BR><div id='link'><a href='https://github.com/pantsbuild/pants/commit/65cd3bc9338aeb7efe02c13eea9e7b9def3435b9#diff-01df88b7aaa65ac2471104080363c4dc88f9ce9310399e840a648564ef393aa2L173' target='_blank'>Link</a></div><div id='project'> Project Name: pantsbuild/pants</div><div id='commit'> Commit Name: 65cd3bc9338aeb7efe02c13eea9e7b9def3435b9</div><div id='time'> Time: 2015-10-29</div><div id='author'> Author: benjyw@gmail.com</div><div id='file'> File Name: src/python/pants/option/parser.py</div><div id='class'> Class Name: Parser</div><div id='method'> Method Name: register</div><BR>