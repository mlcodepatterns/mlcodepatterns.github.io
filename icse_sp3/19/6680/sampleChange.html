<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        raise Http404
        
    
    msg = "showing dropbox based page. args: " + <a id="change">",".join((site_short_name, page_title,dropboxname, dropboxpath))</a>
    p.html = <a id="change">msg</a> + <a id="change">"&lt;br/&gt; {% dropbox title:"</a>+dropboxname+" file:"+dropboxpath+" %}"
        
    currentpage = getRenderedPageIfAllowed(p,request,site)    
</code></pre><h3>After Change</h3><pre><code class='java'>
        
    p = get_object_or_404(Page,comicsite__short_name=site.short_name, title=page_title)
    
    <a id="change">baselink = reverse(&quotcomicsite.views.page&quot, kwargs = {&quotsite_short_name&quot:p.comicsite.short_name, &quotpage_title&quot:p.title})</a>
    
    msg = <a id="change">"&lt;div class=\"breadcrumbtrail\"&gt; Displaying &quot"+dropboxpath+"&quot from dropboxfolder &quot"+dropboxname+"&quot, originally linked from\
           page &lt;a href=\""+baselink+"\"&gt;"+p.title+"&lt;/a&gt; &lt;/div&gt;"</a>
    p.html = "{% dropbox title:"+dropboxname+" file:"+dropboxpath+" %} &lt;br/&gt;&lt;br/&gt;" + msg

    currentpage = getRenderedPageIfAllowed(p,request,site)
</code></pre>