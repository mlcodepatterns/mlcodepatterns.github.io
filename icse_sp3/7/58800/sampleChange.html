<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    name = config.get("name", "GPM Desktop Player")
    address = config.get("address")

    <a id="change">if address is None:
        _LOGGER.error("Missing address in config")
        return False

   </a> add_devices([GPMDP(name, address, create_connection)])


class GPMDP(MediaPlayerDevice):</code></pre><h3>After Change</h3><pre><code class='java'>

def setup_platform(hass, config, add_devices_callback, discovery_info=None):
    Setup the GPMDP platform.
    <a id="change">codeconfig = _load_config(hass.config.path(GPMDP_CONFIG_FILE))</a>
    <a id="change">if len(codeconfig):
        code = codeconfig.get("CODE")
    elif discovery_info is not None:
        if &quotgpmdp&quot in _CONFIGURING:
            return
        code = None
    else:
        code = None
   </a> setup_gpmdp(hass, config, code, add_devices_callback)


class GPMDP(MediaPlayerDevice):</code></pre>