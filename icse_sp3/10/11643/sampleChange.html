<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        entities = self.entity_extractor.get_entities(text)

        if len(entities) == 0:
            res = <a id="change">{
                "text": text,
                "entities": [],
                "intent": None
            }</a>
            self._cache[text] = res
            return

        intent_probs = defaultdict(int)
        num_intents = 0.
        for e in entities:
            intent_probs[e["intent"]] += 1.
            num_intents += 1.

        for k, v in intent_probs.iteritems():
            intent_probs[k] /= num_intents

        top_intent, top_prob = sorted(intent_probs.items(),
                                      key=operator.itemgetter(1),
                                      reverse=True)[0]
        result = <a id="change">{
            "text": text,
            "entities": entities,
            "intent": {
                "name": top_intent,
                "prob": top_prob,
            }
        }</a>
        self._cache[text] = result
</code></pre><h3>After Change</h3><pre><code class='java'>
        entities = self.entity_extractor.get_entities(text)

        if len(entities) == 0:
            res = <a id="change">result(text)</a>
            self._cache[text] = res
            return

        intent_probs = defaultdict(int)</code></pre>