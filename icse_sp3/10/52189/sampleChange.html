<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    :param mat: 3x3 matrix
    :returns rot_mat: 3x3 rotation matrix.
    
    <a id="change">if mat.ndim == 2:
        mat = np.expand_dims(mat, axis=0)
   </a> assert mat.ndim == 3

    n_mats, _, _ = <a id="change">mat.shape</a>
    assert mat.shape == (n_mats,) + (3,) * 2

    mat_unitary_u, diag_s, mat_unitary_v = np.linalg.svd(mat)
    rot_mat = np.matmul(mat_unitary_u, mat_unitary_v)</code></pre><h3>After Change</h3><pre><code class='java'>
    mat = vectorization_utils.expand_dims(mat, to_dim=3)

    _, mat_dim_1, mat_dim_2 = mat.shape
    <a id="change">assert mat_dim_1 == mat_dim_2 == 3</a>

    mat_unitary_u, diag_s, mat_unitary_v = np.linalg.svd(mat)
    rot_mat = np.matmul(mat_unitary_u, mat_unitary_v)
</code></pre>