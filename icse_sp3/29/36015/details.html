<html><h3>7fd49e352027b5e24d0f8ede917877e5d5ef945f,dataset/models/tf/vgg.py,VGG,_build,#VGG#,45
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        if batch_norm:
            kwargs[&quotbatch_norm&quot] = batch_norm

        <a id="change">net = self.body(dim, inputs[&quotimages&quot], arch, **kwargs)</a>
        net = <a id="change">self.head(dim, net, style=&quotdense&quot, layout=&quotfff&quot, num_classes=num_classes, units=[100, 100], **kwargs)</a>

        logits = tf.identity(net, name=&quotpredictions&quot)
        pred_proba = <a id="change">tf.nn.softmax(logits, name=&quotpredicted_proba&quot)</a>
        pred_labels = tf.argmax(pred_proba, axis=-1, name=&quotpredicted_labels&quot)
        true_labels = tf.argmax(inputs[&quotlabels&quot], axis=-1, name=&quottrue_labels&quot)
        equality = tf.equal(pred_labels, true_labels)
        equality = tf.cast(equality, dtype=tf.float32)</code></pre><h3>After Change</h3><pre><code class='java'>
        - number of filters in each layer
    

    def _build(<a id="change">self</a>):
        names = [&quotimages&quot, &quotlabels&quot]
        _, inputs = self._make_inputs(names)

        num_classes = self.num_classes(&quotlabels&quot)
        data_format = self.data_format(&quotimages&quot)
        <a id="change">dim</a> = self.spatial_dim(&quotimages&quot)
        batch_norm = self.get_from_config(&quotbatch_norm&quot, {&quotmomentum&quot: 0.1})
        arch = self.get_from_config(&quotarch&quot, &quotVGG16&quot)

        input_block_config = self.get_from_config(&quotinput_block&quot, <a id="change">{}</a>)
        <a id="change">body_config = self.get_from_config(&quotbody&quot, {})</a>
        head_config = <a id="change">self.get_from_config(&quothead&quot, {&quotunits&quot: [100, 100]})</a>
        <a id="change">head_config[&quotnum_classes&quot] = num_classes</a>

        kwargs = {&quottraining&quot: self.is_training}
        if batch_norm:
            kwargs[&quotbatch_norm&quot] = batch_norm

        with tf.variable_scope(&quotVGG&quot):
            <a id="change">x = self.input_block(dim, inputs[&quotimages&quot], **{**kwargs, **input_block_config})</a>
            <a id="change">x = self.body(dim, x, arch, **{**kwargs, **body_config})</a>
            <a id="change">output = self.head(dim, x, **{**kwargs, **head_config})</a>

        logits = tf.identity(output, name=&quotpredictions&quot)
        <a id="change">tf.nn.softmax(logits, name=&quotpredicted_proba&quot)</a>

    @classmethod
    def body(cls, dim, inputs, arch, **kwargs):
         Create base VGG layers</code></pre><img src="174476661.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 20</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/analysiscenter/batchflow/commit/7fd49e352027b5e24d0f8ede917877e5d5ef945f#diff-292a8aa1d3f08d05bb47ccf20e00f3b11e2d6fecc19714a4aafaed0a3befa9d1L45' target='_blank'>Link</a></div><div id='project'> Project Name: analysiscenter/batchflow</div><div id='commit'> Commit Name: 7fd49e352027b5e24d0f8ede917877e5d5ef945f</div><div id='time'> Time: 2017-11-10</div><div id='author'> Author: rhudor@gmail.com</div><div id='file'> File Name: dataset/models/tf/vgg.py</div><div id='class'> Class Name: VGG</div><div id='method'> Method Name: _build</div><BR><BR><div id='link'><a href='https://github.com/analysiscenter/batchflow/commit/7fd49e352027b5e24d0f8ede917877e5d5ef945f#diff-16ecf34e37a6a48f1e5ef1b9d2e2cd3badabe9fab683e8db4b4bcce1574fad1eL26' target='_blank'>Link</a></div><div id='project'> Project Name: analysiscenter/batchflow</div><div id='commit'> Commit Name: 7fd49e352027b5e24d0f8ede917877e5d5ef945f</div><div id='time'> Time: 2017-11-10</div><div id='author'> Author: rhudor@gmail.com</div><div id='file'> File Name: dataset/models/tf/unet.py</div><div id='class'> Class Name: UNet</div><div id='method'> Method Name: _build</div><BR><BR><div id='link'><a href='https://github.com/analysiscenter/batchflow/commit/7fd49e352027b5e24d0f8ede917877e5d5ef945f#diff-ef704d09fdb95dc075a71e4cef17ad2ed3f5977e2c88492ffa33fbac95d7107bL27' target='_blank'>Link</a></div><div id='project'> Project Name: analysiscenter/batchflow</div><div id='commit'> Commit Name: 7fd49e352027b5e24d0f8ede917877e5d5ef945f</div><div id='time'> Time: 2017-11-10</div><div id='author'> Author: rhudor@gmail.com</div><div id='file'> File Name: dataset/models/tf/linknet.py</div><div id='class'> Class Name: LinkNet</div><div id='method'> Method Name: _build</div><BR>