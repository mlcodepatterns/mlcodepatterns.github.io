<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            for start, end in zip(range(0, number_of_training_data, batch_size),range(batch_size, number_of_training_data, batch_size)):
                if epoch==0 and counter==0:
                    print("trainX[start:end]:",trainX[start:end]) &#47&#472d-array. each element slength is a 100.
                    <a id="change">print("trainY[start:end]:",trainY[start:end])</a> &#47&#47a list,each element is a list.element:may be has 1,2,3,4,5 labels.
                    &#47&#47print("trainY1999[start:end]:",trainY1999[start:end])
                    train_Y_batch=process_labels(trainY[start:end])
                curr_loss,_=sess.run([fast_text.loss_val,fast_text.train_op],feed_dict={fast_text.sentence:trainX[start:end],</code></pre><h3>After Change</h3><pre><code class='java'>
                print("Epoch %d Validation Loss:%.3f\tValidation Accuracy: %.3f" % (epoch,eval_loss,eval_accuracy)) &#47&#47,\tValidation Accuracy: %.3f---&gt;eval_acc
                &#47&#47save model to checkpoint
                print("Going to save checkpoint.")
                <a id="change">save_path=FLAGS.ckpt_dir+"model.ckpt"</a>
                <a id="change">saver.save(sess,save_path,global_step=epoch)</a> &#47&#47fast_text.epoch_step

        &#47&#47 5.最后在测试集上做测试，并报告测试准确率 Test
        test_loss, test_acc = do_eval(sess, fast_text, testX, testY,batch_size,index2label) &#47&#47testY1999</code></pre>