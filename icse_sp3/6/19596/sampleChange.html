<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    
    
    bvecs = sphere.vertices
    mult1 = <a id="change">np.tensordot(bvecs, q_form, (1, len(q_form.shape[:-2])))</a>
    transposer = list(np.arange(1, len(q_form.shape[:-2])+1))  + [0, -1]
    <a id="change">mult2 = np.dot(np.transpose(mult1, transposer),  bvecs.T)</a>
    <a id="change">return mult2[..., np.arange(bvecs.shape[0]), np.arange(bvecs.shape[0])]</a>


class TensorModel(object):
     Diffusion Tensor</code></pre><h3>After Change</h3><pre><code class='java'>
    
    
    bvecs = sphere.vertices
    <a id="change">D = design_matrix(bvecs.T, np.ones(bvecs.shape[0]))[:, :6]</a>
    <a id="change">return -np.dot(lower_triangular(q_form), D.T)</a>


class TensorModel(object):
     Diffusion Tensor</code></pre>