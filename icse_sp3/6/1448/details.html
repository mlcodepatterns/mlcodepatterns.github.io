<html><h3>dfd4fe157a74c5cca93bbb408ae83e0d1bd48077,python/seldon_core/user_model.py,,client_custom_metrics,#Any#Any#Any#Any#,325
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        try:
            metrics = user_model.metrics()
            if not validate_metrics(metrics):
                j_str = <a id="change">json.dumps(metrics)</a>
                raise SeldonMicroserviceException(
                    "Bad metric created during request: " + j_str,
                    status_code=500,
                    reason="MICROSERVICE_BAD_METRIC",</code></pre><h3>After Change</h3><pre><code class='java'>
       A list of custom metrics

    
    <a id="change">if not validate_metrics(runtime_metrics):
        raise SeldonMicroserviceException(
            f"Bad metric created during request: {json.dumps(runtime_metrics)}",
            status_code=500,
            reason="MICROSERVICE_BAD_METRIC",
        )
   </a> seldon_metrics.update(runtime_metrics, method)

    if hasattr(user_model, "metrics"):
        try:
            metrics = user_model.metrics()
            if not validate_metrics(metrics):
                <a id="change">raise SeldonMicroserviceException(
                    f"Bad metric created during request: {json.dumps(metrics)}",
                    status_code=500,
                    reason="MICROSERVICE_BAD_METRIC",
                )</a>

            seldon_metrics.update(metrics, method)
            if INCLUDE_METRICS_IN_CLIENT_RESPONSE:
                return metrics + runtime_metrics
            else:
                return []
        except SeldonNotImplementedError:
            pass
    logger.debug("custom_metrics is not implemented")
    <a id="change">if INCLUDE_METRICS_IN_CLIENT_RESPONSE:
        return runtime_metrics
    else:
        return []


</a>def client_feature_names(
    user_model: SeldonComponent, original: Iterable[str]
) -&gt; Iterable[str]:
    </code></pre><img src="11156186.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 5</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/SeldonIO/seldon-core/commit/dfd4fe157a74c5cca93bbb408ae83e0d1bd48077#diff-7d31c106c2abd9f029a3ad0e928ca6a23c2fad52db52d963f4b3644e45d9d6bbL352' target='_blank'>Link</a></div><div id='project'> Project Name: SeldonIO/seldon-core</div><div id='commit'> Commit Name: dfd4fe157a74c5cca93bbb408ae83e0d1bd48077</div><div id='time'> Time: 2020-09-18</div><div id='author'> Author: r.j.skolasinski@gmail.com</div><div id='file'> File Name: python/seldon_core/user_model.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: client_custom_metrics</div><BR><BR><div id='link'><a href='https://github.com/chakki-works/doccano/commit/49d41416e440926f0a9a8243b4d77f6f5468efe9#diff-d99b7d47f927a1f9a22c3ed872ee6d3aed488219df3fc8de90ad828daa96293cL243' target='_blank'>Link</a></div><div id='project'> Project Name: chakki-works/doccano</div><div id='commit'> Commit Name: 49d41416e440926f0a9a8243b4d77f6f5468efe9</div><div id='time'> Time: 2019-03-12</div><div id='author'> Author: light.tree.1.13@gmail.com</div><div id='file'> File Name: app/server/utils.py</div><div id='class'> Class Name: JsonHandler</div><div id='method'> Method Name: parse</div><BR><BR><div id='link'><a href='https://github.com/horovod/horovod/commit/cb6bb26d0f5469f48d054196764c04f6d7bce797#diff-c9369f0887aa2064f6ced625c4240dda95e518cdf1e8c12484e666cdb1d4253eL73' target='_blank'>Link</a></div><div id='project'> Project Name: horovod/horovod</div><div id='commit'> Commit Name: cb6bb26d0f5469f48d054196764c04f6d7bce797</div><div id='time'> Time: 2020-06-13</div><div id='author'> Author: github@enrico.minack.dev</div><div id='file'> File Name: test/integration/elastic_common.py</div><div id='class'> Class Name: BaseElasticTests</div><div id='method'> Method Name: _run</div><BR>