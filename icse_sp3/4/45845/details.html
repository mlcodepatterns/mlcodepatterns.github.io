<html><h3>7dc870df00c8fbb7fd8a73f70b18e24c41664188,osmnx/utils.py,,great_circle_vec,#Any#Any#Any#Any#Any#,272
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    theta1 = np.deg2rad(lng1)
    theta2 = np.deg2rad(lng2)

    cos = (np.sin(phi1) * np.sin(phi2) <a id="change">*</a> <a id="change">np.cos(theta1 - theta2)</a> + np.cos(phi1) * np.cos(phi2))

    &#47&#47 ignore warnings during this calculation because numpy warns it cannot
    &#47&#47 calculate arccos for self-loops since u==v
    with warnings.catch_warnings():
        warnings.simplefilter(&quotignore&quot)
        <a id="change">arc = np.arccos(cos)</a>

    &#47&#47 return distance in units of earth_radius
    distance = arc * earth_radius
    return distance</code></pre><h3>After Change</h3><pre><code class='java'>
    h = np.sin(dphi/2)**2 + np.cos(phi1) * np.cos(phi2) * np.sin(dtheta/2)**2 
    h = np.minimum(1.0, h) &#47&#47 protection against floating point errors

    arc = 2 * np.arcsin(<a id="change">np.sqrt(h)</a>)

    &#47&#47 return distance in units of earth_radius
    distance = arc * earth_radius</code></pre><img src="213715471.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/gboeing/osmnx/commit/7dc870df00c8fbb7fd8a73f70b18e24c41664188#diff-d1d494915afc629c524967682a123e6bf3d316a6f7b2b6c7ac780f698d055ef0L294' target='_blank'>Link</a></div><div id='project'> Project Name: gboeing/osmnx</div><div id='commit'> Commit Name: 7dc870df00c8fbb7fd8a73f70b18e24c41664188</div><div id='time'> Time: 2018-02-19</div><div id='author'> Author: IlyaOrson@users.noreply.github.com</div><div id='file'> File Name: osmnx/utils.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: great_circle_vec</div><BR><BR><div id='link'><a href='https://github.com/bsmurphy/PyKrige/commit/eb08d1ea38ef34b757b7a5b0736ce92e2a4b0fb0#diff-f6699aef72bb8095468546f89b7de9e5767fceb4d51f9150371973de4a4a090eL93' target='_blank'>Link</a></div><div id='project'> Project Name: bsmurphy/PyKrige</div><div id='commit'> Commit Name: eb08d1ea38ef34b757b7a5b0736ce92e2a4b0fb0</div><div id='time'> Time: 2017-02-03</div><div id='author'> Author: malte.ziebarth@fmvkb.de</div><div id='file'> File Name: pykrige/core.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: great_circle_distance</div><BR><BR><div id='link'><a href='https://github.com/scikit-image/scikit-image/commit/2b83e8e84873a2f5cf81d0a8e848324dee974071#diff-34acab621bfddc46a8c62f72a08284cd20d06058b76682476a2bc37a11f80b24L1169' target='_blank'>Link</a></div><div id='project'> Project Name: scikit-image/scikit-image</div><div id='commit'> Commit Name: 2b83e8e84873a2f5cf81d0a8e848324dee974071</div><div id='time'> Time: 2020-03-24</div><div id='author'> Author: danielleholzberger@gmail.com</div><div id='file'> File Name: skimage/transform/_geometric.py</div><div id='class'> Class Name: SimilarityTransform</div><div id='method'> Method Name: scale</div><BR>