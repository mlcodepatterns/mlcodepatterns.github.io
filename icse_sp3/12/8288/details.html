<html><h3>699508c642a95537853090995a83fad992e6bb51,examples/mnist/keras/mnist_tf.py,,main_fun,#Any#Any#,6
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    multi_worker_model = build_and_compile_cnn_model()
  multi_worker_model.fit(x=train_datasets, epochs=args.epochs, steps_per_epoch=args.steps_per_epoch, callbacks=callbacks)

  <a id="change">if ctx.job_name == &quotchief&quot:
    from tensorflow_estimator.python.estimator.export import export_lib
    export_dir = export_lib.get_timestamped_export_dir(args.export_dir)
    tf.keras.experimental.export_saved_model(multi_worker_model, export_dir)
    &#47&#47 multi_worker_model.save(args.model_dir, save_format=&quottf&quot)


</a>if __name__ == &quot__main__&quot:
  import argparse
  from pyspark.context import SparkContext
  from pyspark.conf import SparkConf</code></pre><h3>After Change</h3><pre><code class='java'>
  multi_worker_model.fit(x=train_datasets, epochs=args.epochs, steps_per_epoch=args.steps_per_epoch, callbacks=callbacks)

  from tensorflow_estimator.python.estimator.export import export_lib
  <a id="change">export_dir = export_lib.get_timestamped_export_dir(args.export_dir)</a>
  <a id="change">multi_worker_model.save(export_dir, save_format=&quottf&quot)</a>


if __name__ == &quot__main__&quot:
  import argparse</code></pre><img src="59568580.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 4</div><BR><div id='size'>Non-data size: 9</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/yahoo/TensorFlowOnSpark/commit/699508c642a95537853090995a83fad992e6bb51#diff-5496f5ab0e3276eb30d8eae300191b0f30cf2c40a92511dbfdc63b55f17d5564L60' target='_blank'>Link</a></div><div id='project'> Project Name: yahoo/TensorFlowOnSpark</div><div id='commit'> Commit Name: 699508c642a95537853090995a83fad992e6bb51</div><div id='time'> Time: 2019-12-05</div><div id='author'> Author: leewyang@verizonmedia.com</div><div id='file'> File Name: examples/mnist/keras/mnist_tf.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: main_fun</div><BR><BR><div id='link'><a href='https://github.com/yahoo/TensorFlowOnSpark/commit/699508c642a95537853090995a83fad992e6bb51#diff-7f3060725806daac40c82b7c58534e646da3dc2e90c1f2a283a4500355eca3aaL56' target='_blank'>Link</a></div><div id='project'> Project Name: yahoo/TensorFlowOnSpark</div><div id='commit'> Commit Name: 699508c642a95537853090995a83fad992e6bb51</div><div id='time'> Time: 2019-12-05</div><div id='author'> Author: leewyang@verizonmedia.com</div><div id='file'> File Name: examples/mnist/keras/mnist_spark.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: main_fun</div><BR><BR><div id='link'><a href='https://github.com/yahoo/TensorFlowOnSpark/commit/699508c642a95537853090995a83fad992e6bb51#diff-848deaf4d5530d0dd2071c51f52868cd516abf75fb6ae2d6390621bb03c16f1fL86' target='_blank'>Link</a></div><div id='project'> Project Name: yahoo/TensorFlowOnSpark</div><div id='commit'> Commit Name: 699508c642a95537853090995a83fad992e6bb51</div><div id='time'> Time: 2019-12-05</div><div id='author'> Author: leewyang@verizonmedia.com</div><div id='file'> File Name: examples/mnist/keras/mnist_tf_ds.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: main_fun</div><BR><BR><div id='link'><a href='https://github.com/yahoo/TensorFlowOnSpark/commit/699508c642a95537853090995a83fad992e6bb51#diff-5dee5d00e94054ca60dda46abc91dc64ebe589729bf6a22ea31d5a37807a429dL56' target='_blank'>Link</a></div><div id='project'> Project Name: yahoo/TensorFlowOnSpark</div><div id='commit'> Commit Name: 699508c642a95537853090995a83fad992e6bb51</div><div id='time'> Time: 2019-12-05</div><div id='author'> Author: leewyang@verizonmedia.com</div><div id='file'> File Name: examples/mnist/keras/mnist_pipeline.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: main_fun</div><BR>