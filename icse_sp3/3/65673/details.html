<html><h3>31803d30a9f0c4dde1342678f8fced1d0978c2db,tests/test_torch_agent.py,TestTorchAgent,test_batchify,#TestTorchAgent#,306
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            self.assertEqual(list(batch.valid_indices), [1, 2, 0])

            &#47&#47 test lambda
            batch = <a id="change">agent.batchify(obs_vecs, is_valid=(
                lambda obs: &quottext_vec&quot in obs and len(obs[&quottext_vec&quot]) &lt; 3))</a>
            self.assertEqual(batch.text_vec.tolist(), [[1, 2]])
            self.assertEqual(batch.text_lengths, [2])
            self.assertEqual(batch.label_vec.tolist(), [[1, 2]])
            self.assertEqual(batch.label_lengths, [2])</code></pre><h3>After Change</h3><pre><code class='java'>
                return &quottext_vec&quot in obs and len(obs[&quottext_vec&quot]) &lt; 3
            agent.is_valid = is_valid

            <a id="change">batch = agent.batchify(obs_vecs)</a>
            self.assertEqual(batch.text_vec.tolist(), [[1, 2]])
            self.assertEqual(batch.text_lengths, [2])
            self.assertEqual(batch.label_vec.tolist(), [[1, 2]])
            self.assertEqual(batch.label_lengths, [2])</code></pre><img src="303634265.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 7</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/facebookresearch/ParlAI/commit/31803d30a9f0c4dde1342678f8fced1d0978c2db#diff-0395e456ad28e09ed6240660e2338a118017b51cef591f61cc89354f20d9faf6L308' target='_blank'>Link</a></div><div id='project'> Project Name: facebookresearch/ParlAI</div><div id='commit'> Commit Name: 31803d30a9f0c4dde1342678f8fced1d0978c2db</div><div id='time'> Time: 2019-02-27</div><div id='author'> Author: edinan@fb.com</div><div id='file'> File Name: tests/test_torch_agent.py</div><div id='class'> Class Name: TestTorchAgent</div><div id='method'> Method Name: test_batchify</div><BR><BR><div id='link'><a href='https://github.com/facebookresearch/pytext/commit/a736a6fa2daf5bc086c658acad68cc2af1e94b57#diff-9910b5fc69ba84fbf7324b22946c27af15c3b6cc0e052d0ed17474ab30e8f1a5L38' target='_blank'>Link</a></div><div id='project'> Project Name: facebookresearch/pytext</div><div id='commit'> Commit Name: a736a6fa2daf5bc086c658acad68cc2af1e94b57</div><div id='time'> Time: 2019-04-24</div><div id='author'> Author: mikaell@fb.com</div><div id='file'> File Name: pytext/data/test/batch_sampler_test.py</div><div id='class'> Class Name: BatchSamplerTest</div><div id='method'> Method Name: test_prob_batch_sampler</div><BR><BR><div id='link'><a href='https://github.com/pyannote/pyannote-audio/commit/7bef7c98663e373c4fae91eb7aeb20e8eb9fca7f#diff-9053cea7162948d0c3200047fc4ab5634e178d8153e46996a60e794f7ebb3279L91' target='_blank'>Link</a></div><div id='project'> Project Name: pyannote/pyannote-audio</div><div id='commit'> Commit Name: 7bef7c98663e373c4fae91eb7aeb20e8eb9fca7f</div><div id='time'> Time: 2017-05-17</div><div id='author'> Author: bredin@limsi.fr</div><div id='file'> File Name: pyannote/audio/embedding/approaches/triplet_loss.py</div><div id='class'> Class Name: TripletLoss</div><div id='method'> Method Name: _get_batch_generator_y</div><BR><BR><div id='link'><a href='https://github.com/dnouri/skorch/commit/e82c5a5ad0873d0ac8bf824b603f163ee5ac18ef#diff-ac9a2e73b0f538e3841f01d74f9bdeada64931ee94b688e48ed506ea08abe8f9L66' target='_blank'>Link</a></div><div id='project'> Project Name: dnouri/skorch</div><div id='commit'> Commit Name: e82c5a5ad0873d0ac8bf824b603f163ee5ac18ef</div><div id='time'> Time: 2017-07-24</div><div id='author'> Author: marian.tietz@ottogroup.com</div><div id='file'> File Name: examples/word_language_model/train.py</div><div id='class'> Class Name: Loader</div><div id='method'> Method Name: __init__</div><BR><BR><div id='link'><a href='https://github.com/pyannote/pyannote-audio/commit/7bef7c98663e373c4fae91eb7aeb20e8eb9fca7f#diff-9053cea7162948d0c3200047fc4ab5634e178d8153e46996a60e794f7ebb3279L135' target='_blank'>Link</a></div><div id='project'> Project Name: pyannote/pyannote-audio</div><div id='commit'> Commit Name: 7bef7c98663e373c4fae91eb7aeb20e8eb9fca7f</div><div id='time'> Time: 2017-05-17</div><div id='author'> Author: bredin@limsi.fr</div><div id='file'> File Name: pyannote/audio/embedding/approaches/triplet_loss.py</div><div id='class'> Class Name: TripletLoss</div><div id='method'> Method Name: _get_batch_generator_z</div><BR><BR><div id='link'><a href='https://github.com/pyannote/pyannote-audio/commit/a494415343ae6cfe3781a51d978b0876b98adc47#diff-35cead4c47262ae49fcaf2f91b1e62d5027b0c61e3d9e7165f82e6f1e6970bf2L302' target='_blank'>Link</a></div><div id='project'> Project Name: pyannote/pyannote-audio</div><div id='commit'> Commit Name: a494415343ae6cfe3781a51d978b0876b98adc47</div><div id='time'> Time: 2018-06-29</div><div id='author'> Author: bredin@limsi.fr</div><div id='file'> File Name: pyannote/audio/generators/speaker.py</div><div id='class'> Class Name: SpeechSegmentGenerator</div><div id='method'> Method Name: __call__</div><BR><BR><div id='link'><a href='https://github.com/dnouri/skorch/commit/f4969e2ec63686911b6697099e9cf55bfbe1d441#diff-2121be6f8aaf71ad7791b9c2360968bccf9a64db2418d2b28bfaf4638d9bf9fdL55' target='_blank'>Link</a></div><div id='project'> Project Name: dnouri/skorch</div><div id='commit'> Commit Name: f4969e2ec63686911b6697099e9cf55bfbe1d441</div><div id='time'> Time: 2017-08-04</div><div id='author'> Author: marian.tietz@ottogroup.com</div><div id='file'> File Name: examples/word_language_model/data.py</div><div id='class'> Class Name: Loader</div><div id='method'> Method Name: __init__</div><BR>