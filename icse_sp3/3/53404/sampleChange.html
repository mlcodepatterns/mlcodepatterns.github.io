<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        indices = scipy.signal.argrelmax(y, order=order)[0]

        mini = np.nanpercentile(y, 1) if self.percentile else np.nanmin(y)
        maxi = <a id="change">np.nanpercentile(y, 99)</a> if self.percentile else np.nanmax(y)
        threshold = mini + self.alpha * (maxi - mini)

        peak_time = np.array([sw[i].middle for i in indices if y[i] &gt; threshold])</code></pre><h3>After Change</h3><pre><code class='java'>
            mini = 0
            maxi = 1

        elif <a id="change">self</a>.scale == &quotrelative&quot:
            mini = np.nanmin(data)
            maxi = np.nanmax(data)

        elif self.scale == &quotpercentile&quot:
            mini = np.nanpercentile(data, 1)
            maxi = <a id="change">np.nanpercentile(data, 99)</a>

        threshold = mini + self.alpha * (maxi - mini)

        peak_time = np.array([sw[i].middle for i in indices if y[i] &gt; threshold])</code></pre>