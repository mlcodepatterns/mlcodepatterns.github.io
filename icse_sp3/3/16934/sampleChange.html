<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
            &#47&#47 Correct the KL divergence w.r.t. the exaggeration
            error = (error - np.sum(P) * np.log(exaggeration)) / exaggeration

            <a id="change">print(&quotIteration % 4d, error %.4f&quot % (iteration + 1, error))</a>

        grad_direction_flipped = np.sign(update) != np.sign(gradient)
        grad_direction_same = np.invert(grad_direction_flipped)
        gains[grad_direction_flipped] += 0.2</code></pre><h3>After Change</h3><pre><code class='java'>

        if should_call_callback:
            &#47&#47 Continue only if all the callbacks say so
            <a id="change">should_continue = all((bool(c(iteration + 1, error, embedding)) for c in callbacks))</a>
            if not should_continue:
                &#47&#47 Make sure to un-exaggerate P so it&quots not corrupted in future runs
                if exaggeration != 1:
                    P /= exaggeration</code></pre>