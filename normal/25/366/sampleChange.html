<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

    &#47&#47 Convert intervals to boundaries
    reference_boundaries = util.intervals_to_boundaries(reference_intervals)[0]
    <a id="change">estimated_boundaries</a> = <a id="change">util.intervals_to_boundaries(estimated_intervals)[0]</a>

    &#47&#47 Suppress the first and last intervals
    if trim:
        reference_boundaries = reference_boundaries[1:-1]
        <a id="change">estimated_boundaries</a> = estimated_boundaries[1:-1]

    &#47&#47 If we have no boundaries, we get no score.
    if len(reference_boundaries) == 0 or len(estimated_boundaries) == 0:
        return 0.0, 0.0, 0.0

    &#47&#47 Compute the hits
    <a id="change">dist</a>        = np.abs( np.subtract.outer(reference_boundaries, estimated_boundaries)) &lt;= window

    &#47&#47 Precision: how many estimated intervals were hits?
    precision   = np.mean(dist.max(axis=0))

    &#47&#47 Recall: how many of the intervals did we catch?
    <a id="change">recall</a>      = np.mean(dist.max(axis=1))

    &#47&#47 And the f-measure
    <a id="change">f_measure</a>   = util.f_measure(precision, recall, beta=beta)

    return precision, recall, f_measure
</code></pre><h3>After Change</h3><pre><code class='java'>

    &#47&#47 Convert intervals to boundaries
    reference_boundaries = util.intervals_to_boundaries(reference_intervals)
    <a id="change">estimated_boundaries</a> = <a id="change">util.intervals_to_boundaries(estimated_intervals)</a>

    &#47&#47 Suppress the first and last intervals
    if trim:
        reference_boundaries = reference_boundaries[1:-1]
        <a id="change">estimated_boundaries</a> = estimated_boundaries[1:-1]

    &#47&#47 If we have no boundaries, we get no score.
    if len(reference_boundaries) == 0 or len(estimated_boundaries) == 0:
        return 0.0, 0.0, 0.0

    &#47&#47 Compute the hits
    <a id="change">dist</a>        = np.abs( np.subtract.outer(reference_boundaries, estimated_boundaries)) &lt;= window

    &#47&#47 Precision: how many estimated intervals were hits?
    precision   = np.mean(dist.max(axis=0))

    &#47&#47 Recall: how many of the intervals did we catch?
    <a id="change">recall</a>      = np.mean(dist.max(axis=1))

    &#47&#47 And the f-measure
    <a id="change">f_measure</a>   = util.f_measure(precision, recall, beta=beta)

    return precision, recall, f_measure
</code></pre>